import"./base-56227e5d.js";import{E as S,a as C}from"./el-breadcrumb-item-59a8d6d5.js";import{q as T,s as c,o as t,e as a,a as o,t as p,F as u,b as l,w as n,f as i,h as y,c as m,g as d,i as f,n as b}from"./app-33020c92.js";import{_ as B,a as E}from"./TextInput-1f4ada43.js";import{_ as V}from"./InputLabel-cb7cfcd9.js";import{J as D}from"./Textarea-fb103628.js";import{_ as J}from"./PrimaryButton-6b9f4282.js";import{J as O}from"./SelectInput-a557b92c.js";import{a as U}from"./DialogModal-61701a9e.js";import{_ as L}from"./DangerButton-d84d9b81.js";import{_ as A}from"./SecondaryButton-cebaf51c.js";import{_ as P}from"./_plugin-vue_export-helper-c27b6911.js";import"./icon-02db1ed7.js";import"./index-cea313c0.js";/* empty css            */const I=T({components:{JetLabel:V,JetInput:B,JetTextarea:D,JetButton:J,JetInputError:E,JetSelectInput:O,JetDialogModal:U,JetSecondaryButton:A,JetDangerButton:L},props:{message:Object,action:String,parentMessage:Object,modelValue:Boolean,breadcrumbs:Array,showHeader:{type:Boolean,default:!1}},data(){return{form:null,showModal:this.modelValue,showSuccessMessage:!1,showErrorMessage:!1}},watch:{showModal:{handler:function(e,s){e!=this.modelValue&&this.$emit("update:modelValue",e)}},modelValue:{handler:function(e,s){e!=this.showModal&&(this.showModal=e,this.reset())}}},computed:{hasMessage(){return this.message!=null},wantsToUpdate(){return!!(this.hasMessage&&this.action=="update")},wantsToDelete(){return!!(this.hasMessage&&this.action=="delete")}},methods:{nagivateToMessage(e=null){e?this.$inertia.get(route("show.message",{project:route().params.project,message:e.id})):this.$inertia.get(route("show.messages",{project:route().params.project}))},goBackToPreviousPage(){window.history.back()},openModal(){this.showModal=!0},closeModal(){this.showModal=!1},create(){var e={preserveState:!0,preserveScroll:!0,replace:!0,onSuccess:s=>{this.handleOnSuccess()},onError:s=>{this.handleOnError()}};this.form.post(route("create.message",{project:route().params.project}),e)},update(){var e={preserveState:!0,preserveScroll:!0,replace:!0,onSuccess:s=>{this.handleOnSuccess()},onError:s=>{this.handleOnError()}};this.form.put(route("update.message",{project:route().params.project,message:this.message.id}),e)},destroy(){var e={preserveState:!0,preserveScroll:!0,replace:!0,onSuccess:s=>{this.handleOnSuccess(!0)},onError:s=>{this.handleOnError()}};this.form.delete(route("delete.message",{project:route().params.project,message:this.message.id}),e)},handleOnSuccess(e=!1){this.reset(),this.closeModal(),e&&this.$emit("onDeleted"),this.showSuccessMessage=!0,setTimeout(()=>{this.showSuccessMessage=!1},3e3)},handleOnError(){this.showErrorMessage=!0,setTimeout(()=>{this.showErrorMessage=!1},3e3)},reset(){this.form=this.$inertia.form({content:this.hasMessage?this.message.content:null,parent_id:this.parentMessage?this.parentMessage.id:null})}},created(){this.reset()}}),N={key:0,class:"grid grid-cols-2 mb-6 gap-4"},z={class:"bg-gray-50 pt-4 pl-6 border-b rounded-t"},F={class:"text-2xl font-semibold leading-6 text-gray-500 mb-4"},H=o("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 16l-4-4m0 0l4-4m-4 4h18"})],-1),q=o("span",{class:"ml-2"},"Go Back",-1),G=o("span",{class:"hover:underline hover:text-green-600 text-green-500 font-semibold cursor-pointer"},"Messages",-1),Y={class:"hover:underline hover:text-green-600 text-green-500 font-semibold cursor-pointer"},K={class:"bg-gray-50 border-b pl-6 py-3 rounded-t text-gray-500 text-sm mb-6"},Q=o("span",{class:"font-bold mr-2"},"Api Link:",-1),R={key:0},W={key:1},X={key:0},Z=o("div",{class:"clear-both"},null,-1),x={key:0,class:"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded relative mb-6 mt-3",role:"alert"},ee={key:0,class:"font-bold"},se={key:1,class:"font-bold"},te={key:2,class:"font-bold"},oe=o("svg",{class:"fill-current h-6 w-6 text-green-500",role:"button",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},[o("title",null,"Close"),o("path",{d:"M14.348 14.849a1.2 1.2 0 0 1-1.697 0L10 11.819l-2.651 3.029a1.2 1.2 0 1 1-1.697-1.697l2.758-3.15-2.759-3.152a1.2 1.2 0 1 1 1.697-1.697L10 8.183l2.651-3.031a1.2 1.2 0 1 1 1.697 1.697l-2.758 3.152 2.758 3.15a1.2 1.2 0 0 1 0 1.698z"})],-1),ae=[oe],re={key:1,class:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-6 mt-3",role:"alert"},ne={key:0,class:"font-bold"},le={key:1,class:"font-bold"},ie={key:2,class:"font-bold"},de=o("svg",{class:"fill-current h-6 w-6 text-red-500",role:"button",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},[o("title",null,"Close"),o("path",{d:"M14.348 14.849a1.2 1.2 0 0 1-1.697 0L10 11.819l-2.651 3.029a1.2 1.2 0 1 1-1.697-1.697l2.758-3.15-2.759-3.152a1.2 1.2 0 1 1 1.697-1.697L10 8.183l2.651-3.031a1.2 1.2 0 1 1 1.697 1.697l-2.758 3.152 2.758 3.15a1.2 1.2 0 0 1 0 1.698z"})],-1),pe=[de],ue=o("span",{class:"block mt-6 mb-6"},"Are you sure you want to delete this message?",-1),ce={class:"text-sm text-gray-500"},me={class:"block mt-6 mb-6"},ge={key:0},he={class:"rounded-lg py-1 px-2 border border-green-400 text-green-500 text-sm"},fe={key:1,class:"bg-gray-50 py-3 px-3 mt-6 mb-2"},be=o("span",{class:"hover:text-green-600 text-green-500 font-semibold"},"Messages",-1),_e={class:"text-green-500 font-semibold"},we={class:"mb-4"};function Me(e,s,ye,ve,ke,je){const _=c("jet-secondary-button"),g=C,w=S,h=c("jet-button"),v=c("jet-label"),k=c("jet-textarea"),M=c("jet-input-error"),j=c("jet-danger-button"),$=c("jet-dialog-modal");return t(),a("div",null,[e.showHeader?(t(),a("div",N,[o("div",null,[o("div",z,[o("div",F,p(e.parentMessage?e.parentMessage.content:"Messages"),1),e.parentMessage?(t(),a(u,{key:0},[l(_,{onClick:s[0]||(s[0]=r=>e.goBackToPreviousPage()),class:"py-1 mb-4"},{default:n(()=>[H,q]),_:1}),l(w,{separator:">",class:"mb-4"},{default:n(()=>[l(g,{onClick:s[1]||(s[1]=r=>e.nagivateToMessage())},{default:n(()=>[G]),_:1}),(t(!0),a(u,null,y(e.breadcrumbs,r=>(t(),m(g,{key:r.id,onClick:$e=>e.nagivateToMessage(r)},{default:n(()=>[o("span",Y,p(r.content),1)]),_:2},1032,["onClick"]))),128))]),_:1})],64)):i("",!0)]),o("div",K,[Q,e.parentMessage?(t(),a("span",R,p(e.route("api.show.message",{project:e.route().params.project,message:e.parentMessage.id,type:"children"})),1)):(t(),a("span",W,p(e.route("api.show.messages",{project:e.route().params.project})),1))])]),e.$inertia.page.props.projectPermissions.includes("Manage messages")?(t(),a("div",X,[l(h,{onClick:s[2]||(s[2]=r=>e.openModal()),class:"w-fit float-right"},{default:n(()=>[d("Add Message")]),_:1}),Z])):i("",!0)])):i("",!0),o("div",null,[e.showSuccessMessage?(t(),a("div",x,[e.wantsToUpdate?(t(),a("strong",ee,"Message updated successfully")):e.wantsToDelete?(t(),a("strong",se,"Message deleted successfully")):(t(),a("strong",te,"Message created successfully")),o("span",{onClick:s[3]||(s[3]=r=>e.showSuccessMessage=!1),class:"absolute top-0 bottom-0 right-0 px-4 py-3"},ae)])):i("",!0),e.showErrorMessage?(t(),a("div",re,[e.wantsToUpdate?(t(),a("strong",ne,"Message update failed")):e.wantsToDelete?(t(),a("strong",le,"Message delete failed")):(t(),a("strong",ie,"Message creation failed")),o("span",{onClick:s[4]||(s[4]=r=>e.showSuccessMessage=!1),class:"absolute top-0 bottom-0 right-0 px-4 py-3"},pe)])):i("",!0),l($,{show:e.showModal,closeable:!1},{title:n(()=>[e.wantsToUpdate?(t(),a(u,{key:0},[d("Update Message")],64)):e.wantsToDelete?(t(),a(u,{key:1},[d("Delete Message")],64)):(t(),a(u,{key:2},[d("Add Message")],64))]),content:n(()=>[e.wantsToDelete?(t(),a(u,{key:0},[ue,o("p",ce,p(e.message.content),1)],64)):(t(),a(u,{key:1},[o("span",me,[e.parentMessage?(t(),a("span",ge,[d(" You are "+p(e.wantsToUpdate?"updating":"adding")+" a message for ",1),o("span",he,p(e.parentMessage.content),1)])):i("",!0),e.parentMessage?(t(),a("div",fe,[l(w,{separator:">"},{default:n(()=>[l(g,null,{default:n(()=>[be]),_:1}),(t(!0),a(u,null,y(e.breadcrumbs,r=>(t(),m(g,{key:r.id},{default:n(()=>[o("span",_e,p(r.content),1)]),_:2},1024))),128))]),_:1})])):i("",!0)]),o("div",we,[l(v,{for:"content",value:"Content"}),l(k,{id:"content",class:"w-full mt-1 block",modelValue:e.form.content,"onUpdate:modelValue":s[5]||(s[5]=r=>e.form.content=r)},null,8,["modelValue"]),l(M,{message:e.form.errors.content,class:"mt-2"},null,8,["message"]),l(M,{message:e.form.errors.parent_message_id,class:"mt-2"},null,8,["message"])])],64))]),footer:n(()=>[l(_,{onClick:s[6]||(s[6]=r=>e.closeModal()),class:"mr-2"},{default:n(()=>[d(" Cancel ")]),_:1}),e.hasMessage?i("",!0):(t(),m(h,{key:0,onClick:s[7]||(s[7]=f(r=>e.create(),["prevent"])),class:b({"opacity-25":e.form.processing}),disabled:e.form.processing},{default:n(()=>[d(" Create ")]),_:1},8,["class","disabled"])),e.wantsToUpdate?(t(),m(h,{key:1,onClick:s[8]||(s[8]=f(r=>e.update(),["prevent"])),class:b({"opacity-25":e.form.processing}),disabled:e.form.processing},{default:n(()=>[d(" Update ")]),_:1},8,["class","disabled"])):i("",!0),e.wantsToDelete?(t(),m(j,{key:2,onClick:s[9]||(s[9]=f(r=>e.destroy(),["prevent"])),class:b({"opacity-25":e.form.processing}),disabled:e.form.processing},{default:n(()=>[d(" Delete ")]),_:1},8,["class","disabled"])):i("",!0)]),_:1},8,["show"])])])}const ze=P(I,[["render",Me]]);export{ze as default};
