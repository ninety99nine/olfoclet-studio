import g from"./ActiveStatusBadge-171671e4.js";import w from"./ActiveStatusBadge-6512a564.js";import b from"./ManageSubscriptionModal-bda792ee.js";import{P as f}from"./Pagination-a57567dc.js";import{q as y,s as i,o,e as r,b as p,a as t,F as _,h as v,f as c,t as a,i as l}from"./app-2307de4f.js";import{h as k}from"./moment-fbc5633a.js";import{_ as S}from"./_plugin-vue_export-helper-c27b6911.js";/* empty css            */import"./base-560bd877.js";import"./el-radio-f7456330.js";import"./constants-24ec7b7a.js";import"./icon-cfceea8b.js";import"./el-scrollbar-0b99ceb4.js";import"./el-tag-72070bdc.js";import"./index-20f83223.js";import"./el-popper-111808da.js";import"./TextInput-54910cf2.js";import"./InputLabel-7bccc036.js";import"./Textarea-8169f6a5.js";import"./PrimaryButton-13424458.js";import"./SelectInput-41580882.js";import"./DialogModal-716ff8a0.js";import"./DangerButton-1fb7a6d7.js";import"./ActionMessage-387f5d44.js";import"./SecondaryButton-595e01f3.js";const P=y({components:{ManageSubscriptionModal:b,SubscriptionActiveStatusBadge:w,PricingPlanActiveStatusBadge:g,Pagination:f},props:{totalSubscribers:Number,pricingPlans:Array,subscriptionsPayload:Object},data(){return{refreshContentInterval:null,isShowingModal:!1,modalAction:null,subscription:null,moment:k}},methods:{onDeleted(){this.subscription=null},refreshContent(){this.$inertia.reload()},showModal(e,n){this.subscription=e,this.modalAction=n,this.isShowingModal=!0},getPercentageOfCoverage(e){return this.totalSubscribers>0?Math.round(e/this.totalSubscribers*100):0},cleanUp(){clearInterval(this.refreshContentInterval),this.refreshContentInterval=null}},created(){this.refreshContentInterval=setInterval(function(){this.refreshContent()}.bind(this),5e3)},unmounted(){this.cleanUp()}}),C={class:"bg-white shadow-xl sm:rounded-lg"},M={class:"flex flex-col overflow-y-auto"},A={class:"align-middle inline-block min-w-full"},B={class:"shadow border-b border-gray-200"},I={class:"min-w-full divide-y divide-gray-200"},D=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-left text-xs font-medium text-gray-500 uppercase tracking-wider border-r border-dotted border-r-teal-300"}),t("th",{scope:"col",colspan:"5",class:"px-6 py-3 whitespace-nowrap text-center text-xs font-medium text-gray-500 uppercase tracking-wider bg-teal-50 border-r border-dotted border-r-fuchsia-300"},[t("div",{class:"font-bold text-teal-500"},"SUBSCRIPTION")]),t("th",{scope:"col",colspan:"6",class:"px-6 py-3 whitespace-nowrap text-center text-xs font-medium text-gray-500 uppercase tracking-wider bg-fuchsia-50"},[t("div",{class:"font-bold text-fuchsia-500"},"PRICING PLAN")]),t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-left text-xs font-medium text-gray-500 uppercase tracking-wider border-r border-dotted border-r-teal-300"})]),t("tr",null,[t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-left text-xs font-medium text-gray-500 uppercase tracking-wider border-r border-dotted border-r-teal-300"},[t("span",null,"Mobile")]),t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-left text-xs font-medium text-gray-500 uppercase tracking-wider bg-teal-50"},[t("span",null,"Start")]),t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-left text-xs font-medium text-gray-500 uppercase tracking-wider bg-teal-50"},[t("span",null,"End")]),t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-left text-xs font-medium text-gray-500 uppercase tracking-wider bg-teal-50"},[t("span",null,"Cancelled")]),t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-left text-xs font-medium text-gray-500 uppercase tracking-wider bg-teal-50"},[t("span",null,"Active")]),t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-left text-xs font-medium text-gray-500 uppercase tracking-wider bg-teal-50 border-r border-dotted border-r-fuchsia-300"},[t("span",null,"Created")]),t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-xs font-medium text-gray-500 uppercase tracking-wider bg-fuchsia-50"},[t("span",null,"Name")]),t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-xs font-medium text-gray-500 uppercase tracking-wider bg-fuchsia-50"},[t("span",null,"Description")]),t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-center text-xs font-medium text-gray-500 uppercase tracking-wider bg-fuchsia-50"},[t("span",null,"Active")]),t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-center text-xs font-medium text-gray-500 uppercase tracking-wider bg-fuchsia-50"},[t("span",null,"Duration")]),t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-center text-xs font-medium text-gray-500 uppercase tracking-wider bg-fuchsia-50"},[t("span",null,"Price")]),t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-left text-xs font-medium text-gray-500 uppercase tracking-wider bg-fuchsia-50"},[t("span",null,"Created")]),t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-xs font-medium text-gray-500 uppercase tracking-wider text-right"},[t("span",null,"Actions")])])],-1),N={class:"bg-white divide-y divide-gray-200"},$={class:"px-6 py-3 whitespace-nowrap text-sm text-gray-500 border-r border-dotted border-r-teal-300"},O={class:"text-sm text-gray-900"},V={class:"px-6 py-3 whitespace-nowrap text-sm text-gray-500 text-left bg-teal-50"},U={class:"px-6 py-3 whitespace-nowrap text-sm text-gray-500 text-left bg-teal-50"},j={class:"px-6 py-3 whitespace-nowrap text-sm text-gray-500 text-left bg-teal-50"},E={class:"px-6 py-3 whitespace-nowrap text-sm text-gray-500 text-center bg-teal-50"},F={class:"px-6 py-3 whitespace-nowrap text-sm text-gray-500 text-left bg-teal-50 border-r border-dotted border-r-fuchsia-300"},L={class:"px-6 py-3 whitespace-nowrap text-sm text-gray-500 text-left bg-fuchsia-50"},R={class:"text-sm text-gray-900"},T={class:"px-6 py-3 whitespace-nowrap text-sm text-gray-500 text-left bg-fuchsia-50"},q={class:"px-6 py-3 whitespace-nowrap text-sm text-gray-500 text-center bg-fuchsia-50"},z={class:"px-6 py-3 whitespace-nowrap text-sm text-gray-500 text-center bg-fuchsia-50"},G={class:"px-6 py-3 whitespace-nowrap text-sm text-gray-500 text-center bg-fuchsia-50"},H={class:"px-6 py-3 whitespace-nowrap text-sm text-gray-500 text-left bg-fuchsia-50"},J={class:"px-6 py-3 whitespace-nowrap text-right text-sm font-medium"},K=["onClick"],Q=["onClick"],W={key:0},X=t("td",{colspan:13,class:"px-6 py-3 whitespace-nowrap"},[t("div",{class:"text-center text-gray-900 text-sm p-6"},"No subscriptions")],-1),Y=[X];function Z(e,n,tt,et,st,at){const d=i("ManageSubscriptionModal"),u=i("SubscriptionActiveStatusBadge"),h=i("PricingPlanActiveStatusBadge"),x=i("pagination");return o(),r("div",null,[p(d,{modelValue:e.isShowingModal,"onUpdate:modelValue":n[0]||(n[0]=s=>e.isShowingModal=s),action:e.modalAction,subscription:e.subscription,pricingPlans:e.pricingPlans,onOnDeleted:e.onDeleted},null,8,["modelValue","action","subscription","pricingPlans","onOnDeleted"]),t("div",C,[t("div",M,[t("div",A,[t("div",B,[t("table",I,[D,t("tbody",N,[(o(!0),r(_,null,v(e.subscriptionsPayload.data,s=>(o(),r("tr",{key:s.id},[t("td",$,[t("div",O,a(s.subscriber.msisdn),1)]),t("td",V,a(e.moment(s.start_at).format("lll")),1),t("td",U,a(e.moment(s.end_at).format("lll")),1),t("td",j,a(s.cancelled_at==null?"...":e.moment(s.cancelled_at).format("lll")),1),t("td",E,[p(u,{subscription:s},null,8,["subscription"])]),t("td",F,a(e.moment(s.created_at).format("lll")),1),t("td",L,[t("div",R,a(s.pricing_plan.name),1)]),t("td",T,a(s.pricing_plan.description==null?"...":s.pricing_plan.description),1),t("td",q,[p(h,{pricingPlan:s.pricing_plan},null,8,["pricingPlan"])]),t("td",z,a(s.pricing_plan.duration_in_words==null?"...":s.pricing_plan.duration_in_words),1),t("td",G,a(s.pricing_plan.price==null?"...":s.pricing_plan.price.amount_with_currency),1),t("td",H,a(s.pricing_plan.created_at==null?"...":e.moment(s.pricing_plan.created_at).format("lll")),1),t("td",J,[e.$inertia.page.props.projectPermissions.includes("Manage subscriptions")?(o(),r("a",{key:0,href:"#",onClick:l(m=>e.showModal(s,"update"),["prevent"]),class:"text-indigo-600 hover:text-indigo-900 mr-3"},"Edit",8,K)):c("",!0),e.$inertia.page.props.projectPermissions.includes("Manage subscriptions")?(o(),r("a",{key:1,href:"#",onClick:l(m=>e.showModal(s,"delete"),["prevent"]),class:"text-red-600 hover:text-red-900"},"Delete",8,Q)):c("",!0)])]))),128)),e.subscriptionsPayload.data.length==0?(o(),r("tr",W,Y)):c("",!0)])])])])]),p(x,{class:"mt-6",paginationPayload:e.subscriptionsPayload,updateData:["subscriptionsPayload"]},null,8,["paginationPayload"])])])}const Bt=S(P,[["render",Z]]);export{Bt as default};
