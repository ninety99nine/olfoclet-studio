import"./base-6677079c.js";import{E as y,a as x}from"./el-breadcrumb-item-79db1129.js";import{P as f}from"./Pagination-db411aa2.js";import{_ as b}from"./SecondaryButton-278797f8.js";import v from"./CampaignStatusBadge-b7d16f44.js";import{h as w}from"./moment-fbc5633a.js";import{_ as k}from"./_plugin-vue_export-helper-c27b6911.js";import{s as C,e as a,a as e,t as n,b as i,w as l,g as p,f as g,F as P,h as j,x as c,o,y as S}from"./app-027e1c2e.js";import"./icon-346a3fd8.js";import"./index-863250e2.js";const $=C({components:{Pagination:f,CampaignStatusBadge:v,JetSecondaryButton:b},props:{campaign:Object,campaignBatchJobsPayload:Object},data(){return{refreshContentInterval:null,moment:w}},computed:{recurringFrequencyWord(){return this.campaign.recurring_duration==1?this.campaign.recurring_frequency=="Years"?"Year":this.campaign.recurring_frequency=="Months"?"Month":this.campaign.recurring_frequency=="Weeks"?"Week":this.campaign.recurring_frequency=="Days"?"Day":this.campaign.recurring_frequency=="Hours"?"Hour":this.campaign.recurring_frequency=="Minutes"?"Minute":this.campaign.recurring_frequency=="Seconds"?"Second":"":this.campaign.recurring_frequency}},methods:{refreshContent(){this.$inertia.reload()},nagivateToCampaign(t=null){t?this.$inertia.get(route("show.campaign.job.batches",{project:route().params.project,campaign:t.id})):this.$inertia.get(route("show.campaigns",{project:route().params.project}))},goBackToPreviousPage(){window.history.back()},cleanUp(){clearInterval(this.refreshContentInterval),this.refreshContentInterval=null}},created(){this.refreshContentInterval=setInterval(function(){this.refreshContent()}.bind(this),3e3)},unmounted(){this.cleanUp()}}),q={class:"mb-6 gap-4"},B={class:"bg-gray-50 pt-3 pl-6 border-b rounded-t"},I={class:"text-2xl font-semibold leading-6 text-gray-500 mb-4"},T=e("span",{class:"hover:underline hover:text-green-600 text-green-500 font-semibold cursor-pointer"},"Campaigns",-1),E={class:"hover:underline hover:text-green-600 text-green-500 font-semibold cursor-pointer"},N=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 16l-4-4m0 0l4-4m-4 4h18"})],-1),D=e("span",{class:"ml-2"},"Go Back",-1),M={class:"bg-gray-50 border-b pl-6 py-3 rounded-t text-gray-500 text-sm"},F={class:"bg-gray-50 border-b pl-6 py-3 rounded-t text-gray-500 text-sm mb-6"},V={key:0},W=e("span",{class:"text-gray-300 mx-4"},"|",-1),H=e("span",{class:"text-gray-300 mx-4"},"|",-1),O=e("span",{class:"text-gray-400"},"Start: ",-1),U=e("span",{class:"text-gray-300 mx-4"},"|",-1),Y=e("span",{class:"text-gray-400"},"End: ",-1),z={class:"bg-white overflow-hidden shadow-xl sm:rounded-lg"},G={class:"flex flex-col"},L={class:"-my-2 overflow-x-auto sm:-mx-6 lg:-mx-8"},R={class:"py-2 align-middle inline-block min-w-full sm:px-6 lg:px-8"},A={class:"shadow overflow-hidden border-b border-gray-200 sm:rounded-lg"},K={class:"min-w-full divide-y divide-gray-200"},Q=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},[e("span",null,"Name")]),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},[e("span",null,"Status")]),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider bg-indigo-100"},[e("span",null,"Total")]),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider bg-indigo-100"},[e("span",null,"Pending")]),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider bg-indigo-100"},[e("span",null,"Processed")]),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider bg-indigo-100"},[e("span",null,"Progress")]),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},[e("span",null,"Sprint Date")])])],-1),X={class:"bg-white divide-y divide-gray-200"},Z={class:"px-6 py-4 whitespace-nowrap"},J={class:"text-sm text-gray-900"},ee={class:"px-6 py-4"},te={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 text-center bg-indigo-50"},se={class:"text-sm text-gray-900"},ne={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 text-center bg-indigo-50"},ae={class:"text-sm text-gray-900"},oe={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 text-center bg-indigo-50"},re={class:"text-sm text-gray-900"},ie={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 text-center bg-indigo-50"},le={key:0,class:"text-lg text-green-600"},ce={key:1,class:"w-full bg-gray-200 rounded-full"},de={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},pe={key:0},ge=e("td",{colspan:7,class:"px-6 py-4 whitespace-nowrap"},[e("div",{class:"text-center text-gray-900 text-sm p-6"},"No campaign sprints")],-1),me=[ge];function ue(t,r,_e,he,ye,xe){const d=x,m=y,u=c("jet-secondary-button"),_=c("CampaignStatusBadge"),h=c("pagination");return o(),a("div",null,[e("div",q,[e("div",B,[e("div",I,n(t.campaign.name),1),i(m,{separator:">",class:"mb-4"},{default:l(()=>[i(d,{onClick:r[0]||(r[0]=s=>t.nagivateToCampaign())},{default:l(()=>[T]),_:1}),i(d,{onClick:r[1]||(r[1]=s=>t.nagivateToCampaign(t.campaign))},{default:l(()=>[e("span",E,n(t.campaign.name),1)]),_:1})]),_:1}),i(u,{onClick:r[2]||(r[2]=s=>t.goBackToPreviousPage()),class:"py-1 mb-4"},{default:l(()=>[N,D]),_:1})]),e("div",M,[e("span",null,n(t.campaign.description),1)]),e("div",F,[e("span",null,n(t.campaign.schedule_type),1),t.campaign.schedule_type=="Send Recurring"?(o(),a("span",V,[W,e("span",null,"Every "+n(t.campaign.recurring_duration)+" "+n(t.recurringFrequencyWord),1),H,e("span",null,[O,p(n(t.moment(t.campaign.start_datetime).format("lll")),1)]),U,e("span",null,[Y,p(n(t.moment(t.campaign.end_datetime).format("lll")),1)])])):g("",!0)])]),e("div",z,[e("div",G,[e("div",L,[e("div",R,[e("div",A,[e("table",K,[Q,e("tbody",X,[(o(!0),a(P,null,j(t.campaignBatchJobsPayload.data,s=>(o(),a("tr",{key:s.id},[e("td",Z,[e("div",J,n(s.name),1)]),e("td",ee,[i(_,{campaignBatchJob:s},null,8,["campaignBatchJob"])]),e("td",te,[e("div",se,n(s.total_jobs),1)]),e("td",ne,[e("div",ae,n(s.pending_jobs),1)]),e("td",oe,[e("div",re,n(s.processed_jobs),1)]),e("td",ie,[s.progress==100?(o(),a("span",le,n(s.progress)+" "+n(s.progress?"%":""),1)):(o(),a("div",ce,[e("div",{class:"bg-green-600 text-xs font-medium text-blue-100 text-center p-0.5 leading-none rounded-full",style:S("width: "+s.progress+"%")},n(s.progress)+"%",5)]))]),e("td",de,n(s.created_at==null?"...":t.moment(s.created_at).format("lll")),1)]))),128)),t.campaignBatchJobsPayload.data.length==0?(o(),a("tr",pe,me)):g("",!0)])])])])])]),i(h,{class:"mt-6",paginationPayload:t.campaignBatchJobsPayload,updateData:["campaignBatchJobsPayload"]},null,8,["paginationPayload"])])])}const qe=k($,[["render",ue]]);export{qe as default};
