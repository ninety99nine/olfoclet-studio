import g from"./ActiveStatusBadge-33235c88.js";import w from"./ActiveStatusBadge-ea8220bb.js";import b from"./ManageSubscriptionModal-cef77cef.js";import{P as f}from"./Pagination-9a08c685.js";import{q as y,s as i,o,e as r,b as p,a as t,F as _,h as v,f as c,t as a,i as l}from"./app-1a0996f9.js";import{h as k}from"./moment-fbc5633a.js";import{_ as S}from"./_plugin-vue_export-helper-c27b6911.js";/* empty css            */import"./base-d4a8cc75.js";import"./el-radio-d509fb7d.js";import"./constants-e299eaa8.js";import"./icon-f616c2e7.js";import"./el-scrollbar-e18a62f1.js";import"./el-tag-6d0cf1ba.js";import"./index-73c69c87.js";import"./el-popper-d20d1716.js";import"./TextInput-24000092.js";import"./InputLabel-64902c75.js";import"./Textarea-26d89e75.js";import"./PrimaryButton-2d93dae9.js";import"./SelectInput-f6f94617.js";import"./DialogModal-4e9f6323.js";import"./DangerButton-4295d93d.js";import"./ActionMessage-3be083d9.js";import"./SecondaryButton-5bb69dfa.js";const P=y({components:{ManageSubscriptionModal:b,SubscriptionActiveStatusBadge:w,SubscriptionPlanActiveStatusBadge:g,Pagination:f},props:{totalSubscribers:Number,subscriptionPlans:Array,subscriptionsPayload:Object},data(){return{refreshContentInterval:null,isShowingModal:!1,modalAction:null,subscription:null,moment:k}},methods:{onDeleted(){this.subscription=null},refreshContent(){this.$inertia.reload()},showModal(e,n){this.subscription=e,this.modalAction=n,this.isShowingModal=!0},getPercentageOfCoverage(e){return this.totalSubscribers>0?Math.round(e/this.totalSubscribers*100):0},cleanUp(){clearInterval(this.refreshContentInterval),this.refreshContentInterval=null}},created(){this.refreshContentInterval=setInterval(function(){this.refreshContent()}.bind(this),5e3)},unmounted(){this.cleanUp()}}),C={class:"bg-white shadow-xl sm:rounded-lg"},M={class:"flex flex-col overflow-y-auto"},A={class:"align-middle inline-block min-w-full"},B={class:"shadow border-b border-gray-200"},I={class:"min-w-full divide-y divide-gray-200"},D=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-left text-xs font-medium text-gray-500 uppercase tracking-wider border-r border-dotted border-r-teal-300"}),t("th",{scope:"col",colspan:"5",class:"px-6 py-3 whitespace-nowrap text-center text-xs font-medium text-gray-500 uppercase tracking-wider bg-teal-50 border-r border-dotted border-r-fuchsia-300"},[t("div",{class:"font-bold text-teal-500"},"SUBSCRIPTION")]),t("th",{scope:"col",colspan:"6",class:"px-6 py-3 whitespace-nowrap text-center text-xs font-medium text-gray-500 uppercase tracking-wider bg-fuchsia-50"},[t("div",{class:"font-bold text-fuchsia-500"},"SUBSCRIPTION PLAN")]),t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-left text-xs font-medium text-gray-500 uppercase tracking-wider border-r border-dotted border-r-teal-300"})]),t("tr",null,[t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-left text-xs font-medium text-gray-500 uppercase tracking-wider border-r border-dotted border-r-teal-300"},[t("span",null,"Mobile")]),t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-left text-xs font-medium text-gray-500 uppercase tracking-wider bg-teal-50"},[t("span",null,"Start")]),t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-left text-xs font-medium text-gray-500 uppercase tracking-wider bg-teal-50"},[t("span",null,"End")]),t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-left text-xs font-medium text-gray-500 uppercase tracking-wider bg-teal-50"},[t("span",null,"Cancelled")]),t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-left text-xs font-medium text-gray-500 uppercase tracking-wider bg-teal-50"},[t("span",null,"Active")]),t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-left text-xs font-medium text-gray-500 uppercase tracking-wider bg-teal-50 border-r border-dotted border-r-fuchsia-300"},[t("span",null,"Created")]),t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-xs font-medium text-gray-500 uppercase tracking-wider bg-fuchsia-50"},[t("span",null,"Name")]),t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-xs font-medium text-gray-500 uppercase tracking-wider bg-fuchsia-50"},[t("span",null,"Description")]),t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-center text-xs font-medium text-gray-500 uppercase tracking-wider bg-fuchsia-50"},[t("span",null,"Active")]),t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-center text-xs font-medium text-gray-500 uppercase tracking-wider bg-fuchsia-50"},[t("span",null,"Duration")]),t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-center text-xs font-medium text-gray-500 uppercase tracking-wider bg-fuchsia-50"},[t("span",null,"Price")]),t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-left text-xs font-medium text-gray-500 uppercase tracking-wider bg-fuchsia-50"},[t("span",null,"Created")]),t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-xs font-medium text-gray-500 uppercase tracking-wider text-right"},[t("span",null,"Actions")])])],-1),N={class:"bg-white divide-y divide-gray-200"},$={class:"px-6 py-3 whitespace-nowrap text-sm text-gray-500 border-r border-dotted border-r-teal-300"},O={class:"text-sm text-gray-900"},V={class:"px-6 py-3 whitespace-nowrap text-sm text-gray-500 text-left bg-teal-50"},U={class:"px-6 py-3 whitespace-nowrap text-sm text-gray-500 text-left bg-teal-50"},j={class:"px-6 py-3 whitespace-nowrap text-sm text-gray-500 text-left bg-teal-50"},E={class:"px-6 py-3 whitespace-nowrap text-sm text-gray-500 text-center bg-teal-50"},F={class:"px-6 py-3 whitespace-nowrap text-sm text-gray-500 text-left bg-teal-50 border-r border-dotted border-r-fuchsia-300"},L={class:"px-6 py-3 whitespace-nowrap text-sm text-gray-500 text-left bg-fuchsia-50"},R={class:"text-sm text-gray-900"},T={class:"px-6 py-3 whitespace-nowrap text-sm text-gray-500 text-left bg-fuchsia-50"},q={class:"px-6 py-3 whitespace-nowrap text-sm text-gray-500 text-center bg-fuchsia-50"},z={class:"px-6 py-3 whitespace-nowrap text-sm text-gray-500 text-center bg-fuchsia-50"},G={class:"px-6 py-3 whitespace-nowrap text-sm text-gray-500 text-center bg-fuchsia-50"},H={class:"px-6 py-3 whitespace-nowrap text-sm text-gray-500 text-left bg-fuchsia-50"},J={class:"px-6 py-3 whitespace-nowrap text-right text-sm font-medium"},K=["onClick"],Q=["onClick"],W={key:0},X=t("td",{colspan:13,class:"px-6 py-3 whitespace-nowrap"},[t("div",{class:"text-center text-gray-900 text-sm p-6"},"No subscriptions")],-1),Y=[X];function Z(e,n,tt,et,st,at){const d=i("ManageSubscriptionModal"),u=i("SubscriptionActiveStatusBadge"),h=i("SubscriptionPlanActiveStatusBadge"),x=i("pagination");return o(),r("div",null,[p(d,{modelValue:e.isShowingModal,"onUpdate:modelValue":n[0]||(n[0]=s=>e.isShowingModal=s),action:e.modalAction,subscription:e.subscription,subscriptionPlans:e.subscriptionPlans,onOnDeleted:e.onDeleted},null,8,["modelValue","action","subscription","subscriptionPlans","onOnDeleted"]),t("div",C,[t("div",M,[t("div",A,[t("div",B,[t("table",I,[D,t("tbody",N,[(o(!0),r(_,null,v(e.subscriptionsPayload.data,s=>(o(),r("tr",{key:s.id},[t("td",$,[t("div",O,a(s.subscriber.msisdn),1)]),t("td",V,a(e.moment(s.start_at).format("lll")),1),t("td",U,a(e.moment(s.end_at).format("lll")),1),t("td",j,a(s.cancelled_at==null?"...":e.moment(s.cancelled_at).format("lll")),1),t("td",E,[p(u,{subscription:s},null,8,["subscription"])]),t("td",F,a(e.moment(s.created_at).format("lll")),1),t("td",L,[t("div",R,a(s.subscription_plan.name),1)]),t("td",T,a(s.subscription_plan.description==null?"...":s.subscription_plan.description),1),t("td",q,[p(h,{subscriptionPlan:s.subscription_plan},null,8,["subscriptionPlan"])]),t("td",z,a(s.subscription_plan.duration_in_words==null?"...":s.subscription_plan.duration_in_words),1),t("td",G,a(s.subscription_plan.price==null?"...":s.subscription_plan.price.amount_with_currency),1),t("td",H,a(s.subscription_plan.created_at==null?"...":e.moment(s.subscription_plan.created_at).format("lll")),1),t("td",J,[e.$inertia.page.props.projectPermissions.includes("Manage subscriptions")?(o(),r("a",{key:0,href:"#",onClick:l(m=>e.showModal(s,"update"),["prevent"]),class:"text-indigo-600 hover:text-indigo-900 mr-3"},"Edit",8,K)):c("",!0),e.$inertia.page.props.projectPermissions.includes("Manage subscriptions")?(o(),r("a",{key:1,href:"#",onClick:l(m=>e.showModal(s,"delete"),["prevent"]),class:"text-red-600 hover:text-red-900"},"Delete",8,Q)):c("",!0)])]))),128)),e.subscriptionsPayload.data.length==0?(o(),r("tr",W,Y)):c("",!0)])])])])]),p(x,{class:"mt-6",paginationPayload:e.subscriptionsPayload,updateData:["subscriptionsPayload"]},null,8,["paginationPayload"])])])}const Bt=S(P,[["render",Z]]);export{Bt as default};
