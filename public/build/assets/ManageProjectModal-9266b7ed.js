import{s as k,e as o,c as u,w as l,f as c,a as r,b as n,x as d,o as s,g as i,F as p,t as M,i as f,n as h}from"./app-52daf97e.js";import{_ as S,a as $}from"./TextInput-340453d5.js";import{_ as C}from"./InputLabel-e0d033cb.js";import{J as P}from"./Textarea-6872510d.js";import{_ as V}from"./PrimaryButton-0815a80f.js";import{J as T}from"./SelectInput-75f29490.js";import{a as E}from"./DialogModal-75ee8b65.js";import{_ as B}from"./DangerButton-b7383a3a.js";import{_ as D}from"./ActionMessage-380c149f.js";import{_ as J}from"./SecondaryButton-89c7444b.js";import{_ as O}from"./_plugin-vue_export-helper-c27b6911.js";const U=k({components:{JetLabel:C,JetInput:S,JetButton:V,JetTextarea:P,JetInputError:$,JetSelectInput:T,JetDialogModal:E,JetSecondaryButton:J,JetActionMessage:D,JetDangerButton:B},props:{action:{type:String,default:"update"},modelValue:{type:Boolean,default:!1},showAddbutton:{type:Boolean,default:!1},project:{type:Object,default:null},show:{type:Boolean,default:!1}},data(){return{form:null,showModal:this.modelValue,showSuccessMessage:!1,showErrorMessage:!1}},watch:{showModal:{handler:function(e,t){e!=this.modelValue&&this.$emit("update:modelValue",e)}},modelValue:{handler:function(e,t){e!=this.showModal&&(this.showModal=e,this.reset())}}},computed:{hasProject(){return this.project!=null},wantsToUpdate(){return!!(this.hasProject&&this.action=="update")},wantsToDelete(){return!!(this.hasProject&&this.action=="delete")}},methods:{openModal(){this.showModal=!0},closeModal(){this.showModal=!1},create(){var e={preserveState:!0,preserveScroll:!0,replace:!0,onSuccess:t=>{this.handleOnSuccess()},onError:t=>{this.handleOnError()}};this.form.post(route("create.project"),e)},update(){var e={preserveState:!0,preserveScroll:!0,replace:!0,onSuccess:t=>{this.handleOnSuccess()},onError:t=>{this.handleOnError()}};this.form.put(route("update.project",{project:this.project.id}),e)},destroy(){var e={preserveState:!0,preserveScroll:!0,replace:!0,onSuccess:t=>{this.handleOnSuccess()},onError:t=>{this.handleOnError()}};this.form.delete(route("delete.project",{project:this.project.id}),e)},handleOnSuccess(){this.reset(),this.closeModal(),this.showSuccessMessage=!0,setTimeout(()=>{this.showSuccessMessage=!1},3e3)},handleOnError(){this.showErrorMessage=!0,setTimeout(()=>{this.showErrorMessage=!1},3e3)},reset(){this.form=this.$inertia.form({name:this.hasProject?this.project.name:null,description:this.hasProject?this.project.description:null})}},created(){this.reset()}}),A={class:"clear-both"},L={key:0,class:"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded relative mb-6",role:"alert"},N={key:0,class:"font-bold"},z={key:1,class:"font-bold"},I={key:2,class:"font-bold"},F=r("svg",{class:"fill-current h-6 w-6 text-green-500",role:"button",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},[r("title",null,"Close"),r("path",{d:"M14.348 14.849a1.2 1.2 0 0 1-1.697 0L10 11.819l-2.651 3.029a1.2 1.2 0 1 1-1.697-1.697l2.758-3.15-2.759-3.152a1.2 1.2 0 1 1 1.697-1.697L10 8.183l2.651-3.031a1.2 1.2 0 1 1 1.697 1.697l-2.758 3.152 2.758 3.15a1.2 1.2 0 0 1 0 1.698z"})],-1),q=[F],G={key:1,class:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-6",role:"alert"},H={key:0,class:"font-bold"},K={key:1,class:"font-bold"},Q={key:2,class:"font-bold"},R=r("svg",{class:"fill-current h-6 w-6 text-red-500",role:"button",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},[r("title",null,"Close"),r("path",{d:"M14.348 14.849a1.2 1.2 0 0 1-1.697 0L10 11.819l-2.651 3.029a1.2 1.2 0 1 1-1.697-1.697l2.758-3.15-2.759-3.152a1.2 1.2 0 1 1 1.697-1.697L10 8.183l2.651-3.031a1.2 1.2 0 1 1 1.697 1.697l-2.758 3.152 2.758 3.15a1.2 1.2 0 0 1 0 1.698z"})],-1),W=[R],X=r("span",{class:"block mt-6 mb-6"},"Are you sure you want to delete this project?",-1),Y={class:"text-sm text-gray-500"},Z={class:"mb-4"},x={class:"mb-4"};function ee(e,t,te,se,oe,re){const m=d("jet-button"),g=d("jet-label"),b=d("jet-input"),w=d("jet-input-error"),j=d("jet-textarea"),_=d("jet-secondary-button"),y=d("jet-danger-button"),v=d("jet-dialog-modal");return s(),o("div",null,[e.showAddbutton?(s(),u(m,{key:0,onClick:t[0]||(t[0]=a=>e.openModal()),class:"float-right mb-6"},{default:l(()=>[i(" Add Project ")]),_:1})):c("",!0),r("div",A,[e.showSuccessMessage?(s(),o("div",L,[e.wantsToUpdate?(s(),o("strong",N,"Project updated successfully")):e.wantsToDelete?(s(),o("strong",z,"Project deleted successfully")):(s(),o("strong",I,"Project created successfully")),r("span",{onClick:t[1]||(t[1]=a=>e.showSuccessMessage=!1),class:"absolute top-0 bottom-0 right-0 px-4 py-3"},q)])):c("",!0),e.showErrorMessage?(s(),o("div",G,[e.wantsToUpdate?(s(),o("strong",H,"Project update failed")):e.wantsToDelete?(s(),o("strong",K,"Project delete failed")):(s(),o("strong",Q,"Project creation failed")),r("span",{onClick:t[2]||(t[2]=a=>e.showSuccessMessage=!1),class:"absolute top-0 bottom-0 right-0 px-4 py-3"},W)])):c("",!0),n(v,{show:e.showModal,closeable:!1},{title:l(()=>[e.wantsToUpdate?(s(),o(p,{key:0},[i("Update Project")],64)):e.wantsToDelete?(s(),o(p,{key:1},[i("Delete Project")],64)):(s(),o(p,{key:2},[i("Add Project")],64))]),content:l(()=>[e.wantsToDelete?(s(),o(p,{key:0},[X,r("p",Y,M(e.project.name),1)],64)):(s(),o(p,{key:1},[r("div",Z,[n(g,{for:"name",value:"Name"}),n(b,{id:"name",type:"text",class:"mt-1 block w-full",modelValue:e.form.name,"onUpdate:modelValue":t[3]||(t[3]=a=>e.form.name=a)},null,8,["modelValue"]),n(w,{message:e.form.errors.name,class:"mt-2"},null,8,["message"])]),r("div",x,[n(g,{for:"description",value:"Description"}),n(j,{id:"description",class:"mt-1 block w-full",modelValue:e.form.description,"onUpdate:modelValue":t[4]||(t[4]=a=>e.form.description=a)},null,8,["modelValue"]),n(w,{message:e.form.errors.description,class:"mt-2"},null,8,["message"])])],64))]),footer:l(()=>[n(_,{onClick:t[5]||(t[5]=a=>e.closeModal()),class:"mr-2"},{default:l(()=>[i(" Cancel ")]),_:1}),e.hasProject?c("",!0):(s(),u(m,{key:0,onClick:t[6]||(t[6]=f(a=>e.create(),["prevent"])),class:h({"opacity-25":e.form.processing}),disabled:e.form.processing},{default:l(()=>[i(" Create ")]),_:1},8,["class","disabled"])),e.wantsToUpdate?(s(),u(m,{key:1,onClick:t[7]||(t[7]=f(a=>e.update(),["prevent"])),class:h({"opacity-25":e.form.processing}),disabled:e.form.processing},{default:l(()=>[i(" Update ")]),_:1},8,["class","disabled"])):c("",!0),e.wantsToDelete?(s(),u(y,{key:2,onClick:t[8]||(t[8]=f(a=>e.destroy(),["prevent"])),class:h({"opacity-25":e.form.processing}),disabled:e.form.processing},{default:l(()=>[i(" Delete ")]),_:1},8,["class","disabled"])):c("",!0)]),_:1},8,["show"])])])}const ge=O(U,[["render",ee]]);export{ge as default};
