import{h as x}from"./moment-fbc5633a.js";import{s as w,e as o,b as r,a as t,F as y,h as _,f as p,x as c,o as a,t as n,i as l}from"./app-5bb89648.js";import f from"./ActiveStatusBadge-27bd3985.js";import b from"./FolderStatusBadge-71b0189e.js";import{P as v}from"./Pagination-2e08b3d0.js";import k from"./ManageSubscriptionPlanModal-cb7e55a2.js";import{_ as S}from"./_plugin-vue_export-helper-c27b6911.js";/* empty css            */import"./base-c965bbf6.js";import"./el-select-29e649c0.js";import"./el-popover-bcf67893.js";import"./icon-0fd4f662.js";import"./constants-10dd533f.js";import"./index-f74d9013.js";import"./el-switch-e672a57a.js";import"./el-breadcrumb-item-4c55f3d7.js";import"./InputLabel-c6167a2b.js";import"./TextInput-520e81fe.js";import"./Textarea-30ad1ddc.js";import"./PrimaryButton-8f2ab614.js";import"./SelectInput-ffb88178.js";import"./DialogModal-1ac4e177.js";import"./DangerButton-e29447dd.js";import"./SecondaryButton-d3e600d6.js";const P=w({components:{ManageSubscriptionPlanModal:k,Pagination:v,ActiveStatusBadge:f,FolderStatusBadge:b},props:{breadcrumbs:Array,totalSubscriptions:Number,autoBillingReminders:Array,parentSubscriptionPlan:Object,subscriptionPlansPayload:Object},data(){return{moment:x,modalAction:null,isShowingModal:!1,subscriptionPlan:null}},methods:{getPercentageOfCoverage(e){return this.totalSubscriptions>0?Math.round(e/this.totalSubscriptions*100):0},showModal(e,i){this.subscriptionPlan=e,this.modalAction=i,this.isShowingModal=!0}}}),B={class:"bg-white shadow-xl sm:rounded-lg"},C={class:"flex flex-col overflow-y-auto"},M={class:"align-middle inline-block min-w-full"},A={class:"shadow border-b border-gray-200"},$={class:"min-w-full divide-y divide-gray-200"},V=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-xs font-medium text-gray-500 uppercase tracking-wider text-left"},[t("span",null,"Name")]),t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-xs font-medium text-gray-500 uppercase tracking-wider text-left"},[t("span",null,"Description")]),t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-xs font-medium text-gray-500 uppercase tracking-wider text-center"},[t("span",null,"Type")]),t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-xs font-medium text-gray-500 uppercase tracking-wider text-center"},[t("span",null,"Active")]),t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-xs font-medium text-gray-500 uppercase tracking-wider text-center"},[t("span",null,"Duration")]),t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-xs font-medium text-gray-500 uppercase tracking-wider text-center"},[t("span",null,"Price")]),t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-xs font-medium text-gray-500 uppercase tracking-wider text-center"},[t("span",null,"Subscriptions")]),t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-xs font-medium text-gray-500 uppercase tracking-wider text-center"},[t("span",null,"Popularity")]),t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-xs font-medium text-gray-500 uppercase tracking-wider"},[t("span",null,"Created")]),t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-xs font-medium text-gray-500 uppercase tracking-wider text-right"},[t("span",null,"Actions")])])],-1),j={class:"bg-white divide-y divide-gray-200"},N={class:"px-6 py-3 whitespace-nowrap text-left"},D={class:"text-sm text-gray-900"},F={class:"px-6 py-3 whitespace-nowrap text-left"},O={class:"px-6 py-3 whitespace-nowrap text-sm text-gray-500 text-center"},R={class:"px-6 py-3 whitespace-nowrap text-sm text-gray-500 text-center"},E={class:"px-6 py-3 whitespace-nowrap text-sm text-gray-500 text-center"},L={class:"px-6 py-3 whitespace-nowrap text-sm text-gray-500 text-center"},T={class:"px-6 py-3 whitespace-nowrap text-sm text-gray-500 text-center"},U={class:"px-6 py-3 whitespace-nowrap text-sm text-gray-500 text-center"},q={class:"text-lg text-green-600"},z={class:"px-6 py-3 whitespace-nowrap text-sm text-gray-500"},G={class:"px-6 py-3 whitespace-nowrap text-right text-sm font-medium"},H=["onClick"],I=["onClick"],J=["onClick"],K={key:0},Q=t("td",{colspan:10,class:"px-6 py-3 whitespace-nowrap"},[t("div",{class:"text-center text-gray-900 text-sm p-6"},"No subscription plans")],-1),W=[Q];function X(e,i,Y,Z,tt,et){const u=c("manage-subscription-plan-modal"),m=c("FolderStatusBadge"),h=c("ActiveStatusBadge"),g=c("pagination");return a(),o("div",null,[r(u,{modelValue:e.isShowingModal,"onUpdate:modelValue":i[0]||(i[0]=s=>e.isShowingModal=s),action:e.modalAction,subscriptionPlan:e.subscriptionPlan,parentSubscriptionPlan:e.parentSubscriptionPlan,autoBillingReminders:e.autoBillingReminders,breadcrumbs:e.breadcrumbs},null,8,["modelValue","action","subscriptionPlan","parentSubscriptionPlan","autoBillingReminders","breadcrumbs"]),t("div",B,[t("div",C,[t("div",M,[t("div",A,[t("table",$,[V,t("tbody",j,[(a(!0),o(y,null,_(e.subscriptionPlansPayload.data,s=>(a(),o("tr",{key:s.id},[t("td",N,[t("div",D,n(s.name),1)]),t("td",F,n(s.description==null?"...":s.description),1),t("td",O,[r(m,{subscriptionPlan:s},null,8,["subscriptionPlan"])]),t("td",R,[r(h,{subscriptionPlan:s},null,8,["subscriptionPlan"])]),t("td",E,n(s.duration_in_words==null?"...":s.duration_in_words),1),t("td",L,n(s.price==null?"...":s.price.amount_with_currency),1),t("td",T,n(s.subscriptions_count==null?"...":s.subscriptions_count),1),t("td",U,[t("span",q,n(e.getPercentageOfCoverage(s.subscriptions_count))+"%",1)]),t("td",z,n(s.created_at==null?"...":e.moment(s.created_at).fromNow()),1),t("td",G,[e.$inertia.page.props.projectPermissions.includes("View subscription plans")&&s.is_folder?(a(),o("a",{key:0,href:"#",onClick:l(d=>e.$inertia.get(e.route("show.subscription.plan",{project:e.route().params.project,subscription_plan:s.id})),["prevent"]),class:"text-indigo-600 hover:text-indigo-900 mr-3"},"View",8,H)):p("",!0),e.$inertia.page.props.projectPermissions.includes("Manage subscription plans")?(a(),o("a",{key:1,href:"#",onClick:l(d=>e.showModal(s,"update"),["prevent"]),class:"text-indigo-600 hover:text-indigo-900 mr-3"},"Edit",8,I)):p("",!0),e.$inertia.page.props.projectPermissions.includes("Manage subscription plans")?(a(),o("a",{key:2,href:"#",onClick:l(d=>e.showModal(s,"delete"),["prevent"]),class:"text-red-600 hover:text-red-900"},"Delete",8,J)):p("",!0)])]))),128)),e.subscriptionPlansPayload.data.length==0?(a(),o("tr",K,W)):p("",!0)])])])])]),r(g,{class:"mt-6",paginationPayload:e.subscriptionPlansPayload,updateData:["subscriptionPlansPayload"]},null,8,["paginationPayload"])])])}const Bt=S(P,[["render",X]]);export{Bt as default};
