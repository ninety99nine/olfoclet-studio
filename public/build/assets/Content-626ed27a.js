import"./base-560bd877.js";import"./el-popper-111808da.js";import{E as K}from"./el-popover-848e500b.js";import Y from"./SubscriptionStatusBadge-7353f830.js";import{C as Z,a as tt}from"./ManageSubscriberModal-cb834ead.js";import{P as et}from"./Pagination-a57567dc.js";import st from"./BillingStatusBadge-c2d83179.js";import{bT as S,q as nt,s as b,o as n,e as a,b as T,a as e,l as A,bC as at,bB as P,f as B,F as ot,h as rt,t as r,w as $,n as it,c as O,i as I}from"./app-2307de4f.js";import{h as lt}from"./moment-fbc5633a.js";import{_ as ct}from"./_plugin-vue_export-helper-c27b6911.js";import"./icon-cfceea8b.js";import"./constants-24ec7b7a.js";import"./TextInput-54910cf2.js";import"./InputLabel-7bccc036.js";import"./PrimaryButton-13424458.js";import"./SelectInput-41580882.js";import"./DialogModal-716ff8a0.js";import"./DangerButton-1fb7a6d7.js";import"./ActionMessage-387f5d44.js";import"./SecondaryButton-595e01f3.js";/* empty css            */function pt(t){var o=typeof t;return t!=null&&(o=="object"||o=="function")}var V=pt,dt=typeof S=="object"&&S&&S.Object===Object&&S,ut=dt,gt=ut,ht=typeof self=="object"&&self&&self.Object===Object&&self,xt=gt||ht||Function("return this")(),Q=xt,mt=Q,_t=function(){return mt.Date.now()},ft=_t,yt=/\s/;function wt(t){for(var o=t.length;o--&&yt.test(t.charAt(o)););return o}var bt=wt,vt=bt,kt=/^\s+/;function St(t){return t&&t.slice(0,vt(t)+1).replace(kt,"")}var Tt=St,Bt=Q,Lt=Bt.Symbol,W=Lt,F=W,z=Object.prototype,At=z.hasOwnProperty,Ot=z.toString,v=F?F.toStringTag:void 0;function Mt(t){var o=At.call(t,v),c=t[v];try{t[v]=void 0;var p=!0}catch{}var u=Ot.call(t);return p&&(o?t[v]=c:delete t[v]),u}var Ct=Mt,Ut=Object.prototype,jt=Ut.toString;function Pt(t){return jt.call(t)}var $t=Pt,E=W,It=Ct,Ft=$t,Et="[object Null]",Nt="[object Undefined]",N=E?E.toStringTag:void 0;function Dt(t){return t==null?t===void 0?Nt:Et:N&&N in Object(t)?It(t):Ft(t)}var Gt=Dt;function Rt(t){return t!=null&&typeof t=="object"}var Vt=Rt,Qt=Gt,Wt=Vt,zt="[object Symbol]";function Ht(t){return typeof t=="symbol"||Wt(t)&&Qt(t)==zt}var Jt=Ht,qt=Tt,D=V,Xt=Jt,G=0/0,Kt=/^[-+]0x[0-9a-f]+$/i,Yt=/^0b[01]+$/i,Zt=/^0o[0-7]+$/i,te=parseInt;function ee(t){if(typeof t=="number")return t;if(Xt(t))return G;if(D(t)){var o=typeof t.valueOf=="function"?t.valueOf():t;t=D(o)?o+"":o}if(typeof t!="string")return t===0?t:+t;t=qt(t);var c=Yt.test(t);return c||Zt.test(t)?te(t.slice(2),c?2:8):Kt.test(t)?G:+t}var se=ee,ne=V,M=ft,R=se,ae="Expected a function",oe=Math.max,re=Math.min;function ie(t,o,c){var p,u,_,g,l,d,x=0,f=!1,m=!1,s=!0;if(typeof t!="function")throw new TypeError(ae);o=R(o)||0,ne(c)&&(f=!!c.leading,m="maxWait"in c,_=m?oe(R(c.maxWait)||0,o):_,s="trailing"in c?!!c.trailing:s);function y(i){var h=p,w=u;return p=u=void 0,x=i,g=t.apply(w,h),g}function H(i){return x=i,l=setTimeout(k,o),f?y(i):g}function J(i){var h=i-d,w=i-x,j=o-h;return m?re(j,_-w):j}function C(i){var h=i-d,w=i-x;return d===void 0||h>=o||h<0||m&&w>=_}function k(){var i=M();if(C(i))return U(i);l=setTimeout(k,J(i))}function U(i){return l=void 0,s&&p?y(i):(p=u=void 0,g)}function q(){l!==void 0&&clearTimeout(l),x=0,p=d=u=l=void 0}function X(){return l===void 0?g:U(M())}function L(){var i=M(),h=C(i);if(p=arguments,u=this,d=i,h){if(l===void 0)return H(d);if(m)return clearTimeout(l),l=setTimeout(k,o),y(d)}return l===void 0&&(l=setTimeout(k,o)),g}return L.cancel=q,L.flush=X,L}var le=ie;const ce=nt({components:{ManageSubscriberModal:Z,Pagination:et,SubscriptionStatusBadge:Y,BillingStatusBadge:st,CodeEditor:tt},props:{totalMessages:Number,subscribersPayload:Object},data(){return{refreshContentInterval:null,isShowingModal:!1,modalAction:null,subscriber:null,moment:lt,searchQuery:"",filters:{status:"",billingStatus:""}}},computed:{hasActiveFilters(){return Object.values(this.filters).some(t=>t!=="")||this.searchQuery!==""}},methods:{onDeleted(){this.subscriber=null},refreshContent(){this.$inertia.reload()},getQueryParams(){const t={};return t.msisdn=this.searchQuery,t.status=this.filters.status,t.billingStatus=this.filters.billingStatus,t},applyFilters(){this.$inertia.get(this.$inertia.page.url,this.getQueryParams(),{preserveState:!0,preserveScroll:!0,replace:!0})},clearFilters(){this.searchQuery="",this.filters={status:"",billingStatus:""},this.applyFilters()},getLatestMessage(t){return t.latest_message??{}},getLatestSubscription(t){return t.latest_subscription??{}},getLatestSubscriptionActiveStatus(t){return this.getLatestSubscription(t).is_active},getLatestUserBillingTransaction(t){return t.latest_user_billing_transaction??{}},getLatestAutoBillingTransaction(t){return t.latest_auto_billing_transaction??{}},getPercentageOfSuccessfulUserBilling(t){return t.user_billing_transactions_count>0&&t.successful_user_billing_transactions_count>0?Math.round(t.successful_user_billing_transactions_count/t.user_billing_transactions_count*50):0},getPercentageOfUnsuccessfulUserBilling(t){return t.user_billing_transactions_count>0&&t.unsuccessful_user_billing_transactions_count>0?Math.round(t.unsuccessful_user_billing_transactions_count/t.user_billing_transactions_count*50):0},getPercentageOfSuccessfulAutoBilling(t){return t.auto_billing_transactions_count>0&&t.successful_auto_billing_transactions_count>0?Math.round(t.successful_auto_billing_transactions_count/t.auto_billing_transactions_count*50):0},getPercentageOfUnsuccessfulAutoBilling(t){return t.auto_billing_transactions_count>0&&t.unsuccessful_auto_billing_transactions_count>0?Math.round(t.unsuccessful_auto_billing_transactions_count/t.auto_billing_transactions_count*50):0},getPercentageOfCoverage(t){return this.totalMessages>0?Math.round(t/this.totalMessages*50):0},showModal(t,o){this.subscriber=t,this.modalAction=o,this.isShowingModal=!0},cleanUp(){clearInterval(this.refreshContentInterval),this.refreshContentInterval=null}},created(){this.debouncedSearch=le(this.applyFilters,300),this.refreshContentInterval=setInterval(function(){this.refreshContent()}.bind(this),5e3)},unmounted(){this.cleanUp()}}),pe={class:"bg-white shadow-xl sm:rounded-lg"},de={class:"px-6 py-4 border-b border-gray-200"},ue={class:"flex flex-col sm:flex-row gap-4"},ge={class:"flex-1"},he=e("label",{class:"block text-sm font-medium text-gray-700"},"Search by Mobile Number",-1),xe={class:"flex-1"},me=e("label",{class:"block text-sm font-medium text-gray-700"},"Filters",-1),_e={class:"mt-1 flex flex-wrap gap-2"},fe=e("option",{value:""},"All Statuses",-1),ye=e("option",{value:"active"},"Active",-1),we=e("option",{value:"inactive"},"Inactive",-1),be=[fe,ye,we],ve=e("option",{value:""},"All Billing Statuses",-1),ke=e("option",{value:"successful"},"Successful",-1),Se=e("option",{value:"unsuccessful"},"Unsuccessful",-1),Te=[ve,ke,Se],Be={class:"flex flex-col overflow-y-auto"},Le={class:"align-middle inline-block min-w-full"},Ae={class:"shadow border-b border-gray-200"},Oe={class:"min-w-full divide-y divide-gray-200"},Me=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}),e("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-left text-xs font-medium text-gray-500 uppercase tracking-wider bg-teal-50 border-r border-dotted border-r-teal-300"}),e("th",{scope:"col",colspan:"4",class:"px-6 py-3 whitespace-nowrap text-center text-xs font-medium text-gray-500 uppercase tracking-wider bg-teal-50"},[e("div",{class:"font-bold text-teal-500"},"LAST SUBSCRIPTION")]),e("th",{scope:"col",colspan:"5",class:"px-6 py-3 whitespace-nowrap text-center text-xs font-medium text-gray-500 uppercase tracking-wider bg-fuchsia-50 border-r border-dotted border-r-fuchsia-300"}),e("th",{scope:"col",colspan:"5",class:"px-6 py-3 whitespace-nowrap text-center text-xs font-medium text-gray-500 uppercase tracking-wider bg-fuchsia-50"},[e("div",{class:"font-bold text-fuchsia-500"},"LAST USER BILLING")]),e("th",{scope:"col",colspan:"5",class:"px-6 py-3 whitespace-nowrap text-center text-xs font-medium text-gray-500 uppercase tracking-wider bg-violet-50 border-r border-dotted border-r-violet-300"}),e("th",{scope:"col",colspan:"5",class:"px-6 py-3 whitespace-nowrap text-center text-xs font-medium text-gray-500 uppercase tracking-wider bg-violet-50"},[e("div",{class:"font-bold text-violet-500"},"LAST AUTO BILLING")]),e("th",{scope:"col",colspan:"5",class:"px-6 py-3 whitespace-nowrap text-center text-xs font-medium text-gray-500 uppercase tracking-wider bg-emerald-50 border-r border-dotted border-r-emerald-300"}),e("th",{scope:"col",colspan:"2",class:"px-6 py-3 whitespace-nowrap text-center text-xs font-medium text-gray-500 uppercase tracking-wider bg-emerald-50"},[e("div",{class:"font-bold text-emerald-500"},"LAST MESSAGE")]),e("th",{scope:"col",colspan:"2",class:"px-6 py-3 whitespace-nowrap text-center text-xs font-medium text-gray-500 uppercase tracking-wider"})]),e("tr",null,[e("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},[e("span",null,"Mobile")]),e("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-left text-xs font-medium text-gray-500 uppercase tracking-wider bg-teal-50 border-r border-dotted border-r-teal-300"},[e("span",null,"Total Subscriptions")]),e("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-center text-xs font-medium text-gray-500 uppercase tracking-wider bg-teal-50"},[e("span",null,"Status")]),e("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-center text-xs font-medium text-gray-500 uppercase tracking-wider bg-teal-50"},[e("span",null,"Start At")]),e("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-center text-xs font-medium text-gray-500 uppercase tracking-wider bg-teal-50"},[e("span",null,"End At")]),e("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-center text-xs font-medium text-gray-500 uppercase tracking-wider bg-teal-50"},[e("span",null,"Cancelled")]),e("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-left text-xs font-medium text-gray-500 uppercase tracking-wider bg-fuchsia-50"},[e("span",null,"Total User Billing")]),e("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-left text-xs font-medium text-gray-500 uppercase tracking-wider bg-fuchsia-50"},[e("span",null,"Total Successful")]),e("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-left text-xs font-medium text-gray-500 uppercase tracking-wider bg-fuchsia-50"},[e("span",null,"% Successful")]),e("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-left text-xs font-medium text-gray-500 uppercase tracking-wider bg-fuchsia-50"},[e("span",null,"Total Unsuccessful")]),e("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-left text-xs font-medium text-gray-500 uppercase tracking-wider bg-fuchsia-50 border-r border-dotted border-r-fuchsia-300"},[e("span",null,"% Unsuccessful")]),e("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-center text-xs font-medium text-gray-500 uppercase tracking-wider bg-fuchsia-50"},[e("span",null,"Status")]),e("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-center text-xs font-medium text-gray-500 uppercase tracking-wider bg-fuchsia-50"},[e("span",null,"Amount")]),e("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-center text-xs font-medium text-gray-500 uppercase tracking-wider bg-fuchsia-50"},[e("span",null,"Funds Before Deduction")]),e("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-center text-xs font-medium text-gray-500 uppercase tracking-wider bg-fuchsia-50"},[e("span",null,"Funds After Deduction")]),e("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-center text-xs font-medium text-gray-500 uppercase tracking-wider bg-fuchsia-50"},[e("span",null,"Date")]),e("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-left text-xs font-medium text-gray-500 uppercase tracking-wider bg-violet-50"},[e("span",null,"Total Auto Billing")]),e("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-left text-xs font-medium text-gray-500 uppercase tracking-wider bg-violet-50"},[e("span",null,"Total Successful")]),e("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-left text-xs font-medium text-gray-500 uppercase tracking-wider bg-violet-50"},[e("span",null,"% Successful")]),e("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-left text-xs font-medium text-gray-500 uppercase tracking-wider bg-violet-50"},[e("span",null,"Total Unsuccessful")]),e("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-left text-xs font-medium text-gray-500 uppercase tracking-wider bg-violet-50 border-r border-dotted border-r-violet-300"},[e("span",null,"% Unsuccessful")]),e("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-center text-xs font-medium text-gray-500 uppercase tracking-wider bg-violet-50"},[e("span",null,"Status")]),e("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-center text-xs font-medium text-gray-500 uppercase tracking-wider bg-violet-50"},[e("span",null,"Amount")]),e("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-center text-xs font-medium text-gray-500 uppercase tracking-wider bg-violet-50"},[e("span",null,"Funds Before Deduction")]),e("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-center text-xs font-medium text-gray-500 uppercase tracking-wider bg-violet-50"},[e("span",null,"Funds After Deduction")]),e("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-center text-xs font-medium text-gray-500 uppercase tracking-wider bg-violet-50"},[e("span",null,"Date")]),e("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-center text-xs font-medium text-gray-500 uppercase tracking-wider bg-emerald-50"},[e("span",null,"Total Messages")]),e("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-center text-xs font-medium text-gray-500 uppercase tracking-wider bg-emerald-50"},[e("span",null,"Total As Content")]),e("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-center text-xs font-medium text-gray-500 uppercase tracking-wider bg-emerald-50"},[e("span",null,"Total As Payment Confirmation")]),e("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-center text-xs font-medium text-gray-500 uppercase tracking-wider bg-emerald-50"},[e("span",null,"Total As Auto Billing Reminder")]),e("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-center text-xs font-medium text-gray-500 uppercase tracking-wider bg-emerald-50 border-r border-dotted border-r-emerald-300"},[e("span",null,"% Content Received")]),e("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-center text-xs font-medium text-gray-500 uppercase tracking-wider bg-emerald-50"},[e("span",null,"Content")]),e("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-center text-xs font-medium text-gray-500 uppercase tracking-wider bg-emerald-50"},[e("span",null,"Sent Date")]),e("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-center text-xs font-medium text-gray-500 uppercase tracking-wider"},[e("span",null,"Created")]),e("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},[e("span",null,"Actions")])])],-1),Ce={class:"bg-white divide-y divide-gray-200"},Ue={class:"px-6 py-3 whitespace-nowrap"},je={class:"flex justify-between items-center text-sm text-gray-900"},Pe=e("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z"},null,-1),$e=[Pe],Ie=e("span",null,"Metadata",-1),Fe=e("hr",{class:"my-4"},null,-1),Ee={class:"px-6 py-3 whitespace-nowrap text-sm text-gray-500 text-center bg-teal-50 border-r border-dotted border-r-teal-300"},Ne={key:0},De={key:1},Ge={class:"px-6 py-3 whitespace-nowrap text-sm text-gray-500 text-center bg-teal-50"},Re={key:0},Ve={class:"px-6 py-3 whitespace-nowrap text-sm text-gray-500 text-center bg-teal-50"},Qe={class:"px-6 py-3 whitespace-nowrap text-sm text-gray-500 text-center bg-teal-50"},We={class:"px-6 py-3 whitespace-nowrap text-sm text-gray-500 text-center bg-teal-50"},ze={class:"px-6 py-3 whitespace-nowrap text-sm text-gray-500 text-center bg-fuchsia-50"},He={key:0},Je={key:1},qe={class:"px-6 py-3 whitespace-nowrap text-sm text-gray-500 text-center bg-fuchsia-50"},Xe={key:0},Ke={key:1},Ye={class:"px-6 py-3 whitespace-nowrap text-sm text-gray-500 text-center bg-fuchsia-50"},Ze={key:0},ts={key:1,class:"text-lg text-green-600"},es={class:"px-6 py-3 whitespace-nowrap text-sm text-gray-500 text-center bg-fuchsia-50"},ss={key:0},ns={key:1},as={class:"px-6 py-3 whitespace-nowrap text-sm text-gray-500 text-center bg-fuchsia-50 border-r border-dotted border-r-fuchsia-300"},os={key:0},rs={key:1,class:"text-lg text-yellow-600"},is={class:"px-6 py-3 whitespace-nowrap text-sm text-gray-500 text-center bg-fuchsia-50"},ls={key:0},cs={class:"px-6 py-3 whitespace-nowrap text-md text-gray-500 text-center bg-fuchsia-50 font-bold"},ps={class:"px-6 py-3 whitespace-nowrap text-sm text-gray-500 text-center bg-fuchsia-50"},ds={class:"px-6 py-3 whitespace-nowrap text-sm text-gray-500 text-center bg-fuchsia-50"},us={class:"px-6 py-3 whitespace-nowrap text-sm text-gray-500 text-center bg-fuchsia-50"},gs={class:"px-6 py-3 whitespace-nowrap text-sm text-gray-500 text-center bg-violet-50"},hs={key:0},xs={key:1},ms={class:"px-6 py-3 whitespace-nowrap text-sm text-gray-500 text-center bg-violet-50"},_s={key:0},fs={key:1},ys={class:"px-6 py-3 whitespace-nowrap text-sm text-gray-500 text-center bg-violet-50"},ws={key:0},bs={key:1,class:"text-lg text-green-600"},vs={class:"px-6 py-3 whitespace-nowrap text-sm text-gray-500 text-center bg-violet-50"},ks={key:0},Ss={key:1},Ts={class:"px-6 py-3 whitespace-nowrap text-sm text-gray-500 text-center bg-violet-50 border-r border-dotted border-r-violet-300"},Bs={key:0},Ls={key:1,class:"text-lg text-green-600"},As={class:"px-6 py-3 whitespace-nowrap text-sm text-gray-500 text-center bg-violet-50"},Os={key:0},Ms={class:"px-6 py-3 whitespace-nowrap text-md text-gray-500 text-center bg-violet-50 font-bold"},Cs={class:"px-6 py-3 whitespace-nowrap text-sm text-gray-500 text-center bg-violet-50"},Us={class:"px-6 py-3 whitespace-nowrap text-sm text-gray-500 text-center bg-violet-50"},js={class:"px-6 py-3 whitespace-nowrap text-sm text-gray-500 text-center bg-violet-50"},Ps={class:"px-6 py-3 whitespace-nowrap text-sm text-gray-500 text-center bg-emerald-50"},$s={key:0},Is={key:1},Fs={class:"px-6 py-3 whitespace-nowrap text-sm text-gray-500 text-center bg-emerald-50"},Es={key:0},Ns={key:1},Ds={class:"px-6 py-3 whitespace-nowrap text-sm text-gray-500 text-center bg-emerald-50"},Gs={key:0},Rs={key:1},Vs={class:"px-6 py-3 whitespace-nowrap text-sm text-gray-500 text-center bg-emerald-50"},Qs={key:0},Ws={key:1},zs={class:"px-6 py-3 whitespace-nowrap text-sm text-gray-500 text-center bg-emerald-50 border-r border-dotted border-r-emerald-300"},Hs={key:0},Js={key:1,class:"text-lg text-green-600"},qs={class:"px-6 py-3 whitespace-nowrap text-sm text-gray-500 bg-emerald-50"},Xs={key:0,class:"text-center"},Ks={key:1},Ys={class:"px-6 py-3 whitespace-nowrap text-sm text-gray-500 bg-emerald-50"},Zs={key:0,class:"text-center"},tn={key:1},en={class:"px-6 py-3 whitespace-nowrap text-sm text-gray-500"},sn={class:"px-6 py-3 whitespace-nowrap text-right text-sm font-medium"},nn=["onClick"],an=["onClick"],on={key:0},rn=e("td",{colspan:10,class:"px-6 py-3 whitespace-nowrap"},[e("div",{class:"text-center text-gray-900 text-sm p-6"},"No subscribers")],-1),ln=e("td",{colspan:10,class:"px-6 py-3 whitespace-nowrap"},[e("div",{class:"text-center text-gray-900 text-sm p-6"},"No subscribers")],-1),cn=e("td",{colspan:15,class:"px-6 py-3 whitespace-nowrap"},[e("div",{class:"text-center text-gray-900 text-sm p-6"},"No subscribers")],-1),pn=[rn,ln,cn];function dn(t,o,c,p,u,_){const g=b("ManageSubscriberModal"),l=b("CodeEditor"),d=K,x=b("SubscriptionStatusBadge"),f=b("BillingStatusBadge"),m=b("pagination");return n(),a("div",null,[T(g,{modelValue:t.isShowingModal,"onUpdate:modelValue":o[0]||(o[0]=s=>t.isShowingModal=s),action:t.modalAction,subscriber:t.subscriber,onOnDeleted:t.onDeleted},null,8,["modelValue","action","subscriber","onOnDeleted"]),e("div",pe,[e("div",de,[e("div",ue,[e("div",ge,[he,A(e("input",{"onUpdate:modelValue":o[1]||(o[1]=s=>t.searchQuery=s),onInput:o[2]||(o[2]=(...s)=>t.debouncedSearch&&t.debouncedSearch(...s)),type:"text",placeholder:"Enter mobile number...",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50"},null,544),[[at,t.searchQuery]])]),e("div",xe,[me,e("div",_e,[A(e("select",{"onUpdate:modelValue":o[3]||(o[3]=s=>t.filters.status=s),onChange:o[4]||(o[4]=(...s)=>t.applyFilters&&t.applyFilters(...s)),class:"rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50"},be,544),[[P,t.filters.status]]),A(e("select",{"onUpdate:modelValue":o[5]||(o[5]=s=>t.filters.billingStatus=s),onChange:o[6]||(o[6]=(...s)=>t.applyFilters&&t.applyFilters(...s)),class:"rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50"},Te,544),[[P,t.filters.billingStatus]]),t.hasActiveFilters?(n(),a("button",{key:0,onClick:o[7]||(o[7]=(...s)=>t.clearFilters&&t.clearFilters(...s)),class:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700"}," Clear Filters ")):B("",!0)])])])]),e("div",Be,[e("div",Le,[e("div",Ae,[e("table",Oe,[Me,e("tbody",Ce,[(n(!0),a(ot,null,rt(t.subscribersPayload.data,s=>(n(),a("tr",{key:s.id},[e("td",Ue,[e("div",je,[e("span",null,r(s.msisdn),1),T(d,{width:500},{reference:$(()=>[(n(),a("svg",{xmlns:"http://www.w3.org/2000/svg",class:it([s.metadata==null?"text-gray-300":"text-green-500 font-bold","h-5 w-5 ml-2"]),fill:"none",viewBox:"0 0 24 24",strokeWidth:"{1.5}",stroke:"currentColor"},$e,2))]),default:$(()=>[Ie,Fe,T(l,{value:s.metadata==null?"":JSON.stringify(s.metadata,null,4),languages:[["json","JSON"]],"read-only":!0,"line-nums":!0,"tab-spaces":4,theme:"gradient-dark",header:!1,width:"100%","font-size":"14px"},null,8,["value"])]),_:2},1024)])]),e("td",Ee,[s.subscriptions_count==0?(n(),a("span",Ne,"...")):(n(),a("span",De,r(s.subscriptions_count),1))]),e("td",Ge,[s.latest_subscription==null?(n(),a("span",Re,"...")):(n(),O(x,{key:1,isActive:t.getLatestSubscriptionActiveStatus(s)},null,8,["isActive"]))]),e("td",Ve,r(t.getLatestSubscription(s).start_at==null?"...":t.moment(t.getLatestSubscription(s).start_at).format("lll")),1),e("td",Qe,r(t.getLatestSubscription(s).end_at==null?"...":t.moment(t.getLatestSubscription(s).end_at).format("lll")),1),e("td",We,r(t.getLatestSubscription(s).cancelled_at==null?"...":t.moment(t.getLatestSubscription(s).cancelled_at).format("lll")),1),e("td",ze,[s.user_billing_transactions_count==0?(n(),a("span",He,"...")):(n(),a("span",Je,r(s.user_billing_transactions_count),1))]),e("td",qe,[s.successful_user_billing_transactions_count==0?(n(),a("span",Xe,"...")):(n(),a("span",Ke,r(s.successful_user_billing_transactions_count),1))]),e("td",Ye,[t.getPercentageOfSuccessfulUserBilling(s)==0?(n(),a("span",Ze,"...")):(n(),a("span",ts,r(t.getPercentageOfSuccessfulUserBilling(s))+"%",1))]),e("td",es,[s.unsuccessful_user_billing_transactions_count==0?(n(),a("span",ss,"...")):(n(),a("span",ns,r(s.unsuccessful_user_billing_transactions_count),1))]),e("td",as,[t.getPercentageOfUnsuccessfulUserBilling(s)==0?(n(),a("span",os,"...")):(n(),a("span",rs,r(t.getPercentageOfUnsuccessfulUserBilling(s))+"%",1))]),e("td",is,[s.latest_user_billing_transaction==null?(n(),a("span",ls,"...")):(n(),O(f,{key:1,billingTransaction:t.getLatestUserBillingTransaction(s)},null,8,["billingTransaction"]))]),e("td",cs,r(t.getLatestUserBillingTransaction(s).amount==null?"...":t.getLatestUserBillingTransaction(s).amount.amount_with_currency),1),e("td",ps,r(t.getLatestUserBillingTransaction(s).funds_before_deduction==null?"...":t.getLatestUserBillingTransaction(s).funds_before_deduction.amount_with_currency),1),e("td",ds,r(t.getLatestUserBillingTransaction(s).funds_after_deduction==null?"...":t.getLatestUserBillingTransaction(s).funds_after_deduction.amount_with_currency),1),e("td",us,r(t.getLatestUserBillingTransaction(s).created_at==null?"...":t.moment(t.getLatestUserBillingTransaction(s).created_at).format("lll")),1),e("td",gs,[s.auto_billing_transactions_count==0?(n(),a("span",hs,"...")):(n(),a("span",xs,r(s.auto_billing_transactions_count),1))]),e("td",ms,[s.successful_auto_billing_transactions_count==0?(n(),a("span",_s,"...")):(n(),a("span",fs,r(s.successful_auto_billing_transactions_count),1))]),e("td",ys,[t.getPercentageOfSuccessfulAutoBilling(s)==0?(n(),a("span",ws,"...")):(n(),a("span",bs,r(t.getPercentageOfSuccessfulAutoBilling(s))+"%",1))]),e("td",vs,[s.unsuccessful_auto_billing_transactions_count==0?(n(),a("span",ks,"...")):(n(),a("span",Ss,r(s.unsuccessful_auto_billing_transactions_count),1))]),e("td",Ts,[t.getPercentageOfUnsuccessfulAutoBilling(s)==0?(n(),a("span",Bs,"...")):(n(),a("span",Ls,r(t.getPercentageOfUnsuccessfulAutoBilling(s))+"%",1))]),e("td",As,[s.latest_auto_billing_transaction==null?(n(),a("span",Os,"...")):(n(),O(f,{key:1,billingTransaction:t.getLatestAutoBillingTransaction(s)},null,8,["billingTransaction"]))]),e("td",Ms,r(t.getLatestAutoBillingTransaction(s).amount==null?"...":t.getLatestAutoBillingTransaction(s).amount.amount_without_currency),1),e("td",Cs,r(t.getLatestAutoBillingTransaction(s).funds_before_deduction==null?"...":t.getLatestAutoBillingTransaction(s).funds_before_deduction.amount_without_currency),1),e("td",Us,r(t.getLatestAutoBillingTransaction(s).funds_after_deduction==null?"...":t.getLatestAutoBillingTransaction(s).funds_after_deduction.amount_without_currency),1),e("td",js,r(t.getLatestAutoBillingTransaction(s).created_at==null?"...":t.moment(t.getLatestAutoBillingTransaction(s).created_at).format("lll")),1),e("td",Ps,[s.messages_count==0?(n(),a("span",$s,"...")):(n(),a("span",Is,r(s.messages_count),1))]),e("td",Fs,[s.messages_as_content_count==0?(n(),a("span",Es,"...")):(n(),a("span",Ns,r(s.messages_as_content_count),1))]),e("td",Ds,[s.messages_as_payment_confirmation_count==0?(n(),a("span",Gs,"...")):(n(),a("span",Rs,r(s.messages_as_payment_confirmation_count),1))]),e("td",Vs,[s.messages_as_auto_billing_reminder_count==0?(n(),a("span",Qs,"...")):(n(),a("span",Ws,r(s.messages_as_auto_billing_reminder_count),1))]),e("td",zs,[t.getPercentageOfCoverage(s.messages_count)==0?(n(),a("span",Hs,"...")):(n(),a("span",Js,r(t.getPercentageOfCoverage(s.messages_count))+"%",1))]),e("td",qs,[t.getLatestMessage(s).content==null?(n(),a("div",Xs,"...")):(n(),a("div",Ks,r(t.getLatestMessage(s).content),1))]),e("td",Ys,[t.getLatestMessage(s).created_at==null?(n(),a("div",Zs,"...")):(n(),a("div",tn,r(t.moment(t.getLatestMessage(s).created_at).format("lll")),1))]),e("td",en,r(s.created_at==null?"...":t.moment(s.created_at).format("lll")),1),e("td",sn,[t.$inertia.page.props.projectPermissions.includes("Manage subscribers")?(n(),a("a",{key:0,href:"#",onClick:I(y=>t.showModal(s,"update"),["prevent"]),class:"text-indigo-600 hover:text-indigo-900 mr-3"},"Edit",8,nn)):B("",!0),t.$inertia.page.props.projectPermissions.includes("Manage subscribers")?(n(),a("a",{key:1,href:"#",onClick:I(y=>t.showModal(s,"delete"),["prevent"]),class:"text-red-600 hover:text-red-900"},"Delete",8,an)):B("",!0)])]))),128)),t.subscribersPayload.data.length==0?(n(),a("tr",on,pn)):B("",!0)])])])])]),T(m,{class:"mt-6",paginationPayload:t.subscribersPayload,updateData:["subscribersPayload"]},null,8,["paginationPayload"])])])}const jn=ct(ce,[["render",dn]]);export{jn as default};
