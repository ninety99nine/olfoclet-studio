import g from"./ActiveStatusBadge-27bd3985.js";import w from"./ActiveStatusBadge-2acd4bfa.js";import b from"./ManageSubscriptionModal-e0d871fd.js";import{P as f}from"./Pagination-2e08b3d0.js";import{s as y,e as o,b as i,a as t,F as _,h as v,f as c,x as p,o as r,t as a,i as l}from"./app-5bb89648.js";import{h as k}from"./moment-fbc5633a.js";import{_ as S}from"./_plugin-vue_export-helper-c27b6911.js";/* empty css            */import"./TextInput-520e81fe.js";import"./InputLabel-c6167a2b.js";import"./Textarea-30ad1ddc.js";import"./PrimaryButton-8f2ab614.js";import"./SelectInput-ffb88178.js";import"./DialogModal-1ac4e177.js";import"./DangerButton-e29447dd.js";import"./ActionMessage-6bee4251.js";import"./SecondaryButton-d3e600d6.js";const P=y({components:{ManageSubscriptionModal:b,SubscriptionActiveStatusBadge:w,SubscriptionPlanActiveStatusBadge:g,Pagination:f},props:{totalSubscribers:Number,subscriptionPlans:Array,subscriptionsPayload:Object},data(){return{refreshContentInterval:null,isShowingModal:!1,modalAction:null,subscription:null,moment:k}},methods:{refreshContent(){this.$inertia.reload()},showModal(s,n){this.subscription=s,this.modalAction=n,this.isShowingModal=!0},getPercentageOfCoverage(s){return this.totalSubscribers>0?Math.round(s/this.totalSubscribers*100):0},cleanUp(){clearInterval(this.refreshContentInterval),this.refreshContentInterval=null}},created(){this.refreshContentInterval=setInterval(function(){this.refreshContent()}.bind(this),5e3)},unmounted(){this.cleanUp()}}),C={class:"bg-white shadow-xl sm:rounded-lg"},M={class:"flex flex-col overflow-y-auto"},A={class:"align-middle inline-block min-w-full"},B={class:"shadow border-b border-gray-200"},I={class:"min-w-full divide-y divide-gray-200"},N=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-left text-xs font-medium text-gray-500 uppercase tracking-wider border-r border-dotted border-r-teal-300"}),t("th",{scope:"col",colspan:"5",class:"px-6 py-3 whitespace-nowrap text-center text-xs font-medium text-gray-500 uppercase tracking-wider bg-teal-50 border-r border-dotted border-r-fuchsia-300"},[t("div",{class:"font-bold text-teal-500"},"SUBSCRIPTION")]),t("th",{scope:"col",colspan:"6",class:"px-6 py-3 whitespace-nowrap text-center text-xs font-medium text-gray-500 uppercase tracking-wider bg-fuchsia-50"},[t("div",{class:"font-bold text-fuchsia-500"},"SUBSCRIPTION PLAN")]),t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-left text-xs font-medium text-gray-500 uppercase tracking-wider border-r border-dotted border-r-teal-300"})]),t("tr",null,[t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-left text-xs font-medium text-gray-500 uppercase tracking-wider border-r border-dotted border-r-teal-300"},[t("span",null,"Mobile")]),t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-left text-xs font-medium text-gray-500 uppercase tracking-wider bg-teal-50"},[t("span",null,"Start")]),t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-left text-xs font-medium text-gray-500 uppercase tracking-wider bg-teal-50"},[t("span",null,"End")]),t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-left text-xs font-medium text-gray-500 uppercase tracking-wider bg-teal-50"},[t("span",null,"Cancelled")]),t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-left text-xs font-medium text-gray-500 uppercase tracking-wider bg-teal-50"},[t("span",null,"Active")]),t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-left text-xs font-medium text-gray-500 uppercase tracking-wider bg-teal-50 border-r border-dotted border-r-fuchsia-300"},[t("span",null,"Created")]),t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-xs font-medium text-gray-500 uppercase tracking-wider bg-fuchsia-50"},[t("span",null,"Name")]),t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-xs font-medium text-gray-500 uppercase tracking-wider bg-fuchsia-50"},[t("span",null,"Description")]),t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-center text-xs font-medium text-gray-500 uppercase tracking-wider bg-fuchsia-50"},[t("span",null,"Active")]),t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-center text-xs font-medium text-gray-500 uppercase tracking-wider bg-fuchsia-50"},[t("span",null,"Duration")]),t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-center text-xs font-medium text-gray-500 uppercase tracking-wider bg-fuchsia-50"},[t("span",null,"Price")]),t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-left text-xs font-medium text-gray-500 uppercase tracking-wider bg-fuchsia-50"},[t("span",null,"Created")]),t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-xs font-medium text-gray-500 uppercase tracking-wider text-right"},[t("span",null,"Actions")])])],-1),$={class:"bg-white divide-y divide-gray-200"},V={class:"px-6 py-3 whitespace-nowrap text-sm text-gray-500 border-r border-dotted border-r-teal-300"},D={class:"text-sm text-gray-900"},U={class:"px-6 py-3 whitespace-nowrap text-sm text-gray-500 text-left bg-teal-50"},O={class:"px-6 py-3 whitespace-nowrap text-sm text-gray-500 text-left bg-teal-50"},j={class:"px-6 py-3 whitespace-nowrap text-sm text-gray-500 text-left bg-teal-50"},E={class:"px-6 py-3 whitespace-nowrap text-sm text-gray-500 text-center bg-teal-50"},F={class:"px-6 py-3 whitespace-nowrap text-sm text-gray-500 text-left bg-teal-50 border-r border-dotted border-r-fuchsia-300"},L={class:"px-6 py-3 whitespace-nowrap text-sm text-gray-500 text-left bg-fuchsia-50"},R={class:"text-sm text-gray-900"},T={class:"px-6 py-3 whitespace-nowrap text-sm text-gray-500 text-left bg-fuchsia-50"},q={class:"px-6 py-3 whitespace-nowrap text-sm text-gray-500 text-center bg-fuchsia-50"},z={class:"px-6 py-3 whitespace-nowrap text-sm text-gray-500 text-center bg-fuchsia-50"},G={class:"px-6 py-3 whitespace-nowrap text-sm text-gray-500 text-center bg-fuchsia-50"},H={class:"px-6 py-3 whitespace-nowrap text-sm text-gray-500 text-left bg-fuchsia-50"},J={class:"px-6 py-3 whitespace-nowrap text-right text-sm font-medium"},K=["onClick"],Q=["onClick"],W={key:0},X=t("td",{colspan:8,class:"px-6 py-3 whitespace-nowrap"},[t("div",{class:"text-center text-gray-900 text-sm p-6"},"No subscriptions")],-1),Y=[X];function Z(s,n,tt,et,st,at){const d=p("ManageSubscriptionModal"),u=p("SubscriptionActiveStatusBadge"),x=p("SubscriptionPlanActiveStatusBadge"),h=p("pagination");return r(),o("div",null,[i(d,{modelValue:s.isShowingModal,"onUpdate:modelValue":n[0]||(n[0]=e=>s.isShowingModal=e),action:s.modalAction,subscription:s.subscription,subscriptionPlans:s.subscriptionPlans},null,8,["modelValue","action","subscription","subscriptionPlans"]),t("div",C,[t("div",M,[t("div",A,[t("div",B,[t("table",I,[N,t("tbody",$,[(r(!0),o(_,null,v(s.subscriptionsPayload.data,e=>(r(),o("tr",{key:e.id},[t("td",V,[t("div",D,a(e.subscriber.msisdn),1)]),t("td",U,a(s.moment(e.start_at).format("lll")),1),t("td",O,a(s.moment(e.end_at).format("lll")),1),t("td",j,a(e.cancelled_at==null?"...":s.moment(e.cancelled_at).format("lll")),1),t("td",E,[i(u,{subscription:e},null,8,["subscription"])]),t("td",F,a(s.moment(e.created_at).format("lll")),1),t("td",L,[t("div",R,a(e.subscription_plan.name),1)]),t("td",T,a(e.subscription_plan.description==null?"...":e.subscription_plan.description),1),t("td",q,[i(x,{subscriptionPlan:e.subscription_plan},null,8,["subscriptionPlan"])]),t("td",z,a(e.subscription_plan.duration_in_words==null?"...":e.subscription_plan.duration_in_words),1),t("td",G,a(e.subscription_plan.price==null?"...":e.subscription_plan.price.amount_with_currency),1),t("td",H,a(e.subscription_plan.created_at==null?"...":s.moment(e.subscription_plan.created_at).format("lll")),1),t("td",J,[s.$inertia.page.props.projectPermissions.includes("Manage subscriptions")?(r(),o("a",{key:0,href:"#",onClick:l(m=>s.showModal(e,"update"),["prevent"]),class:"text-indigo-600 hover:text-indigo-900 mr-3"},"Edit",8,K)):c("",!0),s.$inertia.page.props.projectPermissions.includes("Manage subscriptions")?(r(),o("a",{key:1,href:"#",onClick:l(m=>s.showModal(e,"delete"),["prevent"]),class:"text-red-600 hover:text-red-900"},"Delete",8,Q)):c("",!0)])]))),128)),s.subscriptionsPayload.data.length==0?(r(),o("tr",W,Y)):c("",!0)])])])])]),i(h,{class:"mt-6",paginationPayload:s.subscriptionsPayload,updateData:["subscriptionsPayload"]},null,8,["paginationPayload"])])])}const _t=S(P,[["render",Z]]);export{_t as default};
