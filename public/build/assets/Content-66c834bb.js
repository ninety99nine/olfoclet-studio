import"./base-3ecad56a.js";import{a as w}from"./el-button-5cc72afb.js";import f from"./ManageSubscriptionPlanModal-75be7f32.js";import{P as b}from"./Pagination-54faa811.js";import{s as v,e as n,b as l,a as t,F as d,h as m,f as c,x as u,o,t as i,c as k,w as P,g as C,i as x}from"./app-8047a45c.js";import{h as M}from"./moment-fbc5633a.js";import{_ as S}from"./_plugin-vue_export-helper-c27b6911.js";import"./isNil-737ab91a.js";import"./icon-be9b5ac7.js";import"./index-d2e11550.js";import"./use-form-item-1833bed3.js";import"./constants-7259abfc.js";import"./TextInput-bc6cbde4.js";import"./InputLabel-22fd5c5c.js";import"./Textarea-93bc0975.js";import"./PrimaryButton-8efc2419.js";import"./SelectInput-b01ea32e.js";import"./DialogModal-0a229599.js";import"./DangerButton-569cea3a.js";import"./ActionMessage-cac46d31.js";import"./SecondaryButton-bd238173.js";const N=v({components:{ManageSubscriptionPlanModal:f,Pagination:b},props:{totalSubscriptions:Number,subscriptionPlansPayload:Object},data(){return{subscriptionPlan:null,isShowingModal:!1,modalAction:null,moment:M}},methods:{getDuration(e){let a=e.duration,r=e.frequency;return a==1&&(r=r.slice(0,-1)),a+" "+r},showModal(e,a){this.subscriptionPlan=e,this.modalAction=a,this.isShowingModal=!0},getPercentageOfCoverage(e){return this.totalSubscriptions>0?Math.round(e/this.totalSubscriptions*100):0}}}),$={class:"bg-white overflow-hidden shadow-xl sm:rounded-lg"},V={class:"flex flex-col"},D={class:"-my-2 overflow-x-auto sm:-mx-6 lg:-mx-8"},A={class:"py-2 align-middle inline-block min-w-full sm:px-6 lg:px-8"},B={class:"shadow overflow-hidden border-b border-gray-200 sm:rounded-lg"},j={class:"min-w-full divide-y divide-gray-200"},E=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{scope:"col",class:"px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider"},[t("span",null,"Name")]),t("th",{scope:"col",class:"px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider text-center"},[t("span",null,"Duration")]),t("th",{scope:"col",class:"px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider text-center"},[t("span",null,"Price")]),t("th",{scope:"col",class:"px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider text-center"},[t("span",null,"Categories")]),t("th",{scope:"col",class:"px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider text-center"},[t("span",null,"Subscriptions")]),t("th",{scope:"col",class:"px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider text-center"},[t("span",null,"Popularity")]),t("th",{scope:"col",class:"px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider"},[t("span",null,"Created")]),t("th",{scope:"col",class:"px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider text-right"},[t("span",null,"Actions")])])],-1),O={class:"bg-white divide-y divide-gray-200"},q={class:"px-6 py-4 whitespace-nowrap"},F={class:"text-sm text-gray-900"},T={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 text-center"},L={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 text-center"},U={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 text-center"},z={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 text-center"},G={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 text-center"},H={class:"text-lg text-green-600"},I={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},J={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},K=["onClick"],Q=["onClick"],R={key:0},W=t("td",{colspan:8,class:"px-6 py-4 whitespace-nowrap"},[t("div",{class:"text-center text-gray-900 text-sm p-6"},"No subscription plans")],-1),X=[W];function Y(e,a,r,Z,tt,et){const g=u("manage-subscription-plan-modal"),h=w,y=u("pagination");return o(),n("div",null,[l(g,{modelValue:e.isShowingModal,"onUpdate:modelValue":a[0]||(a[0]=s=>e.isShowingModal=s),action:e.modalAction,subscriptionPlan:e.subscriptionPlan},null,8,["modelValue","action","subscriptionPlan"]),t("div",$,[t("div",V,[t("div",D,[t("div",A,[t("div",B,[t("table",j,[E,t("tbody",O,[(o(!0),n(d,null,m(e.subscriptionPlansPayload.data,s=>(o(),n("tr",{key:s.id},[t("td",q,[t("div",F,i(s.name),1)]),t("td",T,i(e.getDuration(s)),1),t("td",L,i(s.price),1),t("td",U,[(o(!0),n(d,null,m(s.categories,(p,_)=>(o(),k(h,{key:_,class:"mx-1"},{default:P(()=>[C(i(p),1)]),_:2},1024))),128))]),t("td",z,i(s.subscriptions_count),1),t("td",G,[t("span",H,i(e.getPercentageOfCoverage(s.subscriptions_count))+"%",1)]),t("td",I,i(s.created_at==null?"...":e.moment(s.created_at).fromNow()),1),t("td",J,[e.$inertia.page.props.projectPermissions.includes("Manage subscription plans")?(o(),n("a",{key:0,href:"#",onClick:x(p=>e.showModal(s,"update"),["prevent"]),class:"text-indigo-600 hover:text-indigo-900 mr-3"},"Edit",8,K)):c("",!0),e.$inertia.page.props.projectPermissions.includes("Manage subscription plans")?(o(),n("a",{key:1,href:"#",onClick:x(p=>e.showModal(s,"delete"),["prevent"]),class:"text-red-600 hover:text-red-900"},"Delete",8,Q)):c("",!0)])]))),128)),e.subscriptionPlansPayload.data.length==0?(o(),n("tr",R,X)):c("",!0)])])])])])]),l(y,{class:"mt-6",paginationPayload:e.subscriptionPlansPayload,updateData:["subscriptionPlansPayload"]},null,8,["paginationPayload"])])])}const kt=S(N,[["render",Y]]);export{kt as default};
