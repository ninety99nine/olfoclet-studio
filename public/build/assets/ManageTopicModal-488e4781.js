import"./base-c965bbf6.js";import{E as S,a as C}from"./el-breadcrumb-item-4c55f3d7.js";import{s as B,e as r,a as s,t as d,F as c,b as n,w as l,f as i,x as u,o,h as T,c as m,g as p,i as b,n as _}from"./app-5bb89648.js";import{_ as V}from"./InputLabel-c6167a2b.js";import{_ as E,a as D}from"./TextInput-520e81fe.js";import{J}from"./Textarea-30ad1ddc.js";import{_ as O}from"./PrimaryButton-8f2ab614.js";import{J as U}from"./SelectInput-ffb88178.js";import{a as L}from"./DialogModal-1ac4e177.js";import{_ as A}from"./DangerButton-e29447dd.js";import{_ as N}from"./SecondaryButton-d3e600d6.js";import{_ as P}from"./_plugin-vue_export-helper-c27b6911.js";import"./icon-0fd4f662.js";import"./index-f74d9013.js";/* empty css            */const I=B({components:{JetLabel:V,JetInput:E,JetTextarea:J,JetButton:O,JetInputError:D,JetSelectInput:U,JetDialogModal:L,JetSecondaryButton:N,JetDangerButton:A},props:{topic:Object,action:String,parentTopic:Object,modelValue:Boolean,breadcrumbs:Array,showHeader:{type:Boolean,default:!1}},data(){return{form:null,showModal:this.modelValue,showSuccessMessage:!1,showErrorMessage:!1}},watch:{showModal:{handler:function(e,t){e!=this.modelValue&&this.$emit("update:modelValue",e)}},modelValue:{handler:function(e,t){e!=this.showModal&&(this.showModal=e,this.reset())}}},computed:{hasTopic(){return this.topic!=null},wantsToUpdate(){return!!(this.hasTopic&&this.action=="update")},wantsToDelete(){return!!(this.hasTopic&&this.action=="delete")}},methods:{nagivateToTopic(e=null){e?this.$inertia.get(route("show.topic",{project:route().params.project,topic:e.id})):this.$inertia.get(route("show.topics",{project:route().params.project}))},goBackToPreviousPage(){window.history.back()},openModal(){this.showModal=!0},closeModal(){this.showModal=!1},create(){var e={preserveState:!0,preserveScroll:!0,replace:!0,onSuccess:t=>{this.handleOnSuccess()},onError:t=>{this.handleOnError()}};this.form.post(route("create.topic",{project:route().params.project}),e)},update(){var e={preserveState:!0,preserveScroll:!0,replace:!0,onSuccess:t=>{this.handleOnSuccess()},onError:t=>{this.handleOnError()}};this.form.put(route("update.topic",{project:route().params.project,topic:this.topic.id}),e)},destroy(){var e={preserveState:!0,preserveScroll:!0,replace:!0,onSuccess:t=>{this.handleOnSuccess()},onError:t=>{this.handleOnError()}};this.form.delete(route("delete.topic",{project:route().params.project,topic:this.topic.id}),e)},handleOnSuccess(){this.reset(),this.closeModal(),this.showSuccessMessage=!0,setTimeout(()=>{this.showSuccessMessage=!1},3e3)},handleOnError(){this.showErrorMessage=!0,setTimeout(()=>{this.showErrorMessage=!1},3e3)},reset(){this.form=this.$inertia.form({title:this.hasTopic?this.topic.title:null,content:this.hasTopic?this.topic.content:null,parent_id:this.parentTopic?this.parentTopic.id:null})}},created(){this.reset()}}),z={key:0,class:"grid grid-cols-2 mb-6 gap-4"},F={class:"bg-gray-50 pt-4 pl-6 border-b rounded-t"},H={class:"text-2xl font-semibold leading-6 text-gray-500 mb-4"},G=s("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 16l-4-4m0 0l4-4m-4 4h18"})],-1),Y=s("span",{class:"ml-2"},"Go Back",-1),q=s("span",{class:"hover:underline hover:text-green-600 text-green-500 font-semibold cursor-pointer"},"Topics",-1),K={class:"hover:underline hover:text-green-600 text-green-500 font-semibold cursor-pointer"},Q={class:"bg-gray-50 border-b pl-6 py-3 rounded-t text-gray-500 text-sm mb-6"},R=s("span",{class:"font-bold mr-2"},"Api Link:",-1),W={key:0},X={key:1},Z={key:0},x=s("div",{class:"clear-both"},null,-1),ee={key:0,class:"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded relative mb-6 mt-3",role:"alert"},te={key:0,class:"font-bold"},oe={key:1,class:"font-bold"},se={key:2,class:"font-bold"},re=s("svg",{class:"fill-current h-6 w-6 text-green-500",role:"button",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},[s("title",null,"Close"),s("path",{d:"M14.348 14.849a1.2 1.2 0 0 1-1.697 0L10 11.819l-2.651 3.029a1.2 1.2 0 1 1-1.697-1.697l2.758-3.15-2.759-3.152a1.2 1.2 0 1 1 1.697-1.697L10 8.183l2.651-3.031a1.2 1.2 0 1 1 1.697 1.697l-2.758 3.152 2.758 3.15a1.2 1.2 0 0 1 0 1.698z"})],-1),ae=[re],ne={key:1,class:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-6 mt-3",role:"alert"},le={key:0,class:"font-bold"},ie={key:1,class:"font-bold"},pe={key:2,class:"font-bold"},de=s("svg",{class:"fill-current h-6 w-6 text-red-500",role:"button",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},[s("title",null,"Close"),s("path",{d:"M14.348 14.849a1.2 1.2 0 0 1-1.697 0L10 11.819l-2.651 3.029a1.2 1.2 0 1 1-1.697-1.697l2.758-3.15-2.759-3.152a1.2 1.2 0 1 1 1.697-1.697L10 8.183l2.651-3.031a1.2 1.2 0 1 1 1.697 1.697l-2.758 3.152 2.758 3.15a1.2 1.2 0 0 1 0 1.698z"})],-1),ce=[de],ue=s("span",{class:"block mt-6 mb-6"},"Are you sure you want to delete this topic?",-1),me={class:"text-sm text-gray-500"},he={class:"block mt-6 mb-6"},fe={key:0},ge={class:"rounded-lg py-1 px-2 border border-green-400 text-green-500 text-sm"},be={key:1,class:"bg-gray-50 py-3 px-3 mt-6 mb-2"},_e=s("span",{class:"hover:text-green-600 text-green-500 font-semibold"},"Topics",-1),we={class:"text-green-500 font-semibold"},ve={class:"mb-4"},ye={class:"mb-4"};function Te(e,t,ke,je,Me,$e){const w=u("jet-secondary-button"),h=C,v=S,f=u("jet-button"),y=u("jet-label"),k=u("jet-input"),g=u("jet-input-error"),j=u("jet-textarea"),M=u("jet-danger-button"),$=u("jet-dialog-modal");return o(),r("div",null,[e.showHeader?(o(),r("div",z,[s("div",null,[s("div",F,[s("div",H,d(e.parentTopic?e.parentTopic.title:"Topics"),1),e.parentTopic?(o(),r(c,{key:0},[n(w,{onClick:t[0]||(t[0]=a=>e.goBackToPreviousPage()),class:"py-1 mb-4"},{default:l(()=>[G,Y]),_:1}),n(v,{separator:">",class:"mb-4"},{default:l(()=>[n(h,{onClick:t[1]||(t[1]=a=>e.nagivateToTopic())},{default:l(()=>[q]),_:1}),(o(!0),r(c,null,T(e.breadcrumbs,a=>(o(),m(h,{key:a.id,onClick:Se=>e.nagivateToTopic(a)},{default:l(()=>[s("span",K,d(a.title),1)]),_:2},1032,["onClick"]))),128))]),_:1})],64)):i("",!0)]),s("div",Q,[R,e.parentTopic?(o(),r("span",W,d(e.route("api.show.topic",{project:e.route().params.project,topic:e.parentTopic.id,type:"children"})),1)):(o(),r("span",X,d(e.route("api.show.topics",{project:e.route().params.project})),1))])]),e.$inertia.page.props.projectPermissions.includes("Manage topics")?(o(),r("div",Z,[n(f,{onClick:t[2]||(t[2]=a=>e.openModal()),class:"w-fit float-right"},{default:l(()=>[p("Add Topic")]),_:1}),x])):i("",!0)])):i("",!0),s("div",null,[e.showSuccessMessage?(o(),r("div",ee,[e.wantsToUpdate?(o(),r("strong",te,"Topic updated successfully")):e.wantsToDelete?(o(),r("strong",oe,"Topic deleted successfully")):(o(),r("strong",se,"Topic created successfully")),s("span",{onClick:t[3]||(t[3]=a=>e.showSuccessMessage=!1),class:"absolute top-0 bottom-0 right-0 px-4 py-3"},ae)])):i("",!0),e.showErrorMessage?(o(),r("div",ne,[e.wantsToUpdate?(o(),r("strong",le,"Topic update failed")):e.wantsToDelete?(o(),r("strong",ie,"Topic delete failed")):(o(),r("strong",pe,"Topic creation failed")),s("span",{onClick:t[4]||(t[4]=a=>e.showSuccessMessage=!1),class:"absolute top-0 bottom-0 right-0 px-4 py-3"},ce)])):i("",!0),n($,{show:e.showModal,closeable:!1},{title:l(()=>[e.wantsToUpdate?(o(),r(c,{key:0},[p("Update Topic")],64)):e.wantsToDelete?(o(),r(c,{key:1},[p("Delete Topic")],64)):(o(),r(c,{key:2},[p("Add Topic")],64))]),content:l(()=>[e.wantsToDelete?(o(),r(c,{key:0},[ue,s("p",me,d(e.topic.title),1)],64)):(o(),r(c,{key:1},[s("span",he,[e.parentTopic?(o(),r("span",fe,[p(" You are "+d(e.wantsToUpdate?"updating":"adding")+" a topic for ",1),s("span",ge,d(e.parentTopic.title),1)])):i("",!0),e.parentTopic?(o(),r("div",be,[n(v,{separator:">"},{default:l(()=>[n(h,null,{default:l(()=>[_e]),_:1}),(o(!0),r(c,null,T(e.breadcrumbs,a=>(o(),m(h,{key:a.id},{default:l(()=>[s("span",we,d(a.title),1)]),_:2},1024))),128))]),_:1})])):i("",!0)]),s("div",ve,[n(y,{for:"title",value:"Name"}),n(k,{id:"title",type:"text",class:"w-full mt-1 block",modelValue:e.form.title,"onUpdate:modelValue":t[5]||(t[5]=a=>e.form.title=a)},null,8,["modelValue"]),n(g,{message:e.form.errors.title,class:"mt-2"},null,8,["message"])]),s("div",ye,[n(y,{for:"content",value:"Content"}),n(j,{id:"content",class:"w-full mt-1 block",modelValue:e.form.content,"onUpdate:modelValue":t[6]||(t[6]=a=>e.form.content=a)},null,8,["modelValue"]),n(g,{message:e.form.errors.content,class:"mt-2"},null,8,["message"]),n(g,{message:e.form.errors.parent_topic_id,class:"mt-2"},null,8,["message"])])],64))]),footer:l(()=>[n(w,{onClick:t[7]||(t[7]=a=>e.closeModal()),class:"mr-2"},{default:l(()=>[p(" Cancel ")]),_:1}),e.hasTopic?i("",!0):(o(),m(f,{key:0,onClick:t[8]||(t[8]=b(a=>e.create(),["prevent"])),class:_({"opacity-25":e.form.processing}),disabled:e.form.processing},{default:l(()=>[p(" Create ")]),_:1},8,["class","disabled"])),e.wantsToUpdate?(o(),m(f,{key:1,onClick:t[9]||(t[9]=b(a=>e.update(),["prevent"])),class:_({"opacity-25":e.form.processing}),disabled:e.form.processing},{default:l(()=>[p(" Update ")]),_:1},8,["class","disabled"])):i("",!0),e.wantsToDelete?(o(),m(M,{key:2,onClick:t[10]||(t[10]=b(a=>e.destroy(),["prevent"])),class:_({"opacity-25":e.form.processing}),disabled:e.form.processing},{default:l(()=>[p(" Delete ")]),_:1},8,["class","disabled"])):i("",!0)]),_:1},8,["show"])])])}const He=P(I,[["render",Te]]);export{He as default};
