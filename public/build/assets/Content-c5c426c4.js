import"./base-db6931af.js";import{E as f}from"./el-popover-f951fb79.js";import b from"./CampaignCanSendSmsBadge-70c99468.js";import w from"./CampaignStatusBadge-dc6ef6d1.js";import{P as v}from"./Pagination-79fb9666.js";import C from"./ManageCampaignModal-cdfcf05c.js";import{s as k,e as a,b as i,a as t,g as p,w as m,F as S,h as P,f as l,x as c,o as n,t as o,i as d}from"./app-9208801f.js";import{h as j}from"./moment-fbc5633a.js";import{_ as B}from"./_plugin-vue_export-helper-c27b6911.js";import"./icon-83b36fd9.js";import"./constants-a12154ec.js";import"./el-divider-293df02d.js";import"./el-switch-8f8d1042.js";import"./index-eaaf883b.js";import"./TextInput-a95e4996.js";import"./InputLabel-43974353.js";import"./Textarea-066bba27.js";import"./PrimaryButton-5cace0b7.js";import"./SelectInput-42f44530.js";import"./DialogModal-ca88d70a.js";import"./DangerButton-912ccd6f.js";import"./SecondaryButton-2773cdfb.js";const M=k({components:{ManageCampaignModal:C,Pagination:v,CampaignCanSendSmsBadge:b,CampaignStatusBadge:w},props:{contentToSendOptions:Array,scheduleTypeOptions:Array,subscriptionPlans:Array,campaignsPayload:Object,projectPayload:Object},data(){return{refreshContentInterval:null,isShowingModal:!1,modalAction:null,campaign:null,moment:j}},methods:{refreshContent(){this.$inertia.reload()},getLatestCampaignBatchJob(e){return e.latest_campaign_batch_job.length?e.latest_campaign_batch_job[0]:{}},showModal(e,r){this.campaign=e,this.modalAction=r,this.isShowingModal=!0},cleanUp(){clearInterval(this.refreshContentInterval),this.refreshContentInterval=null}},created(){this.refreshContentInterval=setInterval(function(){this.refreshContent()}.bind(this),3e3)},unmounted(){this.cleanUp()}}),L={class:"bg-gray-50 border-b pl-6 py-3 rounded-t text-gray-500 text-sm mb-4 flex items-center"},T={key:0,class:"text-gray-400"},$=t("span",{class:"text-green-500 font-bold"},"Sending messages is enabled",-1),J={key:1,class:"text-gray-400"},O=t("span",{class:"text-red-500 font-bold"},"Sending messages is disabled",-1),V=t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 ml-2",fill:"none",viewBox:"0 0 24 24",strokeWidth:"{1.5}",stroke:"currentColor"},[t("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z"})],-1),A={key:0,class:"break-normal"},I=t("hr",{class:"my-4"},null,-1),N={key:1,class:"break-normal"},D={class:"bg-white overflow-hidden shadow-xl sm:rounded-lg"},E={class:"flex flex-col"},U={class:"-my-2 overflow-x-auto sm:-mx-6 lg:-mx-8"},z={class:"py-2 align-middle inline-block min-w-full sm:px-6 lg:px-8"},F={class:"shadow overflow-hidden border-b border-gray-200 sm:rounded-lg"},Y={class:"min-w-full divide-y divide-gray-200"},H=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},[t("span",null,"Name")]),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},[t("span",null,"Send Messages")]),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},[t("span",null,"Status")]),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},[t("span",null,"Sprints")]),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider bg-indigo-100"},[t("span",null,"Total")]),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider bg-indigo-100"},[t("span",null,"Pending")]),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider bg-indigo-100"},[t("span",null,"Processed")]),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider bg-indigo-100"},[t("span",null,"Progress")]),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},[t("span",null,"Last Sprint Date")]),t("th",{scope:"col",class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},[t("span",null,"Actions")])])],-1),W={class:"bg-white divide-y divide-gray-200"},q={class:"px-6 py-4 whitespace-nowrap"},G={class:"text-sm text-gray-900"},K={class:"px-6 py-4"},Q={class:"px-6 py-4"},R={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 text-center"},X={class:"text-sm text-gray-900"},Z={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 text-center bg-indigo-50"},tt={class:"text-sm text-gray-900"},et={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 text-center bg-indigo-50"},st={class:"text-sm text-gray-900"},at={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 text-center bg-indigo-50"},nt={class:"text-sm text-gray-900"},ot={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 text-center bg-indigo-50"},it={class:"text-lg text-green-600"},rt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},pt={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},lt=["onClick"],ct=["onClick"],dt=["onClick"],gt={key:0},mt=t("td",{colspan:7,class:"px-6 py-4 whitespace-nowrap"},[t("div",{class:"text-center text-gray-900 text-sm p-6"},"No campaigns")],-1),ht=[mt];function ut(e,r,xt,yt,_t,ft){const h=c("manage-campaign-modal"),u=f,x=c("CampaignCanSendSmsBadge"),y=c("CampaignStatusBadge"),_=c("pagination");return n(),a("div",null,[i(h,{modelValue:e.isShowingModal,"onUpdate:modelValue":r[0]||(r[0]=s=>e.isShowingModal=s),action:e.modalAction,campaign:e.campaign,subscriptionPlans:e.subscriptionPlans,contentToSendOptions:e.contentToSendOptions,scheduleTypeOptions:e.scheduleTypeOptions},null,8,["modelValue","action","campaign","subscriptionPlans","contentToSendOptions","scheduleTypeOptions"]),t("div",L,[e.projectPayload.can_send_messages?(n(),a("span",T,[$,p(' — You can turn off "Send messages" in settings (This affects all campaigns)')])):(n(),a("span",J,[O,p(' — You can turn on "Send messages" in settings')])),i(u,{width:400},{reference:m(()=>[V]),default:m(()=>[e.projectPayload.can_send_messages?(n(),a("span",A,[p(` Turning off "Send Messages" from the project settings means that every campaign won't be able to send messages even if the campaign "Send Messages" option is turned on `),I,p(' After turning off "Send Messages" from the project settings, any running campaigns will complete their last sprint before completely stopping to send messages. ')])):(n(),a("span",N,' Turning on "Send Messages" from the project settings means that every campaign will be able to send messages as long as the campaign "Send Messages" option is turned on '))]),_:1})]),t("div",D,[t("div",E,[t("div",U,[t("div",z,[t("div",F,[t("table",Y,[H,t("tbody",W,[(n(!0),a(S,null,P(e.campaignsPayload.data,s=>(n(),a("tr",{key:s.id},[t("td",q,[t("div",G,o(s.name),1)]),t("td",K,[i(x,{campaign:s},null,8,["campaign"])]),t("td",Q,[i(y,{campaignBatchJob:e.getLatestCampaignBatchJob(s)},null,8,["campaignBatchJob"])]),t("td",R,[t("div",X,o(s.campaign_batch_jobs_count),1)]),t("td",Z,[t("div",tt,o(e.getLatestCampaignBatchJob(s).total_jobs),1)]),t("td",et,[t("div",st,o(e.getLatestCampaignBatchJob(s).pending_jobs),1)]),t("td",at,[t("div",nt,o(e.getLatestCampaignBatchJob(s).processed_jobs),1)]),t("td",ot,[t("span",it,o(e.getLatestCampaignBatchJob(s).progress)+" "+o(e.getLatestCampaignBatchJob(s).progress?"%":""),1)]),t("td",rt,o(e.getLatestCampaignBatchJob(s).created_at==null?"...":e.moment(e.getLatestCampaignBatchJob(s).created_at).format("lll")),1),t("td",pt,[e.$inertia.page.props.projectPermissions.includes("View campaigns")?(n(),a("a",{key:0,href:"#",onClick:d(g=>e.$inertia.get(e.route("show.campaign.job.batches",{project:e.route().params.project,campaign:s.id})),["prevent"]),class:"text-indigo-600 hover:text-indigo-900 mr-3"},"View",8,lt)):l("",!0),e.$inertia.page.props.projectPermissions.includes("Manage campaigns")?(n(),a("a",{key:1,href:"#",onClick:d(g=>e.showModal(s,"update"),["prevent"]),class:"text-indigo-600 hover:text-indigo-900 mr-3"},"Edit",8,ct)):l("",!0),e.$inertia.page.props.projectPermissions.includes("Manage campaigns")?(n(),a("a",{key:2,href:"#",onClick:d(g=>e.showModal(s,"delete"),["prevent"]),class:"text-red-600 hover:text-red-900"},"Delete",8,dt)):l("",!0)])]))),128)),e.campaignsPayload.data.length==0?(n(),a("tr",gt,ht)):l("",!0)])])])])])]),i(_,{class:"mt-6",paginationPayload:e.campaignsPayload,updateData:["campaignsPayload"]},null,8,["paginationPayload"])])])}const zt=B(M,[["render",ut]]);export{zt as default};
