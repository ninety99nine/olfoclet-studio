import h from"./ManageSubscriptionModal-9c56baf5.js";import{P as x}from"./Pagination-82ef7ad5.js";import{s as g,e as a,b as l,a as t,F as y,h as f,f as i,x as p,o,t as n,n as _,i as d}from"./app-60cd852f.js";import{h as w}from"./moment-fbc5633a.js";import{_ as b}from"./_plugin-vue_export-helper-c27b6911.js";import"./TextInput-f1c7bf7a.js";import"./InputLabel-7d611d97.js";import"./Textarea-1bcbc324.js";import"./PrimaryButton-866b8f7f.js";import"./SelectInput-9e59669e.js";import"./DialogModal-f1eb62ea.js";import"./DangerButton-b4b573dd.js";import"./ActionMessage-e9efacb5.js";import"./SecondaryButton-34f773dd.js";const v=g({components:{CreateSubscriptionModal:h,Pagination:x},props:{subscriptionPlans:Array,totalSubscribers:Number,subscriptionsPayload:Object},data(){return{refreshContentInterval:null,isShowingModal:!1,modalAction:null,subscription:null,moment:w}},methods:{refreshContent(){this.$inertia.reload()},showModal(e,r){this.subscription=e,this.modalAction=r,this.isShowingModal=!0},getPercentageOfCoverage(e){return this.totalSubscribers>0?Math.round(e/this.totalSubscribers*100):0},cleanUp(){clearInterval(this.refreshContentInterval),this.refreshContentInterval=null}},created(){this.refreshContentInterval=setInterval(function(){this.refreshContent()}.bind(this),3e3)},unmounted(){this.cleanUp()}}),k={class:"bg-white overflow-hidden shadow-xl sm:rounded-lg"},C={class:"flex flex-col"},P={class:"-my-2 overflow-x-auto sm:-mx-6 lg:-mx-8"},M={class:"py-2 align-middle inline-block min-w-full sm:px-6 lg:px-8"},S={class:"shadow overflow-hidden border-b border-gray-200 sm:rounded-lg"},$={class:"min-w-full divide-y divide-gray-200"},A=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},[t("span",null,"Mobile")]),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},[t("span",null,"Start")]),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},[t("span",null,"End")]),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},[t("span",null,"Plan")]),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},[t("span",null,"Status")]),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},[t("span",null,"Created")]),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider text-right"},[t("span",null,"Actions")])])],-1),I={class:"bg-white divide-y divide-gray-200"},N={class:"px-6 py-4 whitespace-nowrap"},V={class:"text-sm text-gray-900"},j={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},B={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},D={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},E={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},U={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},F={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},O=["onClick"],z=["onClick"],L={key:0},q=t("td",{colspan:7,class:"px-6 py-4 whitespace-nowrap"},[t("div",{class:"text-center text-gray-900 text-sm p-6"},"No subscriptions")],-1),G=[q];function H(e,r,J,K,Q,R){const c=p("create-subscription-modal"),m=p("pagination");return o(),a("div",null,[l(c,{modelValue:e.isShowingModal,"onUpdate:modelValue":r[0]||(r[0]=s=>e.isShowingModal=s),action:e.modalAction,subscription:e.subscription,subscriptionPlans:e.subscriptionPlans},null,8,["modelValue","action","subscription","subscriptionPlans"]),t("div",k,[t("div",C,[t("div",P,[t("div",M,[t("div",S,[t("table",$,[A,t("tbody",I,[(o(!0),a(y,null,f(e.subscriptionsPayload.data,s=>(o(),a("tr",{key:s.id},[t("td",N,[t("div",V,n(s.subscriber?s.subscriber.msisdn:"..."),1)]),t("td",j,n(s.created_at==null?"...":e.moment(s.start_at).format("lll")),1),t("td",B,n(s.created_at==null?"...":e.moment(s.end_at).format("lll")),1),t("td",D,n(s.subscription_plan==null?"...":s.subscription_plan.name),1),t("td",E,[t("span",{class:_(s.status=="Active"?"text-green-600":"text-gray-600")},n(s.status),3)]),t("td",U,n(s.created_at==null?"...":e.moment(s.created_at).fromNow()),1),t("td",F,[e.$inertia.page.props.projectPermissions.includes("Manage subscriptions")?(o(),a("a",{key:0,href:"#",onClick:d(u=>e.showModal(s,"update"),["prevent"]),class:"text-indigo-600 hover:text-indigo-900 mr-3"},"Edit",8,O)):i("",!0),e.$inertia.page.props.projectPermissions.includes("Manage subscriptions")?(o(),a("a",{key:1,href:"#",onClick:d(u=>e.showModal(s,"delete"),["prevent"]),class:"text-red-600 hover:text-red-900"},"Delete",8,z)):i("",!0)])]))),128)),e.subscriptionsPayload.data.length==0?(o(),a("tr",L,G)):i("",!0)])])])])])]),l(m,{class:"mt-6",paginationPayload:e.subscriptionsPayload,updateData:["subscriptionsPayload"]},null,8,["paginationPayload"])])])}const pt=b(v,[["render",H]]);export{pt as default};
