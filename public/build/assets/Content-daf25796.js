import"./base-f8cca5c7.js";import"./el-popper-19ea5ec9.js";import{E as m}from"./el-popover-0c6db3de.js";import x from"./SubscriptionPlanCanAutoBillBadge-7458fff6.js";import _ from"./AutoBillingStatusBadge-38e45d64.js";import{P as b}from"./Pagination-1e0a3b48.js";import{q as y,s as r,o,e as a,a as t,g as i,b as l,w as c,F as f,h as w,f as p,t as n,i as B}from"./app-7ebd1c15.js";import{h as v}from"./moment-fbc5633a.js";import{_ as k}from"./_plugin-vue_export-helper-c27b6911.js";import"./icon-498211d2.js";import"./constants-21d29466.js";/* empty css            */const P=y({components:{Pagination:b,SubscriptionPlanCanAutoBillBadge:x,AutoBillingStatusBadge:_},props:{projectPayload:Object,autoBillingSubscriptionPlansPayload:Object},data(){return{refreshContentInterval:null,subscriptionPlan:null,moment:v}},methods:{refreshContent(){this.$inertia.reload()},getLatestSubscriptionPlanBatchJob(e){return e.latest_auto_billing_job_batch.length?e.latest_auto_billing_job_batch[0]:{}},cleanUp(){clearInterval(this.refreshContentInterval),this.refreshContentInterval=null}},created(){this.refreshContentInterval=setInterval(function(){this.refreshContent()}.bind(this),5e3)},unmounted(){this.cleanUp()}}),S={class:"bg-gray-50 border-b px-6 py-4 rounded-t text-gray-500 text-sm mb-4"},j=t("div",{class:"text-2xl font-semibold leading-6 text-gray-500 border-b pb-4 mb-4"},"Auto Billing",-1),A={class:"flex items-center"},C={key:0,class:"text-gray-400"},L=t("span",{class:"text-green-500 font-bold"},"Auto Billing is enabled",-1),J={key:1,class:"text-gray-400"},$=t("span",{class:"text-red-500 font-bold"},"Auto Billing is disabled",-1),V=t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 ml-2",fill:"none",viewBox:"0 0 24 24",strokeWidth:"{1.5}",stroke:"currentColor"},[t("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z"})],-1),I={key:0,class:"break-normal"},N=t("hr",{class:"my-4"},null,-1),T={key:1,class:"break-normal"},D={class:"bg-white shadow-xl sm:rounded-lg"},E={class:"flex flex-col overflow-y-auto"},M={class:"align-middle inline-block min-w-full"},z={class:"shadow border-b border-gray-200"},F={class:"min-w-full divide-y divide-gray-200"},O=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},[t("span",null,"Name")]),t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},[t("span",null,"Auto Bill")]),t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},[t("span",null,"Status")]),t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},[t("span",null,"Sprints")]),t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-left text-xs font-medium text-gray-500 uppercase tracking-wider bg-indigo-100"},[t("span",null,"Total")]),t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-left text-xs font-medium text-gray-500 uppercase tracking-wider bg-indigo-100"},[t("span",null,"Pending")]),t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-left text-xs font-medium text-gray-500 uppercase tracking-wider bg-indigo-100"},[t("span",null,"Processed")]),t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-left text-xs font-medium text-gray-500 uppercase tracking-wider bg-indigo-100"},[t("span",null,"Progress")]),t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},[t("span",null,"Last Sprint Date")]),t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},[t("span",null,"Actions")])])],-1),U={class:"bg-white divide-y divide-gray-200"},Y={class:"px-6 py-3 whitespace-nowrap"},q={class:"text-sm text-gray-900"},H={class:"px-6 py-3"},W={class:"px-6 py-3"},G={class:"px-6 py-3 whitespace-nowrap text-sm text-gray-500 text-center"},K={class:"text-sm text-gray-900"},Q={class:"px-6 py-3 whitespace-nowrap text-sm text-gray-500 text-center bg-indigo-50"},R={class:"text-sm text-gray-900"},X={class:"px-6 py-3 whitespace-nowrap text-sm text-gray-500 text-center bg-indigo-50"},Z={class:"text-sm text-gray-900"},tt={class:"px-6 py-3 whitespace-nowrap text-sm text-gray-500 text-center bg-indigo-50"},et={class:"text-sm text-gray-900"},st={class:"px-6 py-3 whitespace-nowrap text-sm text-gray-500 text-center bg-indigo-50"},ot={class:"text-lg text-green-600"},at={class:"px-6 py-3 whitespace-nowrap text-sm text-gray-500"},nt={class:"px-6 py-3 whitespace-nowrap text-right text-sm font-medium"},it=["onClick"],lt={key:0},rt=t("td",{colspan:10,class:"px-6 py-3 whitespace-nowrap"},[t("div",{class:"text-center text-gray-900 text-sm p-6"},"No subscription plans")],-1),ct=[rt];function pt(e,dt,gt,ut,ht,mt){const d=m,g=r("SubscriptionPlanCanAutoBillBadge"),u=r("AutoBillingStatusBadge"),h=r("pagination");return o(),a("div",null,[t("div",S,[j,t("div",A,[e.projectPayload.can_auto_bill?(o(),a("span",C,[L,i(' — You can turn off "Auto Billing" in settings (This affects all subscription plans)')])):(o(),a("span",J,[$,i(' — You can turn on "Auto Billing" in settings')])),l(d,{width:400},{reference:c(()=>[V]),default:c(()=>[e.projectPayload.can_auto_bill?(o(),a("span",I,[i(` Turning off "Auto Billing" from the project settings means that every subscription plan won't be able to auto bill even if the subscription plan "Auto Billing" option is turned on `),N,i(' After turning off "Auto Billing" from the project settings, any running subscription plans will complete their last sprint before completely stopping to auto bill. ')])):(o(),a("span",T,' Turning on "Auto Billing" from the project settings means that every subscription plan will be able to auto bill as long as the subscription plan "Auto Billing" option is turned on '))]),_:1})])]),t("div",D,[t("div",E,[t("div",M,[t("div",z,[t("table",F,[O,t("tbody",U,[(o(!0),a(f,null,w(e.autoBillingSubscriptionPlansPayload.data,s=>(o(),a("tr",{key:s.id},[t("td",Y,[t("div",q,n(s.name),1)]),t("td",H,[l(g,{subscriptionPlan:s},null,8,["subscriptionPlan"])]),t("td",W,[l(u,{autoBillingSubscriptionPlanJobBatch:e.getLatestSubscriptionPlanBatchJob(s)},null,8,["autoBillingSubscriptionPlanJobBatch"])]),t("td",G,[t("div",K,n(s.auto_billing_job_batches_count),1)]),t("td",Q,[t("div",R,n(e.getLatestSubscriptionPlanBatchJob(s).total_jobs),1)]),t("td",X,[t("div",Z,n(e.getLatestSubscriptionPlanBatchJob(s).pending_jobs),1)]),t("td",tt,[t("div",et,n(e.getLatestSubscriptionPlanBatchJob(s).processed_jobs),1)]),t("td",st,[t("span",ot,n(e.getLatestSubscriptionPlanBatchJob(s).progress)+" "+n(e.getLatestSubscriptionPlanBatchJob(s).progress?"%":""),1)]),t("td",at,n(e.getLatestSubscriptionPlanBatchJob(s).created_at==null?"...":e.moment(e.getLatestSubscriptionPlanBatchJob(s).created_at).format("lll")),1),t("td",nt,[e.$inertia.page.props.projectPermissions.includes("View subscription plans")?(o(),a("a",{key:0,href:"#",onClick:B(xt=>e.$inertia.get(e.route("show.auto.billing.subscription.plan.job.batches",{project:e.route().params.project,subscription_plan:s.id})),["prevent"]),class:"text-indigo-600 hover:text-indigo-900 mr-3"},"View",8,it)):p("",!0)])]))),128)),e.autoBillingSubscriptionPlansPayload.data.length==0?(o(),a("tr",lt,ct)):p("",!0)])])])])]),l(h,{class:"mt-6",paginationPayload:e.autoBillingSubscriptionPlansPayload,updateData:["autoBillingSubscriptionPlansPayload"]},null,8,["paginationPayload"])])])}const Ct=k(P,[["render",pt]]);export{Ct as default};
