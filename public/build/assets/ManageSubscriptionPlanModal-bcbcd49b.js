import{s as k,e as a,a as t,t as w,b as n,w as l,f as d,x as i,o,g as u,F as p,c as b,i as g,n as y}from"./app-9208801f.js";import{_ as j,a as V}from"./TextInput-a95e4996.js";import{_ as P}from"./InputLabel-43974353.js";import{J as $}from"./Textarea-066bba27.js";import{_ as D}from"./PrimaryButton-5cace0b7.js";import{J as C}from"./SelectInput-42f44530.js";import{a as T}from"./DialogModal-ca88d70a.js";import{_ as E}from"./DangerButton-912ccd6f.js";import{_ as B}from"./ActionMessage-4fcbc8f3.js";import{_ as J}from"./SecondaryButton-2773cdfb.js";import{_ as O}from"./_plugin-vue_export-helper-c27b6911.js";const U=k({components:{JetLabel:P,JetInput:j,JetTextarea:$,JetButton:D,JetInputError:V,JetSelectInput:C,JetDialogModal:T,JetSecondaryButton:J,JetActionMessage:B,JetDangerButton:E},props:{action:{type:String,default:"update"},modelValue:{type:Boolean,default:!1},showAddbutton:{type:Boolean,default:!1},subscriptionPlan:{type:Object,default:null},show:{type:Boolean,default:!1}},data(){return{form:null,showModal:this.modelValue,showSuccessMessage:!1,showErrorMessage:!1}},watch:{showModal:{handler:function(e,s){e!=this.modelValue&&this.$emit("update:modelValue",e)}},modelValue:{handler:function(e,s){e!=this.showModal&&(this.showModal=e,this.reset())}}},computed:{hasSubscriptionPlan(){return this.subscriptionPlan!=null},wantsToUpdate(){return!!(this.hasSubscriptionPlan&&this.action=="update")},wantsToDelete(){return!!(this.hasSubscriptionPlan&&this.action=="delete")},frequencyOptions(){return[{name:this.form.duration=="1"?"Second":"Seconds",value:"Seconds"},{name:this.form.duration=="1"?"Minute":"Minutes",value:"Minutes"},{name:this.form.duration=="1"?"Hour":"Hours",value:"Hours"},{name:this.form.duration=="1"?"Day":"Days",value:"Days"},{name:this.form.duration=="1"?"Week":"Weeks",value:"Weeks"},{name:this.form.duration=="1"?"Month":"Months",value:"Months"},{name:this.form.duration=="1"?"Year":"Years",value:"Years"}]}},methods:{openModal(){this.showModal=!0},closeModal(){this.showModal=!1},create(){var e={preserveState:!0,preserveScroll:!0,replace:!0,onSuccess:s=>{this.handleOnSuccess()},onError:s=>{this.handleOnError()}};this.form.post(route("create.subscription.plan",{project:route().params.project}),e)},update(){var e={preserveState:!0,preserveScroll:!0,replace:!0,onSuccess:s=>{this.handleOnSuccess()},onError:s=>{this.handleOnError()}};this.form.put(route("update.subscription.plan",{project:route().params.project,subscription_plan:this.subscriptionPlan.id}),e)},destroy(){var e={preserveState:!0,preserveScroll:!0,replace:!0,onSuccess:s=>{this.handleOnSuccess()},onError:s=>{this.handleOnError()}};this.form.delete(route("delete.subscription.plan",{project:route().params.project,subscription_plan:this.subscriptionPlan.id}),e)},handleOnSuccess(){this.reset(),this.closeModal(),this.showSuccessMessage=!0,setTimeout(()=>{this.showSuccessMessage=!1},3e3)},handleOnError(){this.showErrorMessage=!0,setTimeout(()=>{this.showErrorMessage=!1},3e3)},reset(){this.form=this.$inertia.form({name:this.hasSubscriptionPlan?this.subscriptionPlan.name:null,price:this.hasSubscriptionPlan?this.subscriptionPlan.price:null,duration:this.hasSubscriptionPlan?this.subscriptionPlan.duration:"1",frequency:this.hasSubscriptionPlan?this.subscriptionPlan.frequency:"Days"})}},created(){this.reset()}}),q={key:0,class:"grid grid-cols-2 gap-4"},A={class:"bg-gray-50 pt-3 pl-6 border-b rounded-t"},L={class:"text-sm text-gray-500 my-2"},N=t("span",{class:"font-bold mr-2"},"GET:",-1),z={class:"text-green-500 font-semibold"},H=t("div",{class:"clear-both"},null,-1),I={class:"clear-both"},W={key:0,class:"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded relative mb-6",role:"alert"},Y={key:0,class:"font-bold"},F={key:1,class:"font-bold"},G={key:2,class:"font-bold"},K=t("svg",{class:"fill-current h-6 w-6 text-green-500",role:"button",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},[t("title",null,"Close"),t("path",{d:"M14.348 14.849a1.2 1.2 0 0 1-1.697 0L10 11.819l-2.651 3.029a1.2 1.2 0 1 1-1.697-1.697l2.758-3.15-2.759-3.152a1.2 1.2 0 1 1 1.697-1.697L10 8.183l2.651-3.031a1.2 1.2 0 1 1 1.697 1.697l-2.758 3.152 2.758 3.15a1.2 1.2 0 0 1 0 1.698z"})],-1),Q=[K],R={key:1,class:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-6",role:"alert"},X={key:0,class:"font-bold"},Z={key:1,class:"font-bold"},x={key:2,class:"font-bold"},ee=t("svg",{class:"fill-current h-6 w-6 text-red-500",role:"button",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},[t("title",null,"Close"),t("path",{d:"M14.348 14.849a1.2 1.2 0 0 1-1.697 0L10 11.819l-2.651 3.029a1.2 1.2 0 1 1-1.697-1.697l2.758-3.15-2.759-3.152a1.2 1.2 0 1 1 1.697-1.697L10 8.183l2.651-3.031a1.2 1.2 0 1 1 1.697 1.697l-2.758 3.152 2.758 3.15a1.2 1.2 0 0 1 0 1.698z"})],-1),se=[ee],te=t("span",{class:"block mt-6 mb-6"},"Are you sure you want to delete this subscription plan?",-1),oe={class:"text-sm text-gray-500"},ae={class:"mb-4"},re={class:"grid gap-4 grid-cols-2"},ne={class:"mb-4"},le={class:"mb-4"},ie={class:"mb-4"};function ue(e,s,de,pe,ce,me){const m=i("jet-button"),f=i("jet-label"),h=i("jet-input"),c=i("jet-input-error"),_=i("jet-select-input"),v=i("jet-secondary-button"),S=i("jet-danger-button"),M=i("jet-dialog-modal");return o(),a("div",null,[e.$inertia.page.props.projectPermissions.includes("Manage subscription plans")&&e.showAddbutton?(o(),a("div",q,[t("div",A,[t("div",L,[N,t("span",z,w(e.route("api.show.subscription.plans",{project:e.route().params.project})),1)])]),t("div",null,[n(m,{onClick:s[0]||(s[0]=r=>e.openModal()),class:"float-right w-fit"},{default:l(()=>[u(" Add Subscription Plan ")]),_:1}),H])])):d("",!0),t("div",I,[e.showSuccessMessage?(o(),a("div",W,[e.wantsToUpdate?(o(),a("strong",Y,"Subscription plan updated successfully")):e.wantsToDelete?(o(),a("strong",F,"Subscription plan deleted successfully")):(o(),a("strong",G,"Subscription plan created successfully")),t("span",{onClick:s[1]||(s[1]=r=>e.showSuccessMessage=!1),class:"absolute top-0 bottom-0 right-0 px-4 py-3"},Q)])):d("",!0),e.showErrorMessage?(o(),a("div",R,[e.wantsToUpdate?(o(),a("strong",X,"Subscription plan update failed")):e.wantsToDelete?(o(),a("strong",Z,"Subscription plan delete failed")):(o(),a("strong",x,"Subscription plan creation failed")),t("span",{onClick:s[2]||(s[2]=r=>e.showSuccessMessage=!1),class:"absolute top-0 bottom-0 right-0 px-4 py-3"},se)])):d("",!0),n(M,{show:e.showModal,closeable:!1},{title:l(()=>[e.wantsToUpdate?(o(),a(p,{key:0},[u("Update Subscription plan")],64)):e.wantsToDelete?(o(),a(p,{key:1},[u("Delete Subscription plan")],64)):(o(),a(p,{key:2},[u("Add Subscription plan")],64))]),content:l(()=>[e.wantsToDelete?(o(),a(p,{key:0},[te,t("p",oe,w(e.subscriptionPlan.name),1)],64)):(o(),a(p,{key:1},[t("div",ae,[n(f,{for:"name",value:"Name"}),n(h,{id:"name",type:"text",class:"mt-1 block w-full",modelValue:e.form.name,"onUpdate:modelValue":s[3]||(s[3]=r=>e.form.name=r),placeholder:"Daily @ P95.00"},null,8,["modelValue"]),n(c,{message:e.form.errors.name,class:"mt-2"},null,8,["message"])]),t("div",re,[t("div",ne,[n(f,{for:"duration",value:"Duration"}),n(h,{id:"duration",type:"text",class:"mt-1 block w-full",modelValue:e.form.duration,"onUpdate:modelValue":s[4]||(s[4]=r=>e.form.duration=r),placeholder:"1"},null,8,["modelValue"]),n(c,{message:e.form.errors.duration,class:"mt-2"},null,8,["message"])]),t("div",le,[n(_,{placeholder:"Select frequency",options:e.frequencyOptions,modelValue:e.form.frequency,"onUpdate:modelValue":s[5]||(s[5]=r=>e.form.frequency=r),class:"mt-6"},null,8,["options","modelValue"]),n(c,{message:e.form.errors.frequency,class:"mt-2"},null,8,["message"])])]),t("div",ie,[n(f,{for:"price",value:"Price",class:"mb-1"}),n(h,{id:"price",type:"text",class:"mt-1 block w-full",modelValue:e.form.price,"onUpdate:modelValue":s[6]||(s[6]=r=>e.form.price=r),placeholder:"95.00"},null,8,["modelValue"]),n(c,{message:e.form.errors.price,class:"mt-2"},null,8,["message"])])],64))]),footer:l(()=>[n(v,{onClick:s[7]||(s[7]=r=>e.closeModal()),class:"mr-2"},{default:l(()=>[u(" Cancel ")]),_:1}),e.hasSubscriptionPlan?d("",!0):(o(),b(m,{key:0,onClick:s[8]||(s[8]=g(r=>e.create(),["prevent"])),class:y({"opacity-25":e.form.processing}),disabled:e.form.processing},{default:l(()=>[u(" Create ")]),_:1},8,["class","disabled"])),e.wantsToUpdate?(o(),b(m,{key:1,onClick:s[9]||(s[9]=g(r=>e.update(),["prevent"])),class:y({"opacity-25":e.form.processing}),disabled:e.form.processing},{default:l(()=>[u(" Update ")]),_:1},8,["class","disabled"])):d("",!0),e.wantsToDelete?(o(),b(S,{key:2,onClick:s[10]||(s[10]=g(r=>e.destroy(),["prevent"])),class:y({"opacity-25":e.form.processing}),disabled:e.form.processing},{default:l(()=>[u(" Delete ")]),_:1},8,["class","disabled"])):d("",!0)]),_:1},8,["show"])])])}const je=O(U,[["render",ue]]);export{je as default};
