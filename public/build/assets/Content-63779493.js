import h from"./ManageSubscriptionPlanModal-f1ad68ab.js";import{P as g}from"./Pagination-db411aa2.js";import{s as y,e as a,b as p,a as t,F as _,h as f,f as l,x as c,o as n,t as i,i as d}from"./app-027e1c2e.js";import{h as w}from"./moment-fbc5633a.js";import{_ as b}from"./_plugin-vue_export-helper-c27b6911.js";import"./TextInput-bdb11500.js";import"./InputLabel-7c157838.js";import"./Textarea-54e59ae4.js";import"./PrimaryButton-2445678e.js";import"./SelectInput-3ee201e4.js";import"./DialogModal-55eefbba.js";import"./DangerButton-f2712d63.js";import"./ActionMessage-51c88304.js";import"./SecondaryButton-278797f8.js";const v=y({components:{ManageSubscriptionPlanModal:h,Pagination:g},props:{totalSubscriptions:Number,subscriptionPlansPayload:Object},data(){return{subscriptionPlan:null,isShowingModal:!1,modalAction:null,moment:w}},methods:{getDuration(e){let o=e.duration,r=e.frequency;return o==1&&(r=r.slice(0,-1)),o+" "+r},showModal(e,o){this.subscriptionPlan=e,this.modalAction=o,this.isShowingModal=!0},getPercentageOfCoverage(e){return this.totalSubscriptions>0?Math.round(e/this.totalSubscriptions*100):0}}}),k={class:"bg-white overflow-hidden shadow-xl sm:rounded-lg"},P={class:"flex flex-col"},M={class:"-my-2 overflow-x-auto sm:-mx-6 lg:-mx-8"},C={class:"py-2 align-middle inline-block min-w-full sm:px-6 lg:px-8"},S={class:"shadow overflow-hidden border-b border-gray-200 sm:rounded-lg"},$={class:"min-w-full divide-y divide-gray-200"},N=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},[t("span",null,"Name")]),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider text-center"},[t("span",null,"Duration")]),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider text-center"},[t("span",null,"Price")]),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider text-center"},[t("span",null,"Subscriptions")]),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider text-center"},[t("span",null,"Popularity")]),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},[t("span",null,"Created")]),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider text-right"},[t("span",null,"Actions")])])],-1),D={class:"bg-white divide-y divide-gray-200"},V={class:"px-6 py-4 whitespace-nowrap"},A={class:"text-sm text-gray-900"},j={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 text-center"},B={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 text-center"},O={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 text-center"},q={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 text-center"},E={class:"text-lg text-green-600"},F={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},L={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},U=["onClick"],z=["onClick"],G={key:0},H=t("td",{colspan:8,class:"px-6 py-4 whitespace-nowrap"},[t("div",{class:"text-center text-gray-900 text-sm p-6"},"No subscription plans")],-1),I=[H];function J(e,o,r,K,Q,R){const m=c("manage-subscription-plan-modal"),u=c("pagination");return n(),a("div",null,[p(m,{modelValue:e.isShowingModal,"onUpdate:modelValue":o[0]||(o[0]=s=>e.isShowingModal=s),action:e.modalAction,subscriptionPlan:e.subscriptionPlan},null,8,["modelValue","action","subscriptionPlan"]),t("div",k,[t("div",P,[t("div",M,[t("div",C,[t("div",S,[t("table",$,[N,t("tbody",D,[(n(!0),a(_,null,f(e.subscriptionPlansPayload.data,s=>(n(),a("tr",{key:s.id},[t("td",V,[t("div",A,i(s.name),1)]),t("td",j,i(e.getDuration(s)),1),t("td",B,i(s.price),1),t("td",O,i(s.subscriptions_count),1),t("td",q,[t("span",E,i(e.getPercentageOfCoverage(s.subscriptions_count))+"%",1)]),t("td",F,i(s.created_at==null?"...":e.moment(s.created_at).fromNow()),1),t("td",L,[e.$inertia.page.props.projectPermissions.includes("Manage subscription plans")?(n(),a("a",{key:0,href:"#",onClick:d(x=>e.showModal(s,"update"),["prevent"]),class:"text-indigo-600 hover:text-indigo-900 mr-3"},"Edit",8,U)):l("",!0),e.$inertia.page.props.projectPermissions.includes("Manage subscription plans")?(n(),a("a",{key:1,href:"#",onClick:d(x=>e.showModal(s,"delete"),["prevent"]),class:"text-red-600 hover:text-red-900"},"Delete",8,z)):l("",!0)])]))),128)),e.subscriptionPlansPayload.data.length==0?(n(),a("tr",G,I)):l("",!0)])])])])])]),p(u,{class:"mt-6",paginationPayload:e.subscriptionPlansPayload,updateData:["subscriptionPlansPayload"]},null,8,["paginationPayload"])])])}const pt=b(v,[["render",J]]);export{pt as default};
