import H from"./BillingTransactionStatusBadge-e733ecd8.js";import O from"./CreatedUsingAutoBillingBadge-09d4b33a.js";import V from"./ActiveStatusBadge-e1ed11fc.js";import U from"./RatingTypeBadge-a8928aa7.js";import $ from"./AutoBillingReminderStatusBadge-815a211a.js";import F from"./AutoBillingEnabledStatusBadge-395a0ae9.js";import{P as q}from"./Pagination-1121edc4.js";import{q as E,y as G,s as r,o as n,e as o,a as t,F as Y,h as j,f as p,b as i,t as a,w as z,c as v}from"./app-c4d3ae7d.js";import{h as J}from"./moment-fbc5633a.js";import{_ as K}from"./_plugin-vue_export-helper-c27b6911.js";import"./base-5bd9e4c0.js";import"./el-popper-530fa187.js";import"./icon-0bb4004c.js";import"./constants-817ae69c.js";import"./el-popover-681d6f72.js";/* empty css            *//*! vue-countdown v2.1.2 | (c) 2018-present Chen Fengyuan | MIT */const y=1e3,_=60*y,f=60*_,k=24*f,A="abort",T="end",B="progress",M="start",L="visibilitychange";var Q=E({name:"VueCountdown",props:{autoStart:{type:Boolean,default:!0},emitEvents:{type:Boolean,default:!0},interval:{type:Number,default:1e3,validator:s=>s>=0},now:{type:Function,default:()=>Date.now()},tag:{type:String,default:"span"},time:{type:Number,default:0,validator:s=>s>=0},transform:{type:Function,default:s=>s}},emits:[A,T,B,M],data(){return{counting:!1,endTime:0,totalMilliseconds:0,requestId:0}},computed:{days(){return Math.floor(this.totalMilliseconds/k)},hours(){return Math.floor(this.totalMilliseconds%k/f)},minutes(){return Math.floor(this.totalMilliseconds%f/_)},seconds(){return Math.floor(this.totalMilliseconds%_/y)},milliseconds(){return Math.floor(this.totalMilliseconds%y)},totalDays(){return this.days},totalHours(){return Math.floor(this.totalMilliseconds/f)},totalMinutes(){return Math.floor(this.totalMilliseconds/_)},totalSeconds(){return Math.floor(this.totalMilliseconds/y)}},watch:{$props:{deep:!0,immediate:!0,handler(){this.totalMilliseconds=this.time,this.endTime=this.now()+this.time,this.autoStart&&this.start()}}},mounted(){document.addEventListener(L,this.handleVisibilityChange)},beforeUnmount(){document.removeEventListener(L,this.handleVisibilityChange),this.pause()},methods:{start(){this.counting||(this.counting=!0,this.autoStart||(this.totalMilliseconds=this.time,this.endTime=this.now()+this.time),this.emitEvents&&this.$emit(M),document.visibilityState==="visible"&&this.continue())},continue(){if(!this.counting)return;const s=Math.min(this.totalMilliseconds,this.interval);if(s>0){let x,d;const b=l=>{x||(x=l),d||(d=l);const w=l-x;w>=s||w+(l-d)/2>=s?this.progress():this.requestId=requestAnimationFrame(b),d=l};this.requestId=requestAnimationFrame(b)}else this.end()},pause(){cancelAnimationFrame(this.requestId)},progress(){this.counting&&(this.update(),this.emitEvents&&this.totalMilliseconds>0&&this.$emit(B,{days:this.days,hours:this.hours,minutes:this.minutes,seconds:this.seconds,milliseconds:this.milliseconds,totalDays:this.totalDays,totalHours:this.totalHours,totalMinutes:this.totalMinutes,totalSeconds:this.totalSeconds,totalMilliseconds:this.totalMilliseconds}),this.continue())},abort(){this.counting&&(this.pause(),this.counting=!1,this.emitEvents&&this.$emit(A))},end(){this.counting&&(this.pause(),this.totalMilliseconds=0,this.counting=!1,this.emitEvents&&this.$emit(T))},update(){this.counting&&(this.totalMilliseconds=Math.max(0,this.endTime-this.now()))},restart(){this.pause(),this.totalMilliseconds=this.time,this.endTime=this.now()+this.time,this.counting=!1,this.start()},handleVisibilityChange(){switch(document.visibilityState){case"visible":this.update(),this.continue();break;case"hidden":this.pause();break}}},render(){return G(this.tag,this.$slots.default?[this.$slots.default(this.transform({days:this.days,hours:this.hours,minutes:this.minutes,seconds:this.seconds,milliseconds:this.milliseconds,totalDays:this.totalDays,totalHours:this.totalHours,totalMinutes:this.totalMinutes,totalSeconds:this.totalSeconds,totalMilliseconds:this.totalMilliseconds}))]:void 0)}});const W=E({components:{VueCountdown:Q,SubscriptionPlanActiveStatusBadge:V,AutoBillingReminderStatusBadge:$,AutoBillingEnabledStatusBadge:F,Pagination:q,BillingTransactionStatusBadge:H,RatingTypeBadge:U,CreatedUsingAutoBillingBadge:O},props:{autoBillingSchedulesPayload:Object},data(){return{refreshContentInterval:null,moment:J}},methods:{getLatestAutoBillingTransaction(s){return s.subscriber.latest_auto_billing_transaction??{}},refreshContent(){this.$inertia.reload()},cleanUp(){clearInterval(this.refreshContentInterval),this.refreshContentInterval=null}},created(){this.refreshContentInterval=setInterval(function(){this.refreshContent()}.bind(this),5e3)},unmounted(){this.cleanUp()}}),X=t("div",{class:"grid grid-cols-12 gap-4"},[t("div",{class:"col-span-6"},[t("div",{class:"bg-gray-50 border-b px-6 py-4 rounded-t text-gray-500 text-sm mb-4"},[t("div",{class:"text-2xl font-semibold leading-6 text-gray-500"},"Auto Billing Schedules")])])],-1),Z={class:"bg-white shadow-xl sm:rounded-lg"},tt={class:"flex flex-col overflow-y-auto"},et={class:"align-middle inline-block min-w-full"},st={class:"shadow border-b border-gray-200"},at={class:"min-w-full divide-y divide-gray-200"},nt=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-left text-xs font-medium text-gray-500 uppercase tracking-wider border-r border-dotted border-r-teal-300"}),t("th",{scope:"col",colspan:"7",class:"px-6 py-3 whitespace-nowrap text-center text-xs font-medium text-gray-500 uppercase tracking-wider bg-teal-50 border-r border-dotted border-r-fuchsia-300"},[t("div",{class:"font-bold text-teal-500"},"AUTO BILLING SCHEDULE")]),t("th",{scope:"col",colspan:"8",class:"px-6 py-3 whitespace-nowrap text-center text-xs font-medium text-gray-500 uppercase tracking-wider bg-fuchsia-50 border-r border-dotted border-r-violet-300"},[t("div",{class:"font-bold text-fuchsia-500"},"LAST AUTO BILLING TRANSACTION")]),t("th",{scope:"col",colspan:"6",class:"px-6 py-3 whitespace-nowrap text-center text-xs font-medium text-gray-500 uppercase tracking-wider bg-violet-50 border-r border-dotted border-r-teal-300"},[t("div",{class:"font-bold text-violet-500"},"AUTO BILLING REMINDER")]),t("th",{scope:"col",colspan:"6",class:"px-6 py-3 whitespace-nowrap text-center text-xs font-medium text-gray-500 uppercase tracking-wider bg-teal-50"},[t("div",{class:"font-bold text-teal-500"},"SUBSCRIPTION PLAN")])]),t("tr",null,[t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-left text-xs font-medium text-gray-500 uppercase tracking-wider border-r border-dotted border-r-teal-300"},[t("span",null,"Mobile")]),t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-left text-xs font-medium text-gray-500 uppercase tracking-wider bg-teal-50"},[t("span",null,"Auto Billing Enabled")]),t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-center text-xs font-medium text-gray-500 uppercase tracking-wider bg-teal-50"},[t("span",null,"Next Attempt Date")]),t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-center text-xs font-medium text-gray-500 uppercase tracking-wider bg-teal-50"},[t("span",null,"Countdown")]),t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-center text-xs font-medium text-gray-500 uppercase tracking-wider bg-teal-50"},[t("span",null,"Attempts")]),t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-center text-xs font-medium text-gray-500 uppercase tracking-wider bg-teal-50"},[t("span",null,"Total Successful Attempts")]),t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-center text-xs font-medium text-gray-500 uppercase tracking-wider bg-teal-50"},[t("span",null,"Total Failed Attempts")]),t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-center text-xs font-medium text-gray-500 uppercase tracking-wider bg-teal-50 border-r border-dotted border-r-fuchsia-300"},[t("span",null,"Created Date")]),t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-left text-xs font-medium text-gray-500 uppercase tracking-wider bg-fuchsia-50"},[t("span",null,"Status")]),t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-left text-xs font-medium text-gray-500 uppercase tracking-wider bg-fuchsia-50"},[t("span",null,"Amount")]),t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-center text-xs font-medium text-gray-500 uppercase tracking-wider bg-fuchsia-50"},[t("span",null,"Funds Before Deduction")]),t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-center text-xs font-medium text-gray-500 uppercase tracking-wider bg-fuchsia-50"},[t("span",null,"Funds After Deduction")]),t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-center text-xs font-medium text-gray-500 uppercase tracking-wider bg-fuchsia-50"},[t("span",null,"Rating Type")]),t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-center text-xs font-medium text-gray-500 uppercase tracking-wider bg-fuchsia-50"},[t("span",null,"Auto Billing")]),t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-center text-xs font-medium text-gray-500 uppercase tracking-wider bg-fuchsia-50"},[t("span",null,"Description")]),t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-center text-xs font-medium text-gray-500 uppercase tracking-wider bg-fuchsia-50 border-r border-dotted border-r-violet-300"},[t("span",null,"Created")]),t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-center text-xs font-medium text-gray-500 uppercase tracking-wider bg-violet-50"},[t("span",null,"1 Hour Before")]),t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-center text-xs font-medium text-gray-500 uppercase tracking-wider bg-violet-50"},[t("span",null,"6 Hours Before")]),t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-center text-xs font-medium text-gray-500 uppercase tracking-wider bg-violet-50"},[t("span",null,"12 Hours Before")]),t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-center text-xs font-medium text-gray-500 uppercase tracking-wider bg-violet-50"},[t("span",null,"24 Hours Before")]),t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-center text-xs font-medium text-gray-500 uppercase tracking-wider bg-violet-50"},[t("span",null,"48 Hours Before")]),t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-center text-xs font-medium text-gray-500 uppercase tracking-wider bg-violet-50 border-r border-dotted border-r-teal-300"},[t("span",null,"72 Hours Before")]),t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-xs font-medium text-gray-500 uppercase tracking-wider bg-teal-50"},[t("span",null,"Name")]),t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-xs font-medium text-gray-500 uppercase tracking-wider bg-teal-50"},[t("span",null,"Description")]),t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-center text-xs font-medium text-gray-500 uppercase tracking-wider bg-teal-50"},[t("span",null,"Active")]),t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-center text-xs font-medium text-gray-500 uppercase tracking-wider bg-teal-50"},[t("span",null,"Duration")]),t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-center text-xs font-medium text-gray-500 uppercase tracking-wider bg-teal-50"},[t("span",null,"Price")]),t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-left text-xs font-medium text-gray-500 uppercase tracking-wider bg-teal-50"},[t("span",null,"Created")])])],-1),ot={class:"bg-white divide-y divide-gray-200"},it={class:"px-6 py-3 whitespace-nowrap border-r border-dotted border-r-teal-300"},rt={class:"text-sm text-gray-900"},lt={class:"px-6 py-3 text-sm text-gray-500 text-center bg-teal-50"},ct={class:"px-6 py-3 whitespace-nowrap text-sm text-gray-500 text-left bg-teal-50"},pt={class:"px-6 py-3 whitespace-nowrap text-sm text-gray-500 text-center bg-teal-50"},dt={key:0},ut={key:1},ht={key:2},xt={key:3},gt={key:4},mt={class:"px-6 py-3 text-sm text-gray-500 text-center bg-teal-50"},yt={class:"px-6 py-3 text-sm text-gray-500 text-center bg-teal-50"},_t={class:"px-6 py-3 text-sm text-gray-500 text-center bg-teal-50"},ft={class:"px-6 py-3 text-sm text-gray-500 text-left bg-teal-50 border-r border-dotted border-r-fuchsia-300"},bt={class:"px-6 py-3 whitespace-nowrap text-sm text-gray-500 text-left bg-fuchsia-50"},wt={key:1},vt={class:"px-6 py-3 whitespace-nowrap text-md text-gray-500 text-center font-bold bg-fuchsia-50"},kt={key:0},At={key:1},Tt={class:"px-6 py-3 whitespace-nowrap text-sm text-gray-500 text-center bg-fuchsia-50"},Bt={class:"px-6 py-3 whitespace-nowrap text-sm text-gray-500 text-center bg-fuchsia-50"},Mt={class:"px-6 py-3 whitespace-nowrap text-sm text-gray-500 text-center bg-fuchsia-50"},Lt={key:1},Et={class:"px-6 py-3 whitespace-nowrap text-sm text-gray-500 text-center bg-fuchsia-50"},It={key:1},Ct={class:"px-6 py-3 whitespace-nowrap text-sm text-gray-500 text-center bg-fuchsia-50"},Nt={class:"px-6 py-3 whitespace-nowrap text-sm text-gray-500 bg-fuchsia-50 border-r border-dotted border-r-violet-300"},Dt={class:"px-6 py-3 text-sm text-gray-500 bg-violet-50"},St={class:"px-6 py-3 text-sm text-gray-500 bg-violet-50"},Pt={class:"px-6 py-3 text-sm text-gray-500 bg-violet-50"},Rt={class:"px-6 py-3 text-sm text-gray-500 bg-violet-50"},Ht={class:"px-6 py-3 text-sm text-gray-500 bg-violet-50"},Ot={class:"px-6 py-3 text-sm text-gray-500 bg-violet-50 border-r border-dotted border-r-teal-300"},Vt={class:"px-6 py-3 whitespace-nowrap text-sm text-gray-500 text-left bg-teal-50"},Ut={class:"text-sm text-gray-900"},$t={class:"px-6 py-3 whitespace-nowrap text-sm text-gray-500 text-left bg-teal-50"},Ft={class:"px-6 py-3 whitespace-nowrap text-sm text-gray-500 text-center bg-teal-50"},qt={class:"px-6 py-3 whitespace-nowrap text-sm text-gray-500 text-center bg-teal-50"},Gt={class:"px-6 py-3 whitespace-nowrap text-sm text-gray-500 text-center bg-teal-50"},Yt={class:"px-6 py-3 whitespace-nowrap text-sm text-gray-500 text-left bg-teal-50"},jt={key:0},zt=t("td",{colspan:8,class:"px-6 py-3 whitespace-nowrap"},[t("div",{class:"text-center text-gray-900 text-sm p-6"},"No auto billing schedules")],-1),Jt=[zt];function Kt(s,x,d,b,l,w){const I=r("AutoBillingEnabledStatusBadge"),C=r("vue-countdown"),N=r("BillingTransactionStatusBadge"),D=r("RatingTypeBadge"),S=r("CreatedUsingAutoBillingBadge"),c=r("AutoBillingReminderStatusBadge"),P=r("SubscriptionPlanActiveStatusBadge"),R=r("pagination");return n(),o("div",null,[X,t("div",Z,[t("div",tt,[t("div",et,[t("div",st,[t("table",at,[nt,t("tbody",ot,[(n(!0),o(Y,null,j(s.autoBillingSchedulesPayload.data,e=>(n(),o("tr",{key:e.id},[t("td",it,[t("div",rt,a(e.subscriber.msisdn),1)]),t("td",lt,[i(I,{autoBillingSchedule:e},null,8,["autoBillingSchedule"])]),t("td",ct,a(e.next_attempt_date==null?"...":s.moment(e.next_attempt_date).format("lll")),1),t("td",pt,[i(C,{time:e.next_attempt_date_milli_seconds_left},{default:z(({days:u,hours:h,minutes:g,seconds:m})=>[u>0?(n(),o("span",dt,a(u)+" "+a(u==1?"day ":"days "),1)):p("",!0),h>0?(n(),o("span",ut,a(h)+" "+a(h==1?"hr ":"hrs "),1)):p("",!0),u==0&&g>0?(n(),o("span",ht,a(g)+" "+a(g==1?"min ":"mins "),1)):p("",!0),h==0&&m>0?(n(),o("span",xt,a(m)+" "+a(m==1?"sec ":"secs "),1)):p("",!0),u==0&&h==0&&g==0&&m==0?(n(),o("span",gt,"Ended")):p("",!0)]),_:2},1032,["time"])]),t("td",mt,a(e.attempts==null?"...":e.attempts)+" / "+a(e.subscription_plan==null?"...":e.subscription_plan.max_auto_billing_attempts),1),t("td",yt,a(e.total_successful_attempts==null?"...":e.total_successful_attempts),1),t("td",_t,a(e.total_failed_attempts==null?"...":e.total_failed_attempts),1),t("td",ft,a(e.created_at==null?"...":s.moment(e.created_at).format("lll")),1),t("td",bt,[s.getLatestAutoBillingTransaction(e).is_successful?(n(),v(N,{key:0,billingTransaction:s.getLatestAutoBillingTransaction(e)},null,8,["billingTransaction"])):(n(),o("span",wt,"..."))]),t("td",vt,[s.getLatestAutoBillingTransaction(e).amount?(n(),o("span",kt,a(s.getLatestAutoBillingTransaction(e).amount.amount_with_currency),1)):(n(),o("span",At,"..."))]),t("td",Tt,a(s.getLatestAutoBillingTransaction(e).funds_before_deduction==null?"...":s.getLatestAutoBillingTransaction(e).funds_before_deduction.amount_with_currency),1),t("td",Bt,a(s.getLatestAutoBillingTransaction(e).funds_after_deduction==null?"...":s.getLatestAutoBillingTransaction(e).funds_after_deduction.amount_with_currency),1),t("td",Mt,[s.getLatestAutoBillingTransaction(e).rating_type?(n(),v(D,{key:0,billingTransaction:s.getLatestAutoBillingTransaction(e)},null,8,["billingTransaction"])):(n(),o("span",Lt,"..."))]),t("td",Et,[s.getLatestAutoBillingTransaction(e).created_using_auto_billing?(n(),v(S,{key:0,billingTransaction:s.getLatestAutoBillingTransaction(e)},null,8,["billingTransaction"])):(n(),o("span",It,"..."))]),t("td",Ct,[t("span",null,a(s.getLatestAutoBillingTransaction(e).description??"..."),1)]),t("td",Nt,a(s.getLatestAutoBillingTransaction(e).created_at==null?"...":s.moment(s.getLatestAutoBillingTransaction(e).created_at).format("lll")),1),t("td",Dt,[i(c,{hours:1,autoBillingSchedule:e},null,8,["autoBillingSchedule"])]),t("td",St,[i(c,{hours:6,autoBillingSchedule:e},null,8,["autoBillingSchedule"])]),t("td",Pt,[i(c,{hours:12,autoBillingSchedule:e},null,8,["autoBillingSchedule"])]),t("td",Rt,[i(c,{hours:24,autoBillingSchedule:e},null,8,["autoBillingSchedule"])]),t("td",Ht,[i(c,{hours:48,autoBillingSchedule:e},null,8,["autoBillingSchedule"])]),t("td",Ot,[i(c,{hours:72,autoBillingSchedule:e},null,8,["autoBillingSchedule"])]),t("td",Vt,[t("div",Ut,a(e.subscription_plan.name),1)]),t("td",$t,a(e.subscription_plan.description==null?"...":e.subscription_plan.description),1),t("td",Ft,[i(P,{subscriptionPlan:e.subscription_plan},null,8,["subscriptionPlan"])]),t("td",qt,a(e.subscription_plan.duration_in_words==null?"...":e.subscription_plan.duration_in_words),1),t("td",Gt,a(e.subscription_plan.price==null?"...":e.subscription_plan.price.amount_with_currency),1),t("td",Yt,a(e.subscription_plan.created_at==null?"...":s.moment(e.subscription_plan.created_at).format("lll")),1)]))),128)),s.autoBillingSchedulesPayload.data.length==0?(n(),o("tr",jt,Jt)):p("",!0)])])])])]),i(R,{class:"mt-6",paginationPayload:s.autoBillingSchedulesPayload,updateData:["autoBillingSchedulesPayload"]},null,8,["paginationPayload"])])])}const ue=K(W,[["render",Kt]]);export{ue as default};
