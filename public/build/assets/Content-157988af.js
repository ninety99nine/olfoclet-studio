import"./base-c7d9afcb.js";import{E as w}from"./el-popover-9832dd3a.js";import f from"./SmsCampaignCanSendSmsBadge-cb36d33f.js";import b from"./SmsCampaignStatusBadge-c3320baf.js";import S from"./ManageSmsCampaignModal-320f9dd3.js";import{P as v}from"./Pagination-999347a1.js";import{s as C,e as a,b as i,a as e,g as p,w as g,F as k,h as P,f as c,x as l,o as n,t as o,i as d}from"./app-430601de.js";import{h as j}from"./moment-fbc5633a.js";import{_ as B}from"./_plugin-vue_export-helper-c27b6911.js";import"./icon-d4413508.js";import"./constants-bf9e3feb.js";/* empty css            */import"./el-select-6d9fbecd.js";import"./index-32fd77e6.js";import"./el-switch-24bc25a2.js";import"./el-divider-eb8d8ed4.js";import"./TextInput-539a61cf.js";import"./InputLabel-c5dbdde8.js";import"./Textarea-728abe8a.js";import"./PrimaryButton-86744c0d.js";import"./SelectInput-445d6387.js";import"./DialogModal-c4420808.js";import"./DangerButton-8e630b29.js";import"./SecondaryButton-3a726258.js";const M=C({components:{ManageSmsCampaignModal:S,Pagination:v,SmsCampaignCanSendSmsBadge:f,SmsCampaignStatusBadge:b},props:{contentToSendOptions:Array,scheduleTypeOptions:Array,subscriptionPlans:Array,smsCampaignsPayload:Object,projectPayload:Object},data(){return{refreshContentInterval:null,isShowingModal:!1,modalAction:null,smsCampaign:null,moment:j}},methods:{refreshContent(){this.$inertia.reload()},getLatestSmsCampaignBatchJob(t){return t.latest_sms_campaign_batch_job.length?t.latest_sms_campaign_batch_job[0]:{}},showModal(t,r){this.smsCampaign=t,this.modalAction=r,this.isShowingModal=!0},cleanUp(){clearInterval(this.refreshContentInterval),this.refreshContentInterval=null}},created(){this.refreshContentInterval=setInterval(function(){this.refreshContent()}.bind(this),5e3)},unmounted(){this.cleanUp()}}),L={class:"bg-gray-50 border-b pl-6 py-3 rounded-t text-gray-500 text-sm mb-4 flex items-center"},T={key:0,class:"text-gray-400"},$=e("span",{class:"text-green-500 font-bold"},"Sending messages is enabled",-1),J={key:1,class:"text-gray-400"},O=e("span",{class:"text-red-500 font-bold"},"Sending messages is disabled",-1),V=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 ml-2",fill:"none",viewBox:"0 0 24 24",strokeWidth:"{1.5}",stroke:"currentColor"},[e("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z"})],-1),A={key:0,class:"break-normal"},I=e("hr",{class:"my-4"},null,-1),N={key:1,class:"break-normal"},D={class:"bg-white overflow-hidden shadow-xl sm:rounded-lg"},E={class:"flex flex-col"},U={class:"-my-2 overflow-x-auto sm:-mx-6 lg:-mx-8"},z={class:"py-2 align-middle inline-block min-w-full sm:px-6 lg:px-8"},F={class:"shadow overflow-hidden border-b border-gray-200 sm:rounded-lg"},Y={class:"min-w-full divide-y divide-gray-200"},H=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},[e("span",null,"Name")]),e("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},[e("span",null,"Send Messages")]),e("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},[e("span",null,"Status")]),e("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},[e("span",null,"Sprints")]),e("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-left text-xs font-medium text-gray-500 uppercase tracking-wider bg-indigo-100"},[e("span",null,"Total")]),e("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-left text-xs font-medium text-gray-500 uppercase tracking-wider bg-indigo-100"},[e("span",null,"Pending")]),e("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-left text-xs font-medium text-gray-500 uppercase tracking-wider bg-indigo-100"},[e("span",null,"Processed")]),e("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-left text-xs font-medium text-gray-500 uppercase tracking-wider bg-indigo-100"},[e("span",null,"Progress")]),e("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},[e("span",null,"Last Sprint Date")]),e("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},[e("span",null,"Actions")])])],-1),W={class:"bg-white divide-y divide-gray-200"},q={class:"px-6 py-3 whitespace-nowrap"},G={class:"text-sm text-gray-900"},K={class:"px-6 py-3"},Q={class:"px-6 py-3"},R={class:"px-6 py-3 whitespace-nowrap text-sm text-gray-500 text-center"},X={class:"text-sm text-gray-900"},Z={class:"px-6 py-3 whitespace-nowrap text-sm text-gray-500 text-center bg-indigo-50"},ee={class:"text-sm text-gray-900"},te={class:"px-6 py-3 whitespace-nowrap text-sm text-gray-500 text-center bg-indigo-50"},se={class:"text-sm text-gray-900"},ae={class:"px-6 py-3 whitespace-nowrap text-sm text-gray-500 text-center bg-indigo-50"},ne={class:"text-sm text-gray-900"},oe={class:"px-6 py-3 whitespace-nowrap text-sm text-gray-500 text-center bg-indigo-50"},ie={class:"text-lg text-green-600"},re={class:"px-6 py-3 whitespace-nowrap text-sm text-gray-500"},pe={class:"px-6 py-3 whitespace-nowrap text-right text-sm font-medium"},ce=["onClick"],le=["onClick"],de=["onClick"],me={key:0},ge=e("td",{colspan:10,class:"px-6 py-3 whitespace-nowrap"},[e("div",{class:"text-center text-gray-900 text-sm p-6"},"No sms campaigns")],-1),he=[ge];function ue(t,r,xe,_e,ye,we){const h=l("manage-sms-campaign-modal"),u=w,x=l("SmsCampaignCanSendSmsBadge"),_=l("SmsCampaignStatusBadge"),y=l("pagination");return n(),a("div",null,[i(h,{modelValue:t.isShowingModal,"onUpdate:modelValue":r[0]||(r[0]=s=>t.isShowingModal=s),action:t.modalAction,smsCampaign:t.smsCampaign,subscriptionPlans:t.subscriptionPlans,contentToSendOptions:t.contentToSendOptions,scheduleTypeOptions:t.scheduleTypeOptions},null,8,["modelValue","action","smsCampaign","subscriptionPlans","contentToSendOptions","scheduleTypeOptions"]),e("div",L,[t.projectPayload.can_send_messages?(n(),a("span",T,[$,p(' — You can turn off "Send messages" in settings (This affects all sms campaigns)')])):(n(),a("span",J,[O,p(' — You can turn on "Send messages" in settings')])),i(u,{width:400},{reference:g(()=>[V]),default:g(()=>[t.projectPayload.can_send_messages?(n(),a("span",A,[p(` Turning off "Send Messages" from the project settings means that every sms campaign won't be able to send messages even if the sms campaign "Send Messages" option is turned on `),I,p(' After turning off "Send Messages" from the project settings, any running sms campaigns will complete their last sprint before completely stopping to send messages. ')])):(n(),a("span",N,' Turning on "Send Messages" from the project settings means that every sms campaign will be able to send messages as long as the sms campaign "Send Messages" option is turned on '))]),_:1})]),e("div",D,[e("div",E,[e("div",U,[e("div",z,[e("div",F,[e("table",Y,[H,e("tbody",W,[(n(!0),a(k,null,P(t.smsCampaignsPayload.data,s=>(n(),a("tr",{key:s.id},[e("td",q,[e("div",G,o(s.name),1)]),e("td",K,[i(x,{smsCampaign:s},null,8,["smsCampaign"])]),e("td",Q,[i(_,{smsCampaignBatchJob:t.getLatestSmsCampaignBatchJob(s)},null,8,["smsCampaignBatchJob"])]),e("td",R,[e("div",X,o(s.sms_campaign_batch_jobs_count),1)]),e("td",Z,[e("div",ee,o(t.getLatestSmsCampaignBatchJob(s).total_jobs),1)]),e("td",te,[e("div",se,o(t.getLatestSmsCampaignBatchJob(s).pending_jobs),1)]),e("td",ae,[e("div",ne,o(t.getLatestSmsCampaignBatchJob(s).processed_jobs),1)]),e("td",oe,[e("span",ie,o(t.getLatestSmsCampaignBatchJob(s).progress)+" "+o(t.getLatestSmsCampaignBatchJob(s).progress?"%":""),1)]),e("td",re,o(t.getLatestSmsCampaignBatchJob(s).created_at==null?"...":t.moment(t.getLatestSmsCampaignBatchJob(s).created_at).format("lll")),1),e("td",pe,[t.$inertia.page.props.projectPermissions.includes("View sms campaigns")?(n(),a("a",{key:0,href:"#",onClick:d(m=>t.$inertia.get(t.route("show.sms.campaign.job.batches",{project:t.route().params.project,sms_campaign:s.id})),["prevent"]),class:"text-indigo-600 hover:text-indigo-900 mr-3"},"View",8,ce)):c("",!0),t.$inertia.page.props.projectPermissions.includes("Manage sms campaigns")?(n(),a("a",{key:1,href:"#",onClick:d(m=>t.showModal(s,"update"),["prevent"]),class:"text-indigo-600 hover:text-indigo-900 mr-3"},"Edit",8,le)):c("",!0),t.$inertia.page.props.projectPermissions.includes("Manage sms campaigns")?(n(),a("a",{key:2,href:"#",onClick:d(m=>t.showModal(s,"delete"),["prevent"]),class:"text-red-600 hover:text-red-900"},"Delete",8,de)):c("",!0)])]))),128)),t.smsCampaignsPayload.data.length==0?(n(),a("tr",me,he)):c("",!0)])])])])])]),i(y,{class:"mt-6",paginationPayload:t.smsCampaignsPayload,updateData:["smsCampaignsPayload"]},null,8,["paginationPayload"])])])}const Ye=B(M,[["render",ue]]);export{Ye as default};
