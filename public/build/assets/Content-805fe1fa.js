import u from"./ActiveStatusBadge-26c4bbcb.js";import w from"./ActiveStatusBadge-1ea992a8.js";import f from"./ManageSubscriptionModal-f271a41c.js";import{P as y}from"./Pagination-52d23933.js";import{q as _,s as i,o as r,e as o,b as p,a as t,F as b,h as v,f as c,t as s,i as l}from"./app-0c965242.js";import{h as k}from"./moment-fbc5633a.js";import{_ as P}from"./_plugin-vue_export-helper-c27b6911.js";/* empty css            */import"./base-9d5d9ef5.js";import"./el-radio-ce17e5f2.js";import"./constants-3be68072.js";import"./icon-e84b57dd.js";import"./el-scrollbar-c0a0b428.js";import"./el-tag-8223e060.js";import"./index-6fa13ed4.js";import"./el-popper-d10fec87.js";import"./TextInput-c06f189a.js";import"./InputLabel-208bb471.js";import"./Textarea-d0469ae8.js";import"./PrimaryButton-4462e8b6.js";import"./SelectInput-3bc5cfc6.js";import"./DialogModal-e43601e6.js";import"./DangerButton-709aae28.js";import"./ActionMessage-2eb6fec2.js";import"./SecondaryButton-ad3c249d.js";const S=_({components:{ManageSubscriptionModal:f,SubscriptionActiveStatusBadge:w,PricingPlanActiveStatusBadge:u,Pagination:y},props:{totalSubscribers:Number,pricingPlans:Array,subscriptionsPayload:Object},data(){return{refreshContentInterval:null,isShowingModal:!1,modalAction:null,subscription:null,moment:k}},methods:{onDeleted(){this.subscription=null},refreshContent(){this.$inertia.reload()},showModal(e,n){this.subscription=e,this.modalAction=n,this.isShowingModal=!0},getPercentageOfCoverage(e){return this.totalSubscribers>0?Math.round(e/this.totalSubscribers*100):0},cleanUp(){clearInterval(this.refreshContentInterval),this.refreshContentInterval=null}},created(){this.refreshContentInterval=setInterval(function(){this.refreshContent()}.bind(this),5e3)},unmounted(){this.cleanUp()}}),C={class:"bg-white shadow-xl sm:rounded-lg"},M={class:"flex flex-col overflow-y-auto"},A={class:"align-middle inline-block min-w-full"},B={class:"shadow border-b border-gray-200"},I={class:"min-w-full divide-y divide-gray-200"},D=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-left text-xs font-medium text-gray-500 uppercase tracking-wider border-r border-dotted border-r-teal-300"}),t("th",{scope:"col",colspan:"5",class:"px-6 py-3 whitespace-nowrap text-center text-xs font-medium text-gray-500 uppercase tracking-wider bg-teal-50 border-r border-dotted border-r-fuchsia-300"},[t("div",{class:"font-bold text-teal-500"},"SUBSCRIPTION")]),t("th",{scope:"col",colspan:"6",class:"px-6 py-3 whitespace-nowrap text-center text-xs font-medium text-gray-500 uppercase tracking-wider bg-fuchsia-50"},[t("div",{class:"font-bold text-fuchsia-500"},"PRICING PLAN")]),t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-left text-xs font-medium text-gray-500 uppercase tracking-wider border-r border-dotted border-r-teal-300"})]),t("tr",null,[t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-left text-xs font-medium text-gray-500 uppercase tracking-wider border-r border-dotted border-r-teal-300"},[t("span",null,"Mobile")]),t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-left text-xs font-medium text-gray-500 uppercase tracking-wider bg-teal-50"},[t("span",null,"Start")]),t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-left text-xs font-medium text-gray-500 uppercase tracking-wider bg-teal-50"},[t("span",null,"End")]),t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-left text-xs font-medium text-gray-500 uppercase tracking-wider bg-teal-50"},[t("span",null,"Cancelled")]),t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-left text-xs font-medium text-gray-500 uppercase tracking-wider bg-teal-50"},[t("span",null,"Active")]),t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-left text-xs font-medium text-gray-500 uppercase tracking-wider bg-teal-50 border-r border-dotted border-r-fuchsia-300"},[t("span",null,"Created")]),t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-xs font-medium text-gray-500 uppercase tracking-wider bg-fuchsia-50"},[t("span",null,"Name")]),t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-xs font-medium text-gray-500 uppercase tracking-wider bg-fuchsia-50"},[t("span",null,"Description")]),t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-center text-xs font-medium text-gray-500 uppercase tracking-wider bg-fuchsia-50"},[t("span",null,"Active")]),t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-center text-xs font-medium text-gray-500 uppercase tracking-wider bg-fuchsia-50"},[t("span",null,"Duration")]),t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-center text-xs font-medium text-gray-500 uppercase tracking-wider bg-fuchsia-50"},[t("span",null,"Price")]),t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-left text-xs font-medium text-gray-500 uppercase tracking-wider bg-fuchsia-50"},[t("span",null,"Created")]),t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-xs font-medium text-gray-500 uppercase tracking-wider text-right"},[t("span",null,"Actions")])])],-1),N={class:"bg-white divide-y divide-gray-200"},$={class:"px-6 py-3 whitespace-nowrap text-sm text-gray-500 border-r border-dotted border-r-teal-300"},V={class:"text-sm text-gray-900"},O={class:"px-6 py-3 whitespace-nowrap text-sm text-gray-500 text-left bg-teal-50"},U={class:"px-6 py-3 whitespace-nowrap text-sm text-gray-500 text-left bg-teal-50"},j={class:"px-6 py-3 whitespace-nowrap text-sm text-gray-500 text-left bg-teal-50"},E={class:"px-6 py-3 whitespace-nowrap text-sm text-gray-500 text-center bg-teal-50"},F={class:"px-6 py-3 whitespace-nowrap text-sm text-gray-500 text-left bg-teal-50 border-r border-dotted border-r-fuchsia-300"},L={class:"px-6 py-3 whitespace-nowrap text-sm text-gray-500 text-left bg-fuchsia-50"},R={class:"text-sm text-gray-900"},q={class:"px-6 py-3 whitespace-nowrap text-sm text-gray-500 text-left bg-fuchsia-50"},G={class:"px-6 py-3 whitespace-nowrap text-sm text-gray-500 text-center bg-fuchsia-50"},T={class:"px-6 py-3 whitespace-nowrap text-sm text-gray-500 text-center bg-fuchsia-50"},z={class:"px-6 py-3 whitespace-nowrap text-sm text-gray-500 text-center bg-fuchsia-50"},H={class:"px-6 py-3 whitespace-nowrap text-sm text-gray-500 text-left bg-fuchsia-50"},J={class:"px-6 py-3 whitespace-nowrap text-right text-sm font-medium"},K=["onClick"],Q=["onClick"],W={key:0},X=t("td",{colspan:13,class:"px-6 py-3 whitespace-nowrap"},[t("div",{class:"text-center text-gray-900 text-sm p-6"},"No subscriptions")],-1),Y=[X];function Z(e,n,tt,et,at,st){const d=i("ManageSubscriptionModal"),h=i("SubscriptionActiveStatusBadge"),x=i("PricingPlanActiveStatusBadge"),m=i("pagination");return r(),o("div",null,[p(d,{modelValue:e.isShowingModal,"onUpdate:modelValue":n[0]||(n[0]=a=>e.isShowingModal=a),action:e.modalAction,subscription:e.subscription,pricingPlans:e.pricingPlans,onOnDeleted:e.onDeleted},null,8,["modelValue","action","subscription","pricingPlans","onOnDeleted"]),t("div",C,[t("div",M,[t("div",A,[t("div",B,[t("table",I,[D,t("tbody",N,[(r(!0),o(b,null,v(e.subscriptionsPayload.data,a=>(r(),o("tr",{key:a.id},[t("td",$,[t("div",V,s(a.subscriber.msisdn),1)]),t("td",O,s(e.moment(a.start_at).format("lll")),1),t("td",U,s(e.moment(a.end_at).format("lll")),1),t("td",j,s(a.cancelled_at==null?"...":e.moment(a.cancelled_at).format("lll")),1),t("td",E,[p(h,{subscription:a},null,8,["subscription"])]),t("td",F,s(e.moment(a.created_at).format("lll")),1),t("td",L,[t("div",R,s(a.pricing_plan.name),1)]),t("td",q,s(a.pricing_plan.description==null?"...":a.pricing_plan.description),1),t("td",G,[p(x,{pricingPlan:a.pricing_plan},null,8,["pricingPlan"])]),t("td",T,s(a.pricing_plan.duration_in_words==null?"...":a.pricing_plan.duration_in_words),1),t("td",z,s(a.pricing_plan.price==null?"...":a.pricing_plan.price.amount_with_currency),1),t("td",H,s(a.pricing_plan.created_at==null?"...":e.moment(a.pricing_plan.created_at).format("lll")),1),t("td",J,[e.$inertia.page.props.projectPermissions.includes("Manage subscriptions")?(r(),o("a",{key:0,href:"#",onClick:l(g=>e.showModal(a,"update"),["prevent"]),class:"text-indigo-600 hover:text-indigo-900 mr-3"},"Edit",8,K)):c("",!0),e.$inertia.page.props.projectPermissions.includes("Manage subscriptions")?(r(),o("a",{key:1,href:"#",onClick:l(g=>e.showModal(a,"delete"),["prevent"]),class:"text-red-600 hover:text-red-900"},"Delete",8,Q)):c("",!0)])]))),128)),e.subscriptionsPayload.data.length==0?(r(),o("tr",W,Y)):c("",!0)])])])])]),p(m,{class:"mt-6",paginationPayload:e.subscriptionsPayload,updateData:["subscriptionsPayload"]},null,8,["paginationPayload"])])])}const Bt=P(S,[["render",Z]]);export{Bt as default};
