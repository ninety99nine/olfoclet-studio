import R from"./BillingTransactionStatusBadge-380ca2ae.js";import H from"./CreatedUsingAutoBillingBadge-bece6be9.js";import O from"./ActiveStatusBadge-38613547.js";import V from"./RatingTypeBadge-042d6699.js";import U from"./AutoBillingReminderStatusBadge-7988edba.js";import $ from"./AutoBillingEnabledStatusBadge-b207a1ff.js";import{P as F}from"./Pagination-5552bf68.js";import{q as E,y as q,s as r,o,e as i,a as t,F as G,h as Y,f as p,b as n,t as a,w as j,c as z}from"./app-fda283e1.js";import{h as J}from"./moment-fbc5633a.js";import{_ as K}from"./_plugin-vue_export-helper-c27b6911.js";import"./base-4015d282.js";import"./el-popper-ade42412.js";import"./icon-bb3cd363.js";import"./constants-02b1399b.js";import"./el-popover-e9cdcd6b.js";/* empty css            *//*! vue-countdown v2.1.2 | (c) 2018-present Chen Fengyuan | MIT */const y=1e3,f=60*y,_=60*f,v=24*_,A="abort",T="end",k="progress",B="start",M="visibilitychange";var Q=E({name:"VueCountdown",props:{autoStart:{type:Boolean,default:!0},emitEvents:{type:Boolean,default:!0},interval:{type:Number,default:1e3,validator:s=>s>=0},now:{type:Function,default:()=>Date.now()},tag:{type:String,default:"span"},time:{type:Number,default:0,validator:s=>s>=0},transform:{type:Function,default:s=>s}},emits:[A,T,k,B],data(){return{counting:!1,endTime:0,totalMilliseconds:0,requestId:0}},computed:{days(){return Math.floor(this.totalMilliseconds/v)},hours(){return Math.floor(this.totalMilliseconds%v/_)},minutes(){return Math.floor(this.totalMilliseconds%_/f)},seconds(){return Math.floor(this.totalMilliseconds%f/y)},milliseconds(){return Math.floor(this.totalMilliseconds%y)},totalDays(){return this.days},totalHours(){return Math.floor(this.totalMilliseconds/_)},totalMinutes(){return Math.floor(this.totalMilliseconds/f)},totalSeconds(){return Math.floor(this.totalMilliseconds/y)}},watch:{$props:{deep:!0,immediate:!0,handler(){this.totalMilliseconds=this.time,this.endTime=this.now()+this.time,this.autoStart&&this.start()}}},mounted(){document.addEventListener(M,this.handleVisibilityChange)},beforeUnmount(){document.removeEventListener(M,this.handleVisibilityChange),this.pause()},methods:{start(){this.counting||(this.counting=!0,this.autoStart||(this.totalMilliseconds=this.time,this.endTime=this.now()+this.time),this.emitEvents&&this.$emit(B),document.visibilityState==="visible"&&this.continue())},continue(){if(!this.counting)return;const s=Math.min(this.totalMilliseconds,this.interval);if(s>0){let x,d;const b=l=>{x||(x=l),d||(d=l);const w=l-x;w>=s||w+(l-d)/2>=s?this.progress():this.requestId=requestAnimationFrame(b),d=l};this.requestId=requestAnimationFrame(b)}else this.end()},pause(){cancelAnimationFrame(this.requestId)},progress(){this.counting&&(this.update(),this.emitEvents&&this.totalMilliseconds>0&&this.$emit(k,{days:this.days,hours:this.hours,minutes:this.minutes,seconds:this.seconds,milliseconds:this.milliseconds,totalDays:this.totalDays,totalHours:this.totalHours,totalMinutes:this.totalMinutes,totalSeconds:this.totalSeconds,totalMilliseconds:this.totalMilliseconds}),this.continue())},abort(){this.counting&&(this.pause(),this.counting=!1,this.emitEvents&&this.$emit(A))},end(){this.counting&&(this.pause(),this.totalMilliseconds=0,this.counting=!1,this.emitEvents&&this.$emit(T))},update(){this.counting&&(this.totalMilliseconds=Math.max(0,this.endTime-this.now()))},restart(){this.pause(),this.totalMilliseconds=this.time,this.endTime=this.now()+this.time,this.counting=!1,this.start()},handleVisibilityChange(){switch(document.visibilityState){case"visible":this.update(),this.continue();break;case"hidden":this.pause();break}}},render(){return q(this.tag,this.$slots.default?[this.$slots.default(this.transform({days:this.days,hours:this.hours,minutes:this.minutes,seconds:this.seconds,milliseconds:this.milliseconds,totalDays:this.totalDays,totalHours:this.totalHours,totalMinutes:this.totalMinutes,totalSeconds:this.totalSeconds,totalMilliseconds:this.totalMilliseconds}))]:void 0)}});const W=E({components:{VueCountdown:Q,SubscriptionPlanActiveStatusBadge:O,AutoBillingReminderStatusBadge:U,AutoBillingEnabledStatusBadge:$,Pagination:F,BillingTransactionStatusBadge:R,RatingTypeBadge:V,CreatedUsingAutoBillingBadge:H},props:{autoBillingSchedulesPayload:Object},data(){return{refreshContentInterval:null,moment:J}},methods:{getLatestAutoBillingTransaction(s){return s.subscriber.latest_auto_billing_transaction??{}},refreshContent(){this.$inertia.reload()},cleanUp(){clearInterval(this.refreshContentInterval),this.refreshContentInterval=null}},created(){this.refreshContentInterval=setInterval(function(){this.refreshContent()}.bind(this),5e3)},unmounted(){this.cleanUp()}}),X=t("div",{class:"grid grid-cols-12 gap-4"},[t("div",{class:"col-span-6"},[t("div",{class:"bg-gray-50 border-b px-6 py-4 rounded-t text-gray-500 text-sm mb-4"},[t("div",{class:"text-2xl font-semibold leading-6 text-gray-500"},"Auto Billing Schedules")])])],-1),Z={class:"bg-white shadow-xl sm:rounded-lg"},tt={class:"flex flex-col overflow-y-auto"},et={class:"align-middle inline-block min-w-full"},st={class:"shadow border-b border-gray-200"},at={class:"min-w-full divide-y divide-gray-200"},nt=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-left text-xs font-medium text-gray-500 uppercase tracking-wider border-r border-dotted border-r-teal-300"}),t("th",{scope:"col",colspan:"7",class:"px-6 py-3 whitespace-nowrap text-center text-xs font-medium text-gray-500 uppercase tracking-wider bg-teal-50 border-r border-dotted border-r-fuchsia-300"},[t("div",{class:"font-bold text-teal-500"},"AUTO BILLING SCHEDULE")]),t("th",{scope:"col",colspan:"8",class:"px-6 py-3 whitespace-nowrap text-center text-xs font-medium text-gray-500 uppercase tracking-wider bg-fuchsia-50 border-r border-dotted border-r-violet-300"},[t("div",{class:"font-bold text-fuchsia-500"},"LAST AUTO BILLING TRANSACTION")]),t("th",{scope:"col",colspan:"6",class:"px-6 py-3 whitespace-nowrap text-center text-xs font-medium text-gray-500 uppercase tracking-wider bg-violet-50 border-r border-dotted border-r-teal-300"},[t("div",{class:"font-bold text-violet-500"},"AUTO BILLING REMINDER")]),t("th",{scope:"col",colspan:"6",class:"px-6 py-3 whitespace-nowrap text-center text-xs font-medium text-gray-500 uppercase tracking-wider bg-teal-50"},[t("div",{class:"font-bold text-teal-500"},"SUBSCRIPTION PLAN")])]),t("tr",null,[t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-left text-xs font-medium text-gray-500 uppercase tracking-wider border-r border-dotted border-r-teal-300"},[t("span",null,"Mobile")]),t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-left text-xs font-medium text-gray-500 uppercase tracking-wider bg-teal-50"},[t("span",null,"Auto Billing Enabled")]),t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-center text-xs font-medium text-gray-500 uppercase tracking-wider bg-teal-50"},[t("span",null,"Next Attempt Date")]),t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-center text-xs font-medium text-gray-500 uppercase tracking-wider bg-teal-50"},[t("span",null,"Countdown")]),t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-center text-xs font-medium text-gray-500 uppercase tracking-wider bg-teal-50"},[t("span",null,"Attempts")]),t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-center text-xs font-medium text-gray-500 uppercase tracking-wider bg-teal-50"},[t("span",null,"Total Successful Attempts")]),t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-center text-xs font-medium text-gray-500 uppercase tracking-wider bg-teal-50"},[t("span",null,"Total Failed Attempts")]),t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-center text-xs font-medium text-gray-500 uppercase tracking-wider bg-teal-50 border-r border-dotted border-r-fuchsia-300"},[t("span",null,"Created Date")]),t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-left text-xs font-medium text-gray-500 uppercase tracking-wider bg-fuchsia-50"},[t("span",null,"Status")]),t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-left text-xs font-medium text-gray-500 uppercase tracking-wider bg-fuchsia-50"},[t("span",null,"Amount")]),t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-center text-xs font-medium text-gray-500 uppercase tracking-wider bg-fuchsia-50"},[t("span",null,"Funds Before Deduction")]),t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-center text-xs font-medium text-gray-500 uppercase tracking-wider bg-fuchsia-50"},[t("span",null,"Funds After Deduction")]),t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-center text-xs font-medium text-gray-500 uppercase tracking-wider bg-fuchsia-50"},[t("span",null,"Rating Type")]),t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-center text-xs font-medium text-gray-500 uppercase tracking-wider bg-fuchsia-50"},[t("span",null,"Auto Billing")]),t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-center text-xs font-medium text-gray-500 uppercase tracking-wider bg-fuchsia-50"},[t("span",null,"Description")]),t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-center text-xs font-medium text-gray-500 uppercase tracking-wider bg-fuchsia-50 border-r border-dotted border-r-violet-300"},[t("span",null,"Created")]),t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-center text-xs font-medium text-gray-500 uppercase tracking-wider bg-violet-50"},[t("span",null,"1 Hour Before")]),t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-center text-xs font-medium text-gray-500 uppercase tracking-wider bg-violet-50"},[t("span",null,"6 Hours Before")]),t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-center text-xs font-medium text-gray-500 uppercase tracking-wider bg-violet-50"},[t("span",null,"12 Hours Before")]),t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-center text-xs font-medium text-gray-500 uppercase tracking-wider bg-violet-50"},[t("span",null,"24 Hours Before")]),t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-center text-xs font-medium text-gray-500 uppercase tracking-wider bg-violet-50"},[t("span",null,"48 Hours Before")]),t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-center text-xs font-medium text-gray-500 uppercase tracking-wider bg-violet-50 border-r border-dotted border-r-teal-300"},[t("span",null,"72 Hours Before")]),t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-xs font-medium text-gray-500 uppercase tracking-wider bg-teal-50"},[t("span",null,"Name")]),t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-xs font-medium text-gray-500 uppercase tracking-wider bg-teal-50"},[t("span",null,"Description")]),t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-center text-xs font-medium text-gray-500 uppercase tracking-wider bg-teal-50"},[t("span",null,"Active")]),t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-center text-xs font-medium text-gray-500 uppercase tracking-wider bg-teal-50"},[t("span",null,"Duration")]),t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-center text-xs font-medium text-gray-500 uppercase tracking-wider bg-teal-50"},[t("span",null,"Price")]),t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-left text-xs font-medium text-gray-500 uppercase tracking-wider bg-teal-50"},[t("span",null,"Created")])])],-1),ot={class:"bg-white divide-y divide-gray-200"},it={class:"px-6 py-3 whitespace-nowrap border-r border-dotted border-r-teal-300"},rt={class:"text-sm text-gray-900"},lt={class:"px-6 py-3 text-sm text-gray-500 text-center bg-teal-50"},ct={class:"px-6 py-3 whitespace-nowrap text-sm text-gray-500 text-left bg-teal-50"},pt={class:"px-6 py-3 whitespace-nowrap text-sm text-gray-500 text-center bg-teal-50"},dt={key:0},ut={key:1},ht={key:2},xt={key:3},gt={key:4},mt={class:"px-6 py-3 text-sm text-gray-500 text-center bg-teal-50"},yt={class:"px-6 py-3 text-sm text-gray-500 text-center bg-teal-50"},ft={class:"px-6 py-3 text-sm text-gray-500 text-center bg-teal-50"},_t={class:"px-6 py-3 text-sm text-gray-500 text-left bg-teal-50 border-r border-dotted border-r-fuchsia-300"},bt={class:"px-6 py-3 whitespace-nowrap text-sm text-gray-500 text-left bg-fuchsia-50"},wt={class:"px-6 py-3 whitespace-nowrap text-md text-gray-500 text-center font-bold bg-fuchsia-50"},vt={class:"px-6 py-3 whitespace-nowrap text-sm text-gray-500 text-center bg-fuchsia-50"},At={class:"px-6 py-3 whitespace-nowrap text-sm text-gray-500 text-center bg-fuchsia-50"},Tt={class:"px-6 py-3 whitespace-nowrap text-sm text-gray-500 text-center bg-fuchsia-50"},kt={key:0},Bt={class:"px-6 py-3 whitespace-nowrap text-sm text-gray-500 text-center bg-fuchsia-50"},Mt={class:"px-6 py-3 whitespace-nowrap text-sm text-gray-500 text-center bg-fuchsia-50"},Et={class:"px-6 py-3 whitespace-nowrap text-sm text-gray-500 bg-fuchsia-50 border-r border-dotted border-r-violet-300"},Lt={class:"px-6 py-3 text-sm text-gray-500 bg-violet-50"},It={class:"px-6 py-3 text-sm text-gray-500 bg-violet-50"},Ct={class:"px-6 py-3 text-sm text-gray-500 bg-violet-50"},Nt={class:"px-6 py-3 text-sm text-gray-500 bg-violet-50"},St={class:"px-6 py-3 text-sm text-gray-500 bg-violet-50"},Dt={class:"px-6 py-3 text-sm text-gray-500 bg-violet-50 border-r border-dotted border-r-teal-300"},Pt={class:"px-6 py-3 whitespace-nowrap text-sm text-gray-500 text-left bg-teal-50"},Rt={class:"text-sm text-gray-900"},Ht={class:"px-6 py-3 whitespace-nowrap text-sm text-gray-500 text-left bg-teal-50"},Ot={class:"px-6 py-3 whitespace-nowrap text-sm text-gray-500 text-center bg-teal-50"},Vt={class:"px-6 py-3 whitespace-nowrap text-sm text-gray-500 text-center bg-teal-50"},Ut={class:"px-6 py-3 whitespace-nowrap text-sm text-gray-500 text-center bg-teal-50"},$t={class:"px-6 py-3 whitespace-nowrap text-sm text-gray-500 text-left bg-teal-50"},Ft={key:0},qt=t("td",{colspan:8,class:"px-6 py-3 whitespace-nowrap"},[t("div",{class:"text-center text-gray-900 text-sm p-6"},"No auto billing schedules")],-1),Gt=[qt];function Yt(s,x,d,b,l,w){const L=r("AutoBillingEnabledStatusBadge"),I=r("vue-countdown"),C=r("BillingTransactionStatusBadge"),N=r("RatingTypeBadge"),S=r("CreatedUsingAutoBillingBadge"),c=r("AutoBillingReminderStatusBadge"),D=r("SubscriptionPlanActiveStatusBadge"),P=r("pagination");return o(),i("div",null,[X,t("div",Z,[t("div",tt,[t("div",et,[t("div",st,[t("table",at,[nt,t("tbody",ot,[(o(!0),i(G,null,Y(s.autoBillingSchedulesPayload.data,e=>(o(),i("tr",{key:e.id},[t("td",it,[t("div",rt,a(e.subscriber.msisdn),1)]),t("td",lt,[n(L,{autoBillingSchedule:e},null,8,["autoBillingSchedule"])]),t("td",ct,a(e.next_attempt_date==null?"...":s.moment(e.next_attempt_date).format("lll")),1),t("td",pt,[n(I,{time:e.next_attempt_date_milli_seconds_left},{default:j(({days:u,hours:h,minutes:g,seconds:m})=>[u>0?(o(),i("span",dt,a(u)+" "+a(u==1?"day ":"days "),1)):p("",!0),h>0?(o(),i("span",ut,a(h)+" "+a(h==1?"hr ":"hrs "),1)):p("",!0),u==0&&g>0?(o(),i("span",ht,a(g)+" "+a(g==1?"min ":"mins "),1)):p("",!0),h==0&&m>0?(o(),i("span",xt,a(m)+" "+a(m==1?"sec ":"secs "),1)):p("",!0),u==0&&h==0&&g==0&&m==0?(o(),i("span",gt,"Ended")):p("",!0)]),_:2},1032,["time"])]),t("td",mt,a(e.attempts==null?"...":e.attempts),1),t("td",yt,a(e.total_successful_attempts==null?"...":e.total_successful_attempts),1),t("td",ft,a(e.total_failed_attempts==null?"...":e.total_failed_attempts),1),t("td",_t,a(e.created_at==null?"...":s.moment(e.created_at).format("lll")),1),t("td",bt,[n(C,{billingTransaction:s.getLatestAutoBillingTransaction(e)},null,8,["billingTransaction"])]),t("td",wt,[t("span",null,a(s.getLatestAutoBillingTransaction(e).amount.amount_with_currency),1)]),t("td",vt,a(s.getLatestAutoBillingTransaction(e).funds_before_deduction==null?"...":s.getLatestAutoBillingTransaction(e).funds_before_deduction.amount_with_currency),1),t("td",At,a(s.getLatestAutoBillingTransaction(e).funds_after_deduction==null?"...":s.getLatestAutoBillingTransaction(e).funds_after_deduction.amount_with_currency),1),t("td",Tt,[s.getLatestAutoBillingTransaction(e).rating_type==null?(o(),i("span",kt,"...")):(o(),z(N,{key:1,billingTransaction:s.getLatestAutoBillingTransaction(e)},null,8,["billingTransaction"]))]),t("td",Bt,[n(S,{billingTransaction:s.getLatestAutoBillingTransaction(e)},null,8,["billingTransaction"])]),t("td",Mt,[t("span",null,a(s.getLatestAutoBillingTransaction(e).description),1)]),t("td",Et,a(s.getLatestAutoBillingTransaction(e).created_at==null?"...":s.moment(s.getLatestAutoBillingTransaction(e).created_at).format("lll")),1),t("td",Lt,[n(c,{hours:1,autoBillingSchedule:e},null,8,["autoBillingSchedule"])]),t("td",It,[n(c,{hours:6,autoBillingSchedule:e},null,8,["autoBillingSchedule"])]),t("td",Ct,[n(c,{hours:12,autoBillingSchedule:e},null,8,["autoBillingSchedule"])]),t("td",Nt,[n(c,{hours:24,autoBillingSchedule:e},null,8,["autoBillingSchedule"])]),t("td",St,[n(c,{hours:48,autoBillingSchedule:e},null,8,["autoBillingSchedule"])]),t("td",Dt,[n(c,{hours:72,autoBillingSchedule:e},null,8,["autoBillingSchedule"])]),t("td",Pt,[t("div",Rt,a(e.subscription_plan.name),1)]),t("td",Ht,a(e.subscription_plan.description==null?"...":e.subscription_plan.description),1),t("td",Ot,[n(D,{subscriptionPlan:e.subscription_plan},null,8,["subscriptionPlan"])]),t("td",Vt,a(e.subscription_plan.duration_in_words==null?"...":e.subscription_plan.duration_in_words),1),t("td",Ut,a(e.subscription_plan.price==null?"...":e.subscription_plan.price.amount_with_currency),1),t("td",$t,a(e.subscription_plan.created_at==null?"...":s.moment(e.subscription_plan.created_at).format("lll")),1)]))),128)),s.autoBillingSchedulesPayload.data.length==0?(o(),i("tr",Ft,Gt)):p("",!0)])])])])]),n(P,{class:"mt-6",paginationPayload:s.autoBillingSchedulesPayload,updateData:["autoBillingSchedulesPayload"]},null,8,["paginationPayload"])])])}const le=K(W,[["render",Yt]]);export{le as default};
