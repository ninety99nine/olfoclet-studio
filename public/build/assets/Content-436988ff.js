import{h as _}from"./moment-fbc5633a.js";import{s as f,e as o,b as c,a as t,F as u,h as m,f as i,x as l,o as a,t as n,i as d}from"./app-9de9f9bd.js";import b from"./ActiveStatusBadge-0fb3bfcc.js";import v from"./FolderStatusBadge-5e01fee9.js";import{P as k}from"./Pagination-7a184b99.js";import S from"./ManageSubscriptionPlanModal-e8238a32.js";import{_ as P}from"./_plugin-vue_export-helper-c27b6911.js";/* empty css            */import"./base-2406453b.js";import"./el-tag-7d17f943.js";import"./constants-d0653f0e.js";import"./icon-69acd7da.js";import"./index-45951bb0.js";import"./el-select-075fbc0c.js";import"./el-popper-175561ef.js";import"./el-scrollbar-620c1184.js";import"./el-switch-241e8f41.js";import"./el-popover-84201468.js";import"./el-breadcrumb-item-e289be01.js";import"./TextInput-369d020d.js";import"./InputLabel-a72c85e5.js";import"./Textarea-022e5d61.js";import"./PrimaryButton-de3eb2a7.js";import"./SelectInput-9943f4af.js";import"./DialogModal-1dc09110.js";import"./DangerButton-db54b11b.js";import"./SecondaryButton-f4b91670.js";const B=f({components:{ManageSubscriptionPlanModal:S,Pagination:k,ActiveStatusBadge:b,FolderStatusBadge:v},props:{breadcrumbs:Array,totalSubscriptions:Number,autoBillingReminders:Array,parentSubscriptionPlan:Object,subscriptionPlansPayload:Object},data(){return{moment:_,modalAction:null,isShowingModal:!1,subscriptionPlan:null}},methods:{onDeleted(){this.subscriptionPlan=null},getPercentageOfCoverage(e){return this.totalSubscriptions>0?Math.round(e/this.totalSubscriptions*100):0},showModal(e,r){this.subscriptionPlan=e,this.modalAction=r,this.isShowingModal=!0}}}),C={class:"bg-white shadow-xl sm:rounded-lg"},M={class:"flex flex-col overflow-y-auto"},A={class:"align-middle inline-block min-w-full"},$={class:"shadow border-b border-gray-200"},D={class:"min-w-full divide-y divide-gray-200"},V=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-xs font-medium text-gray-500 uppercase tracking-wider text-left"},[t("span",null,"Name")]),t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-xs font-medium text-gray-500 uppercase tracking-wider text-left"},[t("span",null,"Description")]),t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-xs font-medium text-gray-500 uppercase tracking-wider text-center"},[t("span",null,"Type")]),t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-xs font-medium text-gray-500 uppercase tracking-wider text-center"},[t("span",null,"Active")]),t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-xs font-medium text-gray-500 uppercase tracking-wider text-center"},[t("span",null,"Tags")]),t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-xs font-medium text-gray-500 uppercase tracking-wider text-center"},[t("span",null,"Duration")]),t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-xs font-medium text-gray-500 uppercase tracking-wider text-center"},[t("span",null,"Price")]),t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-xs font-medium text-gray-500 uppercase tracking-wider text-center"},[t("span",null,"Subscriptions")]),t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-xs font-medium text-gray-500 uppercase tracking-wider text-center"},[t("span",null,"Popularity")]),t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-xs font-medium text-gray-500 uppercase tracking-wider"},[t("span",null,"Created")]),t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-xs font-medium text-gray-500 uppercase tracking-wider text-right"},[t("span",null,"Actions")])])],-1),j={class:"bg-white divide-y divide-gray-200"},N={class:"px-6 py-3 whitespace-nowrap text-left"},O={class:"text-sm text-gray-900"},F={class:"px-6 py-3 whitespace-nowrap text-left"},R={class:"px-6 py-3 whitespace-nowrap text-sm text-gray-500 text-center"},E={class:"px-6 py-3 whitespace-nowrap text-sm text-gray-500 text-center"},T={class:"px-6 py-3 whitespace-nowrap text-sm text-gray-500 text-center"},L={key:0},U={class:"flex space-x-2"},q={class:"px-6 py-3 whitespace-nowrap text-sm text-gray-500 text-center"},z={class:"px-6 py-3 whitespace-nowrap text-sm text-gray-500 text-center"},G={class:"px-6 py-3 whitespace-nowrap text-sm text-gray-500 text-center"},H={class:"px-6 py-3 whitespace-nowrap text-sm text-gray-500 text-center"},I={class:"text-lg text-green-600"},J={class:"px-6 py-3 whitespace-nowrap text-sm text-gray-500"},K={class:"px-6 py-3 whitespace-nowrap text-right text-sm font-medium"},Q=["onClick"],W=["onClick"],X=["onClick"],Y={key:0},Z=t("td",{colspan:10,class:"px-6 py-3 whitespace-nowrap"},[t("div",{class:"text-center text-gray-900 text-sm p-6"},"No subscription plans")],-1),tt=[Z];function et(e,r,st,ot,at,nt){const x=l("manage-subscription-plan-modal"),h=l("FolderStatusBadge"),g=l("ActiveStatusBadge"),w=l("pagination");return a(),o("div",null,[c(x,{modelValue:e.isShowingModal,"onUpdate:modelValue":r[0]||(r[0]=s=>e.isShowingModal=s),action:e.modalAction,subscriptionPlan:e.subscriptionPlan,parentSubscriptionPlan:e.parentSubscriptionPlan,autoBillingReminders:e.autoBillingReminders,breadcrumbs:e.breadcrumbs,onOnDeleted:e.onDeleted},null,8,["modelValue","action","subscriptionPlan","parentSubscriptionPlan","autoBillingReminders","breadcrumbs","onOnDeleted"]),t("div",C,[t("div",M,[t("div",A,[t("div",$,[t("table",D,[V,t("tbody",j,[(a(!0),o(u,null,m(e.subscriptionPlansPayload.data,s=>(a(),o("tr",{key:s.id},[t("td",N,[t("div",O,n(s.name),1)]),t("td",F,n(s.description==null?"...":s.description),1),t("td",R,[c(h,{subscriptionPlan:s},null,8,["subscriptionPlan"])]),t("td",E,[c(g,{subscriptionPlan:s},null,8,["subscriptionPlan"])]),t("td",T,[s.tags.length==0?(a(),o("div",L,"...")):i("",!0),t("div",U,[(a(!0),o(u,null,m(s.tags,(p,y)=>(a(),o("div",{key:y,class:"bg-blue-50 text-blue-500 border border-blue-300 py-1 px-2 text-xs rounded"},n(p),1))),128))])]),t("td",q,n(s.duration_in_words==null?"...":s.duration_in_words),1),t("td",z,n(s.price==null?"...":s.price.amount_with_currency),1),t("td",G,n(s.subscriptions_count==null?"...":s.subscriptions_count),1),t("td",H,[t("span",I,n(e.getPercentageOfCoverage(s.subscriptions_count))+"%",1)]),t("td",J,n(s.created_at==null?"...":e.moment(s.created_at).fromNow()),1),t("td",K,[e.$inertia.page.props.projectPermissions.includes("View subscription plans")&&s.is_folder?(a(),o("a",{key:0,href:"#",onClick:d(p=>e.$inertia.get(e.route("show.subscription.plan",{project:e.route().params.project,subscription_plan:s.id})),["prevent"]),class:"text-indigo-600 hover:text-indigo-900 mr-3"},"View",8,Q)):i("",!0),e.$inertia.page.props.projectPermissions.includes("Manage subscription plans")?(a(),o("a",{key:1,href:"#",onClick:d(p=>e.showModal(s,"update"),["prevent"]),class:"text-indigo-600 hover:text-indigo-900 mr-3"},"Edit",8,W)):i("",!0),e.$inertia.page.props.projectPermissions.includes("Manage subscription plans")?(a(),o("a",{key:2,href:"#",onClick:d(p=>e.showModal(s,"delete"),["prevent"]),class:"text-red-600 hover:text-red-900"},"Delete",8,X)):i("",!0)])]))),128)),e.subscriptionPlansPayload.data.length==0?(a(),o("tr",Y,tt)):i("",!0)])])])])]),c(w,{class:"mt-6",paginationPayload:e.subscriptionPlansPayload,updateData:["subscriptionPlansPayload"]},null,8,["paginationPayload"])])])}const jt=P(B,[["render",et]]);export{jt as default};
