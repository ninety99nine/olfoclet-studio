import{h as w}from"./moment-fbc5633a.js";import{s as y,e as a,b as p,a as t,F as _,h as f,f as c,x as l,o as n,t as i,i as d}from"./app-430601de.js";import b from"./ActiveStatusBadge-268bb729.js";import v from"./FolderStatusBadge-244e51d8.js";import{P as k}from"./Pagination-999347a1.js";import S from"./ManageSubscriptionPlanModal-9bcfaea7.js";import{_ as P}from"./_plugin-vue_export-helper-c27b6911.js";/* empty css            */import"./base-c7d9afcb.js";import"./el-select-6d9fbecd.js";import"./el-popover-9832dd3a.js";import"./icon-d4413508.js";import"./constants-bf9e3feb.js";import"./index-32fd77e6.js";import"./el-switch-24bc25a2.js";import"./el-breadcrumb-item-08634956.js";import"./InputLabel-c5dbdde8.js";import"./TextInput-539a61cf.js";import"./Textarea-728abe8a.js";import"./PrimaryButton-86744c0d.js";import"./SelectInput-445d6387.js";import"./DialogModal-c4420808.js";import"./DangerButton-8e630b29.js";import"./SecondaryButton-3a726258.js";const B=y({components:{ManageSubscriptionPlanModal:S,Pagination:k,ActiveStatusBadge:b,FolderStatusBadge:v},props:{breadcrumbs:Array,totalSubscriptions:Number,autoBillingReminders:Array,parentSubscriptionPlan:Object,subscriptionPlansPayload:Object},data(){return{moment:w,modalAction:null,isShowingModal:!1,subscriptionPlan:null}},methods:{getDuration(e){let o=e.duration,r=e.frequency;return o==1&&(r=r.slice(0,-1)),o+" "+r},getPercentageOfCoverage(e){return this.totalSubscriptions>0?Math.round(e/this.totalSubscriptions*100):0},showModal(e,o){this.subscriptionPlan=e,this.modalAction=o,this.isShowingModal=!0}}}),C={class:"bg-white overflow-hidden shadow-xl sm:rounded-lg"},M={class:"flex flex-col"},$={class:"-my-2 overflow-x-auto sm:-mx-6 lg:-mx-8"},A={class:"py-2 align-middle inline-block min-w-full sm:px-6 lg:px-8"},V={class:"shadow overflow-hidden border-b border-gray-200 sm:rounded-lg"},j={class:"min-w-full divide-y divide-gray-200"},D=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-xs font-medium text-gray-500 uppercase tracking-wider text-left"},[t("span",null,"Name")]),t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-xs font-medium text-gray-500 uppercase tracking-wider text-left"},[t("span",null,"Description")]),t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-xs font-medium text-gray-500 uppercase tracking-wider text-center"},[t("span",null,"Type")]),t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-xs font-medium text-gray-500 uppercase tracking-wider text-center"},[t("span",null,"Active")]),t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-xs font-medium text-gray-500 uppercase tracking-wider text-center"},[t("span",null,"Duration")]),t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-xs font-medium text-gray-500 uppercase tracking-wider text-center"},[t("span",null,"Price")]),t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-xs font-medium text-gray-500 uppercase tracking-wider text-center"},[t("span",null,"Subscriptions")]),t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-xs font-medium text-gray-500 uppercase tracking-wider text-center"},[t("span",null,"Popularity")]),t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-xs font-medium text-gray-500 uppercase tracking-wider"},[t("span",null,"Created")]),t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap text-xs font-medium text-gray-500 uppercase tracking-wider text-right"},[t("span",null,"Actions")])])],-1),N={class:"bg-white divide-y divide-gray-200"},F={class:"px-6 py-3 whitespace-nowrap text-left"},O={class:"text-sm text-gray-900"},R={class:"px-6 py-3 whitespace-nowrap text-left"},q={class:"px-6 py-3 whitespace-nowrap text-sm text-gray-500 text-center"},E={class:"px-6 py-3 whitespace-nowrap text-sm text-gray-500 text-center"},L={class:"px-6 py-3 whitespace-nowrap text-sm text-gray-500 text-center"},T={class:"px-6 py-3 whitespace-nowrap text-sm text-gray-500 text-center"},U={class:"px-6 py-3 whitespace-nowrap text-sm text-gray-500 text-center"},z={class:"px-6 py-3 whitespace-nowrap text-sm text-gray-500 text-center"},G={class:"text-lg text-green-600"},H={class:"px-6 py-3 whitespace-nowrap text-sm text-gray-500"},I={class:"px-6 py-3 whitespace-nowrap text-right text-sm font-medium"},J=["onClick"],K=["onClick"],Q=["onClick"],W={key:0},X=t("td",{colspan:10,class:"px-6 py-3 whitespace-nowrap"},[t("div",{class:"text-center text-gray-900 text-sm p-6"},"No subscription plans")],-1),Y=[X];function Z(e,o,r,tt,et,st){const m=l("manage-subscription-plan-modal"),h=l("FolderStatusBadge"),g=l("ActiveStatusBadge"),x=l("pagination");return n(),a("div",null,[p(m,{modelValue:e.isShowingModal,"onUpdate:modelValue":o[0]||(o[0]=s=>e.isShowingModal=s),action:e.modalAction,subscriptionPlan:e.subscriptionPlan,parentSubscriptionPlan:e.parentSubscriptionPlan,autoBillingReminders:e.autoBillingReminders,breadcrumbs:e.breadcrumbs},null,8,["modelValue","action","subscriptionPlan","parentSubscriptionPlan","autoBillingReminders","breadcrumbs"]),t("div",C,[t("div",M,[t("div",$,[t("div",A,[t("div",V,[t("table",j,[D,t("tbody",N,[(n(!0),a(_,null,f(e.subscriptionPlansPayload.data,s=>(n(),a("tr",{key:s.id},[t("td",F,[t("div",O,i(s.name),1)]),t("td",R,i(s.description==null?"...":s.description),1),t("td",q,[p(h,{subscriptionPlan:s},null,8,["subscriptionPlan"])]),t("td",E,[p(g,{subscriptionPlan:s},null,8,["subscriptionPlan"])]),t("td",L,i(s.duration==null?"...":e.getDuration(s)),1),t("td",T,i(s.price==null?"...":s.price.amount_with_currency),1),t("td",U,i(s.subscriptions_count==null?"...":s.subscriptions_count),1),t("td",z,[t("span",G,i(e.getPercentageOfCoverage(s.subscriptions_count))+"%",1)]),t("td",H,i(s.created_at==null?"...":e.moment(s.created_at).fromNow()),1),t("td",I,[e.$inertia.page.props.projectPermissions.includes("View subscription plans")&&s.is_folder?(n(),a("a",{key:0,href:"#",onClick:d(u=>e.$inertia.get(e.route("show.subscription.plan",{project:e.route().params.project,subscription_plan:s.id})),["prevent"]),class:"text-indigo-600 hover:text-indigo-900 mr-3"},"View",8,J)):c("",!0),e.$inertia.page.props.projectPermissions.includes("Manage subscription plans")?(n(),a("a",{key:1,href:"#",onClick:d(u=>e.showModal(s,"update"),["prevent"]),class:"text-indigo-600 hover:text-indigo-900 mr-3"},"Edit",8,K)):c("",!0),e.$inertia.page.props.projectPermissions.includes("Manage subscription plans")?(n(),a("a",{key:2,href:"#",onClick:d(u=>e.showModal(s,"delete"),["prevent"]),class:"text-red-600 hover:text-red-900"},"Delete",8,Q)):c("",!0)])]))),128)),e.subscriptionPlansPayload.data.length==0?(n(),a("tr",W,Y)):c("",!0)])])])])])]),p(x,{class:"mt-6",paginationPayload:e.subscriptionPlansPayload,updateData:["subscriptionPlansPayload"]},null,8,["paginationPayload"])])])}const Ct=P(B,[["render",Z]]);export{Ct as default};
